<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <title>Expression tester</title>
        
        <script src="../js/lib/jquery-2.0.3.js"></script>
        <script src="../js/lib/messageformat.js"></script>
        <script src="../js/app/context.js"></script>
        <script src="../js/app/scope.js"></script>
        <script src="../js/app/expressionEvaluator.js"></script> 
        <script src="../js/app/expressionTokenizer.js"></script> 
        <script src="../js/app/loop.js"></script>
        <script src="../js/app/loopManager.js"></script>
        <script src="../js/app/nodeAttributes.js"></script>
        <script src="../js/app/resolver.js"></script>
        <script src="../js/app/i18nHelper.js"></script>
        <script src="../js/app/i18n.js"></script>
        <script src="../js/app/parser.js"></script>
        <script src="../js/app/main.js"></script>
        
        <script>
$(function () {
    "use strict";

    var dictionary = { 
        aString: "string",
        doggy: false,
        number1: 1,
        number100: 100,
        user: {
            name: "Bob", 
            age: function( ){
                return 25;
            },
            birth: function( ){
                return {
                    day: 3,
                    month: 3,
                    year: 1977,
                    aFunction: function(){
                        return {
                            another: 'yes!'
                        };
                    }
                };
            }
        },
        items: [ 'item0', 'item1', 'item2' ]
    };

    //zpt.run( document.body, dictionary );
    
    $( '#evaluate' ).click( function() {
        //alert('ok');
        try {
            var scope = new ZPT.Scope( dictionary );
            var valueExpression = $( '#expression' ).val();
            var evaluated = ZPT.expressionEvaluator.evaluateToNotNull( scope, valueExpression );
            $( '#result' ).text( evaluated );
        } catch ( e ){
            $( '#result' ).text( e );
        }
        
        return false;
    });
});         
        </script>
    </head>
    <body>
        <div>
            Dictionary:
            <pre>
    var dictionary = { 
        aString: "string",
        doggy: false,
        number1: 1,
        number100: 100,
        user: {
            name: "Bob", 
            age: function( ){
                return 25;
            },
            birth: function( ){
                return {
                    day: 3,
                    month: 3,
                    year: 1977,
                    aFunction: function(){
                        return {
                            another: 'yes!'
                        };
                    }
                };
            }
        },
        items: [ 'item0', 'item1', 'item2' ]
    };
            </pre>
        </div>
        
        <div>
            <label for="expression">Expression:</label>
            <input type="text" name="expression" id="expression" value="" size="50">
        </div>
        
        <div>
            Result:
            <span id="result" data-tcontent="">
                -
            </span>
        </div>
        
        <input id="evaluate" type="button" value="Evaluate!">
    </body>
</html>
