!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).zpt=e()}}(function(){var define,module,exports;return function i(s,a,l){function u(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return u(s[t][1][e]||e)},o,o.exports,i,s,a,l)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";var i=e("../../context.js"),r=function(e){var o=e;return{putToAutoDefineHelper:function(e,t){var n=o,r=i.getConf();e.get(r.i18nDomainVarName)&&(n+=r.inDefineDelimiter+r.i18nDomainVarName),"["!=n[0]&&(n="["+n+"]"),t.put(r.i18nDomainVarName,n)},dependsOn:function(){return[]},update:function(){},toString:function(){return o},type:r.id}};r.id="i18n:domain",r.build=function(e){return e?new r(e.trim()):null},t.exports=r},{"../../context.js":20}],2:[function(e,t,n){"use strict";var r=e("../../context.js"),o=function(e){var t=e;return{putToAutoDefineHelper:function(e){e.put(r.getConf().i18nLanguageVarName,t)},dependsOn:function(){return[]},update:function(){},toString:function(){return"I18NLanguage: "+t},type:o.id}};o.id="i18n:language",o.build=function(e){return e?new o(e.trim()):null},t.exports=o},{"../../context.js":20}],3:[function(e,t,n){"use strict";var r=function(e){var t=e;return{process:function(e,t){return!(t.style.display="none")},dependsOn:function(){return[]},toString:function(){return"METALDefineMacro: "+t},type:r.id}};r.id="metal:define-macro",r.build=function(e){return new r(e.trim())},t.exports=r},{}],4:[function(r,e,t){"use strict";var s=r("../../expressions/expressionsUtils.js"),a=function(e,t,n){var r=e,o=t,i=n;return{process:function(){},dependsOn:function(e){return s.buildDependsOnList(void 0,e,o)},update:function(e){e.updateNode(i)},toString:function(){return"METALFillSlot: "+r},type:a.id}};a.id="metal:fill-slot",a.build=function(e,t){var n=r("../../expressions/expressionBuilder.js");return new a(e,n.build(e),t)},e.exports=a},{"../../expressions/expressionBuilder.js":39,"../../expressions/expressionsUtils.js":41}],5:[function(r,e,t){"use strict";var h=r("../../context.js"),f=(r("../../scopes/scope.js"),r("../../expressions/expressionBuilder.js")),o=r("../../expressions/expressionsUtils.js"),g=r("../attributeIndex.js"),m=r("../../cache/attributeCache.js"),p=r("../TAL/talDefine.js"),v=r("./metalFillSlot.js"),x=r("../../resolver.js"),i=function(e,t,n){var r=e,a=t,l=n,u=function(e,t,n,r,o,i){p.updateAttribute(t,l);var s=x.getMacroData(e);s.url&&(n.put(h.getConf().externalMacroUrlVarName,"'"+s.url+"'"),n.updateNode(t)),i&&t.setAttribute(r.relatedId,o.getAttribute(r.id))},c=function(e,t,n,r,o){for(var i,s=t.querySelectorAll("["+x.filterSelector(n.metalFillSlot)+"]"),a=0;i=s[a++];){var l=i.getAttribute(n.metalFillSlot),u=f.build(l).evaluate(e);if(o){var c=m.getByAttributeClass(v,l,i,o,e,function(){return v.build(l,t)});g.add(i,c,e)}if(!u)return;var p=i.cloneNode(!0),d=r.querySelector("["+x.filterSelector(n.metalDefineSlot)+"='"+u+"']");if(!d)throw'Slot "'+u+'" in expression "'+l+'" not found!';d.parentNode.insertBefore(p,d.nextSibling),p.removeAttribute(n.metalFillSlot),p.setAttribute(n.id,h.nextExpressionCounter()),d.remove()}};return{process:function(e,t,n,r){var o=x.getMacroKey(a,e),i=h.getTags(),s=x.getNode(o,e);return t.style.display="none",s.removeAttribute("style"),u(o,s,n,i,t,r),c(e,t,i,s,r),t.parentNode.insertBefore(s,t.nextSibling),s},dependsOn:function(e){return o.buildDependsOnList(void 0,e,a)},update:function(e,t){e.updateNode(t)},toString:function(){return"METALUseMacro: "+r},type:i.id}};i.id="metal:use-macro",i.build=function(e,t){var n=r("../../expressions/expressionBuilder.js");return new i(e,n.build(e.trim()),t?t.trim():void 0)},e.exports=i},{"../../cache/attributeCache.js":17,"../../context.js":20,"../../expressions/expressionBuilder.js":39,"../../expressions/expressionsUtils.js":41,"../../resolver.js":80,"../../scopes/scope.js":81,"../TAL/talDefine.js":11,"../attributeIndex.js":16,"./metalFillSlot.js":4}],6:[function(e,t,n){"use strict";var r,s=e("../../context.js"),a=e("../../expressions/expressionBuilder.js"),o=e("../../expressions/evaluateHelper.js");t.exports=(r={BUTTON:1,LABEL:1,LEGEND:1,FIELDSET:1,OPTION:1},{build:function(e,t,n){var r=t.trim(),o=0==r.indexOf(s.getConf().htmlStructureExpressionPrefix+" "),i=o?r.substr(1+s.getConf().htmlStructureExpressionPrefix.length):r;if(!i)throw e+" expression void.";return n(t,a.build(i),o,i)},updateNode:function(e,t,n){return o.isDefault(n)||(o.isNothing(n)&&(n=""),e.innerHTML=n,t||(e["form"in e&&!r[e.tagName]?"value":"innerText"]=n)),!0}})},{"../../context.js":20,"../../expressions/evaluateHelper.js":37,"../../expressions/expressionBuilder.js":39}],7:[function(u,e,t){"use strict";var c=u("../../context.js"),p=u("../../expressions/expressionTokenizer.js"),i=u("../../expressions/expressionsUtils.js"),s=u("../../utils.js"),d=function(e,t){function o(e,t,n){for(var r=0;r<a.length;r++){var o=a[r],i=o.name;if(!n||i===n){var s=o.expression.evaluate(e);i?u(t,i,s):l(t,s)}}}var n=e,a=t,l=function(e,t){if(t){if(!s.isPlainObject(t))throw'Invalid attribute value: "'+t+'". Object expected.';for(var n in t){var r=t[n];u(e,n,r)}}},u=function(e,t,n){if(c.isBooleanAttribute(t))n?e.setAttribute(t,""):e.removeAttribute(t);else if(null!=n)if(c.isAltAttribute(t))switch(t){case"innerHTML":throw e;case"style":e.style.cssText=n;break;case"class":t="className";default:e[t]=n}else e.setAttribute(t,n)};return{process:o,dependsOn:function(e){for(var t=[],n={},r=0;r<a.length;r++){var o=a[r];n[o.name]=i.buildDependsOnList(void 0,e,o.expression)}return t.push(n),t},update:function(e,t,n,r){o(n,t,r.groupId)},toString:function(){return"TALAttributes: "+n},type:d.id}};d.id="tal:attributes",d.build=function(e){for(var t=u("../../expressions/expressionBuilder.js"),n=[],r=e.trim(),o=new p(r,c.getConf().attributeDelimiter,!0);o.hasMoreTokens();){var i=o.nextToken().trim(),s=i.indexOf(c.getConf().inAttributeDelimiter);-1==s&&n.push({name:void 0,expression:t.build(i)});var a=i.substring(0,s),l=i.substring(s+1).trim();n.push({name:a,expression:t.build(l)})}return new d(e,n)},e.exports=d},{"../../context.js":20,"../../expressions/expressionBuilder.js":39,"../../expressions/expressionTokenizer.js":40,"../../expressions/expressionsUtils.js":41,"../../utils.js":83}],8:[function(n,e,t){"use strict";var o=n("../../expressions/evaluateHelper.js"),i=n("../../expressions/expressionsUtils.js"),s=function(e,t){var n=e,r=t;return{process:function(e,t){var n=o.evaluateBoolean(e,r);return t.style.display=n?"":"none",n},dependsOn:function(e){return i.buildDependsOnList(void 0,e,r)},update:function(e,t){e.updateNode(t)},toString:function(){return"TALCondition: "+n},type:s.id}};s.id="tal:condition",s.build=function(e){var t=n("../../expressions/expressionBuilder.js");return new s(e,t.build(e))},e.exports=s},{"../../expressions/evaluateHelper.js":37,"../../expressions/expressionBuilder.js":39,"../../expressions/expressionsUtils.js":41}],9:[function(e,t,n){"use strict";e("../../context.js");var a=e("../../expressions/evaluateHelper.js"),l=e("./contentHelper.js"),u=e("../../expressions/expressionsUtils.js"),c=function(e,t,n){function r(e,t){return l.updateNode(t,s,a.evaluateToNotNull(e,i))}var o=e,i=t,s=n;return{process:r,dependsOn:function(e){return u.buildDependsOnList(void 0,e,i)},update:function(e,t,n){r(n,t)},toString:function(){return"TALContent: "+o},type:c.id}};c.id="tal:content",c.build=function(e){return l.build("TALContent",e,function(e,t,n){return new c(e,t,n)})},t.exports=c},{"../../context.js":20,"../../expressions/evaluateHelper.js":37,"../../expressions/expressionsUtils.js":41,"./contentHelper.js":6}],10:[function(d,e,t){"use strict";var f=d("../../context.js"),h=d("../../expressions/expressionTokenizer.js"),u=d("../../expressions/expressionsUtils.js"),g=function(e,t){var n=e,a=t,r=function(e,t){var n=f.getConf().strictModeVarName;!0!==e.get(n)&&t.put(n,"true");for(var r=f.getConf().declaredVarsVarName,o=e.get(r)||[],i=0;i<a.length;i++){var s=a[i];o.push(s.name)}t.put(r,u.buildList(o,!0))},o=function(e){for(var t=[],n=0;n<a.length;n++){var r=a[n],o=i(e,r.name,r.type,r.required,r.defaultValueString,r.defaultValueExpression);t=t.concat(o)}return l(t),0==t.length},i=function(e,t,n,r,o,i){var s=[],a=e.get(t);if(void 0===a&&void 0!==i){var l=h(e,t,n,o,i);if(l)return s.push(l),s;a=e.get(t)}var u=p(t,n,a);u&&s.push(u);var c=d(t,r,a);return c&&s.push(c),s},p=function(e,t,n){if(t){var r=s(n);return r!==t.toLowerCase()&&"Expected value type ("+t.toLowerCase()+") of "+e+" property does not match type ("+r+'), value is "'+n+'".'}},s=function(e){var t={}.toString.call(e).split(" ")[1].slice(0,-1).toLowerCase();return"object"===t?e.constructor.name.toLowerCase():t},d=function(e,t,n){return!0===t&&void 0===n&&"Required value must not be undefined: "+e},h=function(e,t,n,r,o){try{var i=o.evaluate(e);return e.set(t,i),!1}catch(e){return"Error trying to evaluate default value of field "+t+", expression ["+r+"]: "+e}},l=function(e){if(0!=e.length)throw e};return{process:function(e,t){return r(e,t),o(e)},dependsOn:function(){return[]},update:function(){},toString:function(){return"TALDeclare: "+n},type:g.id}};g.id="tal:declare",g.build=function(e){for(var t=d("../../expressions/expressionBuilder.js"),n=[],r=["undefined","null"],o=new h(e.trim(),f.getConf().declareDelimiter,!0);o.hasMoreTokens();){for(var i=new h(o.nextToken().trim(),f.getConf().inDeclareDelimiter,!0),s=void 0,a=void 0,l=void 0,u=!1,c=1;i.hasMoreTokens();){var p=i.nextToken();if(g.tokenIsRequired(p))u=!0;else{switch(c){case 1:s=p;break;case 2:-1==r.indexOf(p.toLowerCase())&&(a=p);break;case 3:l=p;break;default:throw"Too many arguments in talDeclare item: "+e.trim()}++c}}s&&n.push({name:s,type:a,required:u,defaultValueString:l,defaultValueExpression:null==l?void 0:t.build(l)})}return new g(e,n)},g.tokenIsRequired=function(e){return"required"===e.toLowerCase()},e.exports=g},{"../../context.js":20,"../../expressions/expressionBuilder.js":39,"../../expressions/expressionTokenizer.js":40,"../../expressions/expressionsUtils.js":41}],11:[function(h,e,t){"use strict";var f=h("../../context.js"),g=h("../../expressions/expressionTokenizer.js"),m=(h("../../expressions/expressionsUtils.js"),function(e,t){var n=e,o=t;return{process:function(e,t){for(var n=0;n<o.length;n++){var r=o[n];e.set(r.name,r.nocall?r.expression:r.expression.evaluate(e),t||r.global,r.nocall,r.expression)}},dependsOn:function(){return[]},update:function(){},toString:function(){return"TALDefine: "+n},type:m.id}});m.id="tal:define",m.build=function(e){for(var t=h("../../expressions/expressionBuilder.js"),n=[],r=e.trim(),o=new g(r,f.getConf().defineDelimiter,!0);o.hasMoreTokens();){var i=o.nextToken().trim(),s=i.indexOf(f.getConf().inDefineDelimiter);if(-1==s)throw"Bad variable definition: "+i;var a=!1,l=!1,u=i.substring(0,s),c=i.substring(s+1).trim(),p=!1;do{var d=!1;f.getConf().globalVariableExpressionPrefix===u?d=l=!0:f.getConf().nocallVariableExpressionPrefix===u&&(d=a=!0),d?(s=c.indexOf(f.getConf().inDefineDelimiter),u=c.substring(0,s),c=c.substring(s+1).trim()):(n.push({name:u,expression:t.build(c),global:l,nocall:a}),p=!0)}while(!p&&-1!=s)}return new m(e,n)},m.appendStrings=function(){for(var e=arguments[0],t=1;t<arguments.length;++t){var n=arguments[t];n&&(e=e?e+f.getConf().defineDelimiter+n:n)}return e},m.updateAttribute=function(e,t){var n=f.getTags(),r=e.getAttribute(n.talDefine),o=m.appendStrings(t,r);o&&e.setAttribute(n.talDefine,o)},e.exports=m},{"../../context.js":20,"../../expressions/expressionBuilder.js":39,"../../expressions/expressionTokenizer.js":40,"../../expressions/expressionsUtils.js":41}],12:[function(o,e,t){"use strict";var i=o("../../expressions/path/literals/booleanLiteral.js"),r=o("../../expressions/expressionsUtils.js"),s=function(e,t){var n=e,o=t;return{process:function(e,t){var n=o.evaluate(e);if(n){for(var r=t.parentNode;t.firstChild;)r.appendChild(t.firstChild);r.removeChild(t)}return n},dependsOn:function(e){return r.buildDependsOnList(void 0,e,o)},update:function(){},toString:function(){return"TALOmitTag: "+n},type:s.id}};s.id="tal:omit-tag",s.build=function(e){var t=o("../../expressions/expressionBuilder.js"),n=e.trim(),r=""==n?new i(!0):t.build(n);return new s(e,r)},e.exports=s},{"../../expressions/expressionBuilder.js":39,"../../expressions/expressionsUtils.js":41,"../../expressions/path/literals/booleanLiteral.js":52}],13:[function(e,t,n){"use strict";var o=e("../../context.js"),r=e("./contentHelper.js"),i=function(e,t){var n=e,r=t;return{putToAutoDefineHelper:function(e){e.put(o.getConf().onErrorVarName,n,!0),e.put(o.getConf().onErrorStructureVarName,r,!1)},dependsOn:function(){return[]},update:function(){},toString:function(){return"TALOnError: "+n},type:i.id}};i.id="tal:on-error",i.build=function(e){return r.build("TALOnError",e,function(e,t,n,r){return new i(r,n)})},t.exports=i},{"../../context.js":20,"./contentHelper.js":6}],14:[function(e,t,n){"use strict";var a=e("../../expressions/expressionsUtils.js"),l=e("../../expressions/expressionBuilder.js"),u=e("../../parsers/loop.js"),c=function(e,t,n){var r=e,o=t,i=n,s=l.build(i);return{process:function(e){return new u(o,i,e)},dependsOn:function(e){return a.buildDependsOnList(void 0,e,s)},update:function(e,t){e.updateNode(t)},toString:function(){return"TALRepeat: "+r},type:c.id}};c.id="tal:repeat",c.build=function(e){var t=e.trim(),n=t.indexOf(" ");if(-1==n)throw"Bad repeat expression: "+t;var r=t.substring(0,n),o=t.substring(n+1);return new c(e,r,o)},t.exports=c},{"../../expressions/expressionBuilder.js":39,"../../expressions/expressionsUtils.js":41,"../../parsers/loop.js":71}],15:[function(e,t,n){"use strict";var s=e("../../expressions/evaluateHelper.js"),r=e("./contentHelper.js"),a=e("../../expressions/expressionsUtils.js"),l=function(e,t,n){var r=e,o=t,i=n;return{process:function(e,t){var n=s.evaluateToNotNull(e,o);if(s.isDefault(n))return!0;if(s.isNothing(n)&&(n=""),i)t.outerHTML=n;else{var r=t.ownerDocument.createTextNode(n);t.parentNode.replaceChild(r,t)}return!0},dependsOn:function(e){return a.buildDependsOnList(void 0,e,o)},update:function(){},toString:function(){return"TALReplace: "+r},type:l.id}};l.id="tal:replace",l.build=function(e){return r.build("TALReplace",e,function(e,t,n){return new l(e,t,n)})},t.exports=l},{"../../expressions/evaluateHelper.js":37,"../../expressions/expressionsUtils.js":41,"./contentHelper.js":6}],16:[function(e,t,n){"use strict";var u=e("../utils.js"),r=e("../context.js");t.exports=function(){function e(){i={},s=r.getTags()}var i,s;e();var o=function(e,t,n,r){for(var o=0;o<n.length;o++)a(e,t,n[o],r)},a=function(e,t,n,r){u.isPlainObject(n)?function(e,t,n){for(var r in n)a(e,t,n[r],r)}(e,t,n):Array.isArray(n)?o(e,t,n,r):l(e,t,n,r)},l=function(e,t,n,r){var o=i[n];o||(o=[],i[n]=o),o.push({attributeInstance:t,nodeId:e.getAttribute(s.id),groupId:r})};return{add:function(e,t,n){o(e,t,t.dependsOn(n))},getVarsList:function(e){return i[e]},remove:function(e,r){var t=i[e].filter(function(e,t,n){return e.nodeId!==r});i[e]=t},reset:e}}()},{"../context.js":20,"../utils.js":83}],17:[function(e,t,n){"use strict";var c=e("./cacheHelper.js"),p=e("../context.js"),d=e("../logHelper.js"),r=e("../attributes/attributeIndex.js");t.exports=function(){function e(){l={}}var l;e();function u(e,t,n){return e?(d.debug("Must index!"),r.add(e,t,n)):d.debug("Not indexed!"),t}function s(e,t,n,r,o,i){if(d.debug('Request building of ZPT attribute "'+t+'", force "'+r+'"'),r||!p.getConf().attributeCacheOn)d.debug("Cache OFF!");else{d.debug("Cache ON!");var s=function(e,t){var n=l[e];return n?n[c.hashCode(t)]:null}(e,t);if(s)return d.debug("Found in cache!"),u(o,s,i);d.debug("NOT found in cache!")}d.debug("Must build!");var a=n();return function(e,t,n){var r=l[e];r||(r={},l[e]=r),r[c.hashCode(t)]=n}(e,t,a),u(o,a,i)}return{getByAttributeClass:function(e,t,n,r,o,i){return s(e.id,t,i||function(){return e.build(t)},!1,r?n:void 0,o)},reset:e}}()},{"../attributes/attributeIndex.js":16,"../context.js":20,"../logHelper.js":67,"./cacheHelper.js":18}],18:[function(e,t,n){t.exports=function(){"use strict";return{hashCode:function(e){if(Array.prototype.reduce)return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0);var t=0;if(0==e.length)return t;for(var n=0,r=e.length;n<r;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t}}}()},{}],19:[function(e,t,n){t.exports=function(){"use strict";var i=e("./cacheHelper.js"),s=e("../context.js"),a=e("../logHelper.js"),l={};return{get:function(e,t,n){if(a.debug('Request building of expression "'+e+'", force "'+n+'"'),!n&&s.getConf().expressionCacheOn){a.debug("Cache ON!");var r=function(e){return l[i.hashCode(e)]}(e);if(r)return a.debug("Found in cache!"),r;a.debug("NOT found in cache!")}else a.debug("Cache OFF!");a.debug("Must build!");var o=t();return function(e,t){l[i.hashCode(e)]=t}(e,o),o},clean:function(){l={}}}}()},{"../context.js":20,"../logHelper.js":67,"./cacheHelper.js":18}],20:[function(e,t,n){"use strict";var v=e("log4javascript"),x=e("./utils.js"),y=e("./parsers/loopItem.js");t.exports=function(){function e(e){o=e,i=""}function t(){return l}var n,r={talCondition:"tal:condition",talRepeat:"tal:repeat",talAttributes:"tal:attributes",talContent:"tal:content",talDefine:"tal:define",talAutoDefine:"tal:auto-define",talOmitTag:"tal:omit-tag",talReplace:"tal:replace",talOnError:"tal:on-error",talDeclare:"tal:declare",metalDefineMacro:"metal:define-macro",metalUseMacro:"metal:use-macro",metalDefineSlot:"metal:define-slot",metalFillSlot:"metal:fill-slot",metalMacro:"data-mmacro",i18nDomain:"i18n:domain",i18nLanguage:"i18n:language",rootKey:"data-root-key",qdup:"data-qdup",id:"data-id",relatedId:"data-related-id"},o={talCondition:"data-condition",talRepeat:"data-repeat",talAttributes:"data-attributes",talContent:"data-content",talDefine:"data-define",talAutoDefine:"data-tauto-define",talOmitTag:"data-omit-tag",talReplace:"data-replace",talOnError:"data-on-error",talDeclare:"data-declare",metalDefineMacro:"data-define-macro",metalUseMacro:"data-use-macro",metalDefineSlot:"data-define-slot",metalFillSlot:"data-fill-slot",metalMacro:"data-mmacro",i18nDomain:"data-domain",i18nLanguage:"data-language",rootKey:"data-root-key",qdup:"data-qdup",id:"data-id",relatedId:"data-related-id"},i="",s={lowerCase:function(e){return e.toLocaleLowerCase()},upperCase:function(e){return e.toLocaleUpperCase()},localeDate:function(e){return e.toLocaleDateString},localeTime:function(e){return e.toLocaleTimeString},localeString:function(e,t){return t?e.toLocaleString(e,t):e.toLocaleString(e)},fix:function(e,t){return e.toFixed(t)}},a=":",l={pathDelimiter:"|",pathSegmentDelimiter:"/",expressionDelimiter:" ",intervalDelimiter:":",propertyDelimiter:"/",defineDelimiter:";",inDefineDelimiter:" ",attributeDelimiter:";",inAttributeDelimiter:" ",domainDelimiter:" ",i18nOptionsDelimiter:";",inI18nOptionsDelimiter:" ",argumentsDelimiter:",",macroDelimiter:"@",declareDelimiter:";",inDeclareDelimiter:" ",i18nConfResourceId:"/CONF/",htmlStructureExpressionPrefix:"structure",globalVariableExpressionPrefix:"global",nocallVariableExpressionPrefix:"nocall",templateErrorVarName:"error",onErrorVarName:"_on-error",onErrorStructureVarName:"_on-error-structure",i18nDomainVarName:"_i18nDomain",i18nLanguageVarName:"_i18nLanguage",externalMacroUrlVarName:"_externalMacroUrl",strictModeVarName:"_strictMode",declaredVarsVarName:"_declaredVars",repeatVarName:"_repeat",windowVarName:"window",contextVarName:"context",nothingVarName:"nothing",defaultVarName:"default",nothingVarValue:"___nothing___",defaultVarValue:"___default___",loggingOn:!1,loggingLevel:v.Level.ERROR,externalMacroPrefixURL:"",variableNameRE:/^[A-Za-z0-9_/-]+$/,expressionCacheOn:!0,attributeCacheOn:!0,expressionSuffix:a,stringExpression:"string:",existsExpression:"exists:",notExpression:"not:",javaScriptExpression:"js:",equalsExpression:"eq:",greaterExpression:"gt:",lowerExpression:"lt:",addExpression:"+:",subExpression:"-:",mulExpression:"*:",divExpression:"/:",modExpression:"%:",orExpression:"or:",andExpression:"and:",condExpression:"cond:",formatExpression:"format:",trExpression:"tr:",trNumberExpression:"trNumber:",trCurrencyExpression:"trCurrency:",trDateTimeExpression:"trDate:",inExpression:"in:",queryExpression:"query:",pathExpression:""},u={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1},c={className:1,class:1,href:1,htmlFor:1,id:1,innerHTML:1,label:1,style:1,src:1,text:1,title:1,value:1};x.extend(c,u);var p=function(e){var t=Array.isArray(e)?e.join("\n"):e;throw window.alert(t),t},d=[],h=!1,f=0,g=0,m={getTags:function(){return o},setTags:e,getTal:function(){if(""==i){var e=0,t=o.qdup;for(var n in o)t!=o[n]&&(0<e++&&(i+=","),i+="*["+o[n]+"]")}return i},getFormatter:function(e){return s[e]},registerFormatter:function(e,t){s[e]=t},unregisterFormatter:function(e){delete s[e]},getConf:t,setConf:function(e){l=e},getLogger:function(){return!n&&t().loggingOn&&(n=function(){var e=v.getDefaultLogger();return e.setLevel(t().loggingLevel),e}()),n},setLogger:function(e){n=e},useOriginalTags:function(){e(r)},getBooleanAttributes:function(){return u},setBooleanAttributes:function(e){u=e},isBooleanAttribute:function(e){return 1===u[e]},getAltAttributes:function(){return c},setAltAttributes:function(e){c=e},isAltAttribute:function(e){return 1===c[e]},errorFunction:p,setErrorFunction:function(e){m.errorFunction=e},asyncError:function(e,t,n){var r="Error trying to get "+e+": "+t;n?n(r):p(r)},repeat:function(e,t,n){return new y(e,t,n)},setFolderDictionaries:function(e){d=e},getFolderDictionaries:function(){return d},setStrictMode:function(e){h=e},isStrictMode:function(){return h},nextExpressionCounter:function(){return++f},setExpressionCounter:function(e){f=e},nextRunCounter:function(){return++g}};return m}()},{"./parsers/loopItem.js":72,"./utils.js":83,log4javascript:85}],21:[function(e,t,n){"use strict";var r=e("../../context.js"),o=e("./arithmethicHelper.js"),i=e("../expressionsUtils.js"),s=function(e,t){var n=e,r=t;return{evaluate:function(e){return o.evaluate(n,e,r,s.mathOperation,function(e,t){return e+t})},dependsOn:function(e,t){return i.buildDependsOnList(e,t,r)},toString:function(){return n}}};s.removePrefix=!0,s.getPrefix=function(){return r.getConf().addExpression},s.mathOperation="add",s.getId=s.mathOperation,s.build=function(e){var t=o.build(e,s.mathOperation);return new s(e,t)},t.exports=s},{"../../context.js":20,"../expressionsUtils.js":41,"./arithmethicHelper.js":22}],22:[function(a,e,t){e.exports=function(){"use strict";var o=a("../../context.js"),i=a("../expressionTokenizer.js"),s=a("../evaluateHelper.js"),p=function(e,t,n,r,o,i){if(!s.isNumber(t))throw"Error trying doing math operation, value '"+t+"' is not a valid number in expression '"+o+" "+i+"'";return 0==e?Number(t):r(n,Number(t))};return{build:function(e,t){var n=a("../expressionBuilder.js");if(0==e.length)throw t+" expression void.";var r=new i(e,o.getConf().expressionDelimiter,!1);return n.buildList(r)},evaluate:function(e,t,n,r,o){for(var i=0,s=0,a=0;a<n.length;a++){var l=n[a],u=l.evaluate(t);if(Array.isArray(u))for(var c=0;c<u.length;c++)i=p(s++,u[c],i,o,r,l);else i=p(s++,u,i,o,r,l)}if(s<2)throw'Error in expression "'+e+'". Only one element in evaluation of "'+r+'" expression, please add at least one more.';return i}}}()},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionTokenizer.js":40}],23:[function(e,t,n){"use strict";var r=e("../../context.js"),o=e("./arithmethicHelper.js"),i=e("../expressionsUtils.js"),s=function(e,t){var n=e,r=t;return{evaluate:function(e){return o.evaluate(n,e,r,s.mathOperation,function(e,t){return e/t})},dependsOn:function(e,t){return i.buildDependsOnList(e,t,r)},toString:function(){return n}}};s.removePrefix=!0,s.getPrefix=function(){return r.getConf().divExpression},s.mathOperation="divide",s.getId=s.mathOperation,s.build=function(e){var t=o.build(e,s.mathOperation);return new s(e,t)},t.exports=s},{"../../context.js":20,"../expressionsUtils.js":41,"./arithmethicHelper.js":22}],24:[function(e,t,n){"use strict";var r=e("../../context.js"),o=e("./arithmethicHelper.js"),i=e("../expressionsUtils.js"),s=function(e,t){var n=e,r=t;return{evaluate:function(e){return o.evaluate(n,e,r,s.mathOperation,function(e,t){return e%t})},dependsOn:function(e,t){return i.buildDependsOnList(e,t,r)},toString:function(){return n}}};s.removePrefix=!0,s.getPrefix=function(){return r.getConf().modExpression},s.mathOperation="mod",s.getId=s.mathOperation,s.build=function(e){var t=o.build(e,s.mathOperation);return new s(e,t)},t.exports=s},{"../../context.js":20,"../expressionsUtils.js":41,"./arithmethicHelper.js":22}],25:[function(e,t,n){"use strict";var r=e("../../context.js"),o=e("./arithmethicHelper.js"),i=e("../expressionsUtils.js"),s=function(e,t){var n=e,r=t;return{evaluate:function(e){return o.evaluate(n,e,r,s.mathOperation,function(e,t){return e*t})},dependsOn:function(e,t){return i.buildDependsOnList(e,t,r)},toString:function(){return n}}};s.removePrefix=!0,s.getPrefix=function(){return r.getConf().mulExpression},s.mathOperation="multiply",s.getId=s.mathOperation,s.build=function(e){var t=o.build(e,s.mathOperation);return new s(e,t)},t.exports=s},{"../../context.js":20,"../expressionsUtils.js":41,"./arithmethicHelper.js":22}],26:[function(e,t,n){"use strict";var r=e("../../context.js"),o=e("./arithmethicHelper.js"),i=e("../expressionsUtils.js"),s=function(e,t){var n=e,r=t;return{evaluate:function(e){return o.evaluate(n,e,r,s.mathOperation,function(e,t){return e-t})},dependsOn:function(e,t){return i.buildDependsOnList(e,t,r)},toString:function(){return n}}};s.removePrefix=!0,s.getPrefix=function(){return r.getConf().subExpression},s.mathOperation="substract",s.getId=s.mathOperation,s.build=function(e){var t=o.build(e,s.mathOperation);return new s(e,t)},t.exports=s},{"../../context.js":20,"../expressionsUtils.js":41,"./arithmethicHelper.js":22}],27:[function(n,e,t){"use strict";function r(e,t){var n=e,r=t;return{evaluate:function(e){for(var t=0;t<r.length;t++){var n=r[t];if(!i.evaluateBoolean(e,n))return!1}return!0},dependsOn:function(e,t){return s.buildDependsOnList(e,t,r)},toString:function(){return n}}}var o=n("../../context.js"),i=n("../evaluateHelper.js"),s=n("../expressionsUtils.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().andExpression},r.build=function(e){var t=n("./boolHelper.js").build(e,"And");return new r(e,t)},e.exports=r},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionsUtils.js":41,"./boolHelper.js":28}],28:[function(e,t,n){"use strict";var o,i,s;t.exports=(o=e("../../context.js"),i=e("../expressionTokenizer.js"),s=e("../expressionBuilder.js"),{build:function(e,t){var n=e.trim();if(0==n.length)throw t+" expression void.";var r=new i(n,o.getConf().expressionDelimiter,!1);if(1==r.countTokens())throw'Syntax error in expression "'+n+'". Only one element in '+t+" expression, please add at least one more.";return s.buildList(r)}})},{"../../context.js":20,"../expressionBuilder.js":39,"../expressionTokenizer.js":40}],29:[function(o,e,t){"use strict";function i(e,t,n,r){var o=e,i=t,s=n,a=r;return{evaluate:function(e){return u.evaluateBoolean(e,i)?s.evaluate(e):a.evaluate(e)},dependsOn:function(e,t){return l.buildDependsOnList(e,t,i,s,a)},toString:function(){return o}}}var s=o("../../context.js"),a=o("../expressionTokenizer.js"),l=o("../expressionsUtils.js"),u=o("../evaluateHelper.js");i.removePrefix=!0,i.getId=i.getPrefix=function(){return s.getConf().condExpression},i.build=function(e){var t=o("../expressionBuilder.js"),n=e.trim();if(0==n.length)throw"Cond expression void.";var r=new a(n,s.getConf().expressionDelimiter,!1);if(3!=r.countTokens())throw'Syntax error in cond expression "'+n+'". 3 element are needed.';return new i(n,t.build(r.nextToken()),t.build(r.nextToken()),t.build(r.nextToken()))},e.exports=i},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionTokenizer.js":40,"../expressionsUtils.js":41}],30:[function(n,e,t){"use strict";function r(e,t){var n=e,r=t;return{evaluate:function(e){return!i.evaluateBoolean(e,r)},dependsOn:function(e,t){return s.buildDependsOnList(e,t,r)},toString:function(){return n}}}var o=n("../../context.js"),i=n("../evaluateHelper.js"),s=n("../expressionsUtils.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().notExpression},r.build=function(e){var t=n("../expressionBuilder.js").build(e);return new r(e,t)},e.exports=r},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionsUtils.js":41}],31:[function(n,e,t){"use strict";function r(e,t){var n=e,r=t;return{evaluate:function(e){for(var t=0;t<r.length;t++){var n=r[t];if(i.evaluateBoolean(e,n))return!0}return!1},dependsOn:function(e,t){return s.buildDependsOnList(e,t,r)},toString:function(){return n}}}var o=n("../../context.js"),i=n("../evaluateHelper.js"),s=n("../expressionsUtils.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().orExpression},r.build=function(e){var t=n("./boolHelper.js").build(e,"Or");return new r(e,t)},e.exports=r},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionsUtils.js":41,"./boolHelper.js":28}],32:[function(i,e,t){"use strict";var s,a,r;e.exports=(s=i("../../context.js"),a=i("../expressionTokenizer.js"),r=i("../evaluateHelper.js"),{build:function(e,t){var n=i("../expressionBuilder.js"),r=e.trim();if(0==r.length)throw t+" expression void.";var o=new a(r,s.getConf().expressionDelimiter,!1);if(2!=o.countTokens())throw'Wrong number of elements in expression "'+r+'", '+t+" expressions only support two.";return{expression1:n.build(o.nextToken()),expression2:n.build(o.nextToken())}},evaluate:function(e,t,n){return{number1:r.evaluateNumber(e,t),number2:r.evaluateNumber(e,n)}}})},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionTokenizer.js":40}],33:[function(o,e,t){"use strict";function i(e,t){var n=e,r=t;return{evaluate:function(e){for(var t=r[0].evaluate(e),n=1;n<r.length;n++){if(t!=r[n].evaluate(e))return!1}return!0},dependsOn:function(e,t){return l.buildDependsOnList(e,t,r)},toString:function(){return n}}}var s=o("../../context.js"),a=o("../expressionTokenizer.js"),l=o("../expressionsUtils.js");o("../evaluateHelper.js");i.removePrefix=!0,i.getId=i.getPrefix=function(){return s.getConf().equalsExpression},i.build=function(e){var t=o("../expressionBuilder.js"),n=e.trim();if(0==n.length)throw"Equals expression void.";var r=new a(n,s.getConf().expressionDelimiter,!1);if(1==r.countTokens())throw'Only one element in equals expression "'+n+'", please add at least one more.';return new i(n,t.buildList(r))},e.exports=i},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionTokenizer.js":40,"../expressionsUtils.js":41}],34:[function(e,t,n){"use strict";function r(e,t,n){var r=e,o=t,i=n;return{evaluate:function(e){var t=s.evaluate(e,o,i);return t.number1>t.number2},dependsOn:function(e,t){return a.buildDependsOnList(e,t,o,i)},toString:function(){return r}}}var o=e("../../context.js"),s=e("./comparisonHelper.js"),a=e("../expressionsUtils.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().greaterExpression},r.build=function(e){var t=s.build(e,"greater");return new r(e,t.expression1,t.expression2)},t.exports=r},{"../../context.js":20,"../expressionsUtils.js":41,"./comparisonHelper.js":32}],35:[function(o,e,t){"use strict";function i(e,t){var n=e,i=t;return{evaluate:function(e){for(var t=i[0].evaluate(e),n=1;n<i.length;n++){var r=i[n].evaluate(e);if(Array.isArray(r)){for(var o=0;o<r.length;o++)if(t==r[o])return!0}else if(t==r)return!0}return!1},dependsOn:function(e,t){return r.buildDependsOnList(e,t,i)},toString:function(){return n}}}var s=o("../../context.js"),a=o("../expressionTokenizer.js"),r=o("../expressionsUtils.js");o("../evaluateHelper.js");i.removePrefix=!0,i.getId=i.getPrefix=function(){return s.getConf().inExpression},i.build=function(e){var t=o("../expressionBuilder.js"),n=e.trim();if(0==n.length)throw"In expression void.";var r=new a(n,s.getConf().expressionDelimiter,!1);if(1==r.countTokens())throw'Only one element in in expression "'+n+'", please add at least one more.';return new i(n,t.buildList(r))},e.exports=i},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionTokenizer.js":40,"../expressionsUtils.js":41}],36:[function(e,t,n){"use strict";function r(e,t,n){var r=e,o=t,i=n;return{evaluate:function(e){var t=s.evaluate(e,o,i);return t.number1<t.number2},dependsOn:function(e,t){return a.buildDependsOnList(e,t,o,i)},toString:function(){return r}}}var o=e("../../context.js"),s=e("./comparisonHelper.js"),a=e("../expressionsUtils.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().lowerExpression},r.build=function(e){var t=s.build(e,"lower");return new r(e,t.expression1,t.expression2)},t.exports=r},{"../../context.js":20,"../expressionsUtils.js":41,"./comparisonHelper.js":32}],37:[function(e,t,n){"use strict";var o,r=e("../context.js");t.exports={evaluateToNotNull:function(e,t){var n=t.evaluate(e);return null==n?"undefined":n},evaluateBoolean:function(e,t){var n=t.evaluate(e);return void 0!==n&&null!=n&&"false"!=n&&0!=n&&0!=n},evaluateNumber:function(e,t,n){var r=t.evaluate(e);if(o(r))return r;throw n||'Expression "'+t+'" is not a valid number.'},isNumber:o=function(e){return!isNaN(parseFloat(e))||!isFinite(e)},evaluateExpressionList:function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(o.evaluate(t))}return n},isDefault:function(e){return e===r.getConf().defaultVarValue},isNothing:function(e){return e===r.getConf().nothingVarValue}}},{"../context.js":20}],38:[function(n,e,t){"use strict";function r(e,t){var n=e,r=t;return{evaluate:function(e){try{return void 0!==r.evaluate(e)}catch(e){return!1}},dependsOn:function(e,t){return i.buildDependsOnList(e,t,r)},toString:function(){return n}}}var o=n("../context.js"),i=n("./expressionsUtils.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().existsExpression},r.build=function(e){var t=n("./expressionBuilder.js").build(e);return new r(e,t)},e.exports=r},{"../context.js":20,"./expressionBuilder.js":39,"./expressionsUtils.js":41}],39:[function(h,e,t){e.exports=function(){"use strict";function e(e,t){!(l[t||e.getPrefix()||e.getId()]=e).removePrefix&&e.getPrefix()&&(r[e.getPrefix()]=e)}function o(e,t){return n.get(e,function(){return c(e)},t)}var a=h("../context.js"),i=h("./expressionTokenizer.js"),t=h("./path/pathExpression.js"),n=h("../cache/expressionCache.js"),l={},r={},s=t.getId(),u=(e(h("./existsExpression.js")),e(h("./formatExpression.js")),e(h("./stringExpression.js")),e(h("./path/pathExpression.js")),e(h("./comparison/equalsExpression.js")),e(h("./comparison/greaterExpression.js")),e(h("./comparison/lowerExpression.js")),e(h("./comparison/inExpression.js")),e(h("./arithmethic/addExpression.js")),e(h("./arithmethic/substractExpression.js")),e(h("./arithmethic/multiplyExpression.js")),e(h("./arithmethic/divideExpression.js")),e(h("./arithmethic/modExpression.js")),e(h("./bool/andExpression.js")),e(h("./bool/condExpression.js")),e(h("./bool/notExpression.js")),e(h("./bool/orExpression.js")),e(h("./i18n/trCurrencyExpression.js")),e(h("./i18n/trDateTimeExpression.js")),e(h("./i18n/trNumberExpression.js")),e(h("./i18n/trStringExpression.js")),e(h("./scripting/javascriptExpression.js")),void e(h("./scripting/queryExpression.js"))),c=function(e){var t=d(e.trim()),n=t.indexOf(a.getConf().expressionSuffix),r=void 0,o=!1,i=void 0;-1===n||(r=t.substring(0,n)+":",!l.hasOwnProperty(r))?i=p(t):o=!0,i=i||l[r];var s=void 0;return s=o&&i.removePrefix?t.substr(r.length):t,i.build(s)},p=function(e){for(var t in r)if(0==e.indexOf(t))return r[t];return l[s]},d=function(e){var t=e.trim();return""==t?t:"("==t.charAt(0)?d(t.substring(1,t.lastIndexOf(")")).trim()):t};return{register:e,unregister:function(e,t){delete l[t||e.getPrefix()||e.getId()]},registerAll:u,build:o,buildList:function(e){for(var t=[];e.hasMoreTokens();)t.push(o(e.nextToken().trim()));return t},removePrefix:function(e,t){return e.substr(t.length)},removePrefixAndBuild:function(e,t){return o(e.substr(t.length))},removeParenthesisIfAny:d,endsWith:function(e,t){return-1!==e.indexOf(t,e.length-t.length)},getArgumentsFromString:function(e){for(var t=new i(e,a.getConf().argumentsDelimiter,!0),n=[];t.hasMoreTokens();){var r=t.nextToken().trim();n.push(o(r))}return n}}}()},{"../cache/expressionCache.js":19,"../context.js":20,"./arithmethic/addExpression.js":21,"./arithmethic/divideExpression.js":23,"./arithmethic/modExpression.js":24,"./arithmethic/multiplyExpression.js":25,"./arithmethic/substractExpression.js":26,"./bool/andExpression.js":27,"./bool/condExpression.js":29,"./bool/notExpression.js":30,"./bool/orExpression.js":31,"./comparison/equalsExpression.js":33,"./comparison/greaterExpression.js":34,"./comparison/inExpression.js":35,"./comparison/lowerExpression.js":36,"./existsExpression.js":38,"./expressionTokenizer.js":40,"./formatExpression.js":42,"./i18n/trCurrencyExpression.js":43,"./i18n/trDateTimeExpression.js":44,"./i18n/trNumberExpression.js":46,"./i18n/trStringExpression.js":47,"./path/pathExpression.js":56,"./scripting/javascriptExpression.js":61,"./scripting/queryExpression.js":62,"./stringExpression.js":63}],40:[function(i,e,t){e.exports=function(e,l,u){"use strict";function t(){return o<p.length}function n(){var e;if(c.hasNext()){var t=c.next(),n=parseInt(t);return e=p.substring(o,n).trim(),o=n+1,d--,r(e)}return e=p.substring(o).trim(),o=p.length,r(e)}var c,r=i("./expressionBuilder.js").removeParenthesisIfAny,p=e.trim(),o=0,d=0,h=[];!function(){for(var e=" "==l,t=0,n=!1,r="",o=p.length,i=0;i<o;i++){var s=p.charAt(i);if(s==l){if(0==t&&!n){if(e&&(r==l||"\n"==r))continue;var a=i+1<o?p.charAt(i+1):"";u&&a==l?(p=p.substring(0,i+1)+p.substring(i+2),o--):(d++,h.push(i))}}else if("("==s||"["==s)t++;else if(")"==s||"]"==s){if(--t<0)throw"Syntax error. Unmatched right parenthesis: "+p}else"'"==s&&(n=!n);r=s}if(0<t)throw"Syntax error: unmatched left parenthesis: "+p;if(n)throw"Syntax error: runaway quotation: "+p;c=function(e){var t=0;return{next:function(){return t<e.length?e[t++]:void 0},hasNext:function(){return t<e.length}}}(h)}();return{hasMoreTokens:t,nextToken:n,countTokens:function(){return t()?d+1:0},nextTokenIfAny:function(e){return t()?n():e}}}},{"./expressionBuilder.js":39}],41:[function(e,t,n){"use strict";var a,l,r=e("./evaluateHelper.js"),o=e("../utils.js"),i=e("../parsers/depsDataItem.js");t.exports=(a=function(e,t,n){var r=[];if(!n)return r;if(!Array.isArray(n))return l(e,t,n);for(var o=n,i=0;i<o.length;i++){var s=o[i];r=r.concat(Array.isArray(s)?a(t,s):l(e,t,s))}return r},l=function(e,t,n){return!o.isFunction(n.dependsOn)||o.isFunction(n.getVarName)&&e===n.getVarName()?[]:n.dependsOn(e,t)},{buildLiteral:function(e){return r.isNumber(e)?""+e:"'"+e+"'"},buildList:function(e,t){for(var n="[",r=t?"'":"",o=0;o<e.length;o++)n+=r+e[o]+r+" ";return n+="]"},buildDependsOnList:function(){var e=[],t=arguments[0];t=t||new i;for(var n=arguments[1],r=2;r<arguments.length;r++){var o=arguments[r];e=e.concat(a(t,n,o))}return e}})},{"../parsers/depsDataItem.js":70,"../utils.js":83,"./evaluateHelper.js":37}],42:[function(l,e,t){"use strict";function a(e,t,n){var o=e,r=t,i=n,s=function(e,t){var n=c.getFormatter(t);if(a(n)||(n=e.get(t)),!a(n))try{var r=l("./expressionBuilder.js").build(t).evaluate(e);return s(e,r)}catch(e){}if(a(n))return n;throw"No valid formatter found: "+o},a=function(e){return e&&u.isFunction(e)};return{evaluate:function(e){var t=s(e,r),n=h.evaluateExpressionList(i,e);return t.apply(t,n)},dependsOn:function(e,t){return d.buildDependsOnList(e,t,r,i)},toString:function(){return o}}}var u=l("../utils.js"),c=l("../context.js"),p=l("./expressionTokenizer.js"),d=l("./expressionsUtils.js"),h=l("./evaluateHelper.js");a.removePrefix=!0,a.getId=a.getPrefix=function(){return c.getConf().formatExpression},a.build=function(e){var t=l("./expressionBuilder.js"),n=e.trim();if(0==n.length)throw"Format expression void.";var r=new p(n,c.getConf().expressionDelimiter,!1);if(1==r.countTokens())throw'Only one element in format expression: "'+n+'". Please add at least one more.';for(var o=r.nextToken().trim(),i=[];r.hasMoreTokens();){var s=t.build(r.nextToken());i.push(s)}return new a(n,o,i)},e.exports=a},{"../context.js":20,"../utils.js":83,"./evaluateHelper.js":37,"./expressionBuilder.js":39,"./expressionTokenizer.js":40,"./expressionsUtils.js":41}],43:[function(e,t,n){"use strict";function r(e,t,n,r){var o=e,i=t,s=n,a=r;return{evaluate:function(e){return l.evaluate(e,i,s,"currency",a)},dependsOn:function(e,t){return l.dependsOn(e,t,i,s)},toString:function(){return o}}}var o=e("../../context.js"),l=e("./trHelper.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().trCurrencyExpression},r.build=function(e){var t=l.build(e,r.getPrefix(),2,3,!0);return new r(e,t.expression,t.argsExpressions,t.subformat)},t.exports=r},{"../../context.js":20,"./trHelper.js":45}],44:[function(e,t,n){"use strict";function r(e,t,n){var r=e,o=t,i=n;return{evaluate:function(e){return s.evaluate(e,o,i,"datetime",null)},dependsOn:function(e,t){return s.dependsOn(e,t,o,i)},toString:function(){return r}}}var o=e("../../context.js"),s=e("./trHelper.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().trDateTimeExpression},r.build=function(e){var t=s.build(e,r.getPrefix(),1,2,!1);return new r(e,t.expression,t.argsExpressions)},t.exports=r},{"../../context.js":20,"./trHelper.js":45}],45:[function(p,e,t){"use strict";var d,l,h=p("../../context.js"),f=p("../expressionTokenizer.js"),a=p("../../i18n/i18nHelper.js"),u=p("../evaluateHelper.js"),o=p("../expressionsUtils.js"),i=p("../path/variableExpression.js");e.exports=(d=function(e){var t=p("../expressionBuilder.js"),n={};if(!e)return n;for(var r=new f(e,h.getConf().i18nOptionsDelimiter,!0);r.hasMoreTokens();){var o=r.nextToken().trim(),i=new f(o,h.getConf().inI18nOptionsDelimiter,!0);if(2!=i.countTokens())throw"2 elements are needed in i18n expression.";var s=i.nextToken().trim(),a=t.build(i.nextToken().trim());n[s]=a}return n},l=function(e,t,n,r,o){var i=e.get(h.getConf().i18nDomainVarName),s=e.get(h.getConf().i18nLanguageVarName);return a.tr(i,t,n,r,o,s)},{build:function(e,t,n,r,o){var i=p("../expressionBuilder.js");if(0==e.length)throw t+" expression void.";var s=new f(e.trim(),h.getConf().expressionDelimiter,!1),a=s.countTokens();if(a<n)throw"Too few elements in "+t+" expression (minimum is "+n+", "+a+" present): "+u;if(r<a)throw"Too many elements in "+t+" expression (maximum is "+r+", "+a+" present):"+u;var l=o?i.build(s.nextToken()):void 0,u=i.build(s.nextToken().trim()),c=s.hasMoreTokens()?s.nextToken().trim():void 0;return{expression:u,argsExpressions:d(c),subformat:l}},evaluate:function(e,t,n,r,o){var i=function(e,t){var n={};for(var r in t){var o=t[r],i=u.evaluateToNotNull(e,o);n[r]=i}return n}(e,n),s=o?u.evaluateToNotNull(e,o):void 0,a=u.evaluateToNotNull(e,t);return l(e,a,i,r,s)},dependsOn:function(e,t,n,r){return o.buildDependsOnList(e,t,new i(h.getConf().i18nDomainVarName),new i(h.getConf().i18nLanguageVarName),n,r)}})},{"../../context.js":20,"../../i18n/i18nHelper.js":66,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionTokenizer.js":40,"../expressionsUtils.js":41,"../path/variableExpression.js":60}],46:[function(e,t,n){"use strict";function r(e,t,n){var r=e,o=t,i=n;return{evaluate:function(e){return s.evaluate(e,o,i,"number",null)},dependsOn:function(e,t){return s.dependsOn(e,t,o,i)},toString:function(){return r}}}var o=e("../../context.js"),s=e("./trHelper.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().trNumberExpression},r.build=function(e){var t=s.build(e,r.getPrefix(),1,2,!1);return new r(e,t.expression,t.argsExpressions)},t.exports=r},{"../../context.js":20,"./trHelper.js":45}],47:[function(e,t,n){"use strict";function r(e,t,n){var r=e,o=t,i=n;return{evaluate:function(e){return s.evaluate(e,o,i,"string",null)},dependsOn:function(e,t){return s.dependsOn(e,t,o,i)},toString:function(){return r}}}var o=e("../../context.js"),s=e("./trHelper.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().trExpression},r.build=function(e){var t=s.build(e,r.getPrefix(),1,2,!1);return new r(e,t.expression,t.argsExpressions)},t.exports=r},{"../../context.js":20,"./trHelper.js":45}],48:[function(a,e,t){"use strict";a("../../context.js"),a("../evaluateHelper.js");function l(e,t){var r=e,o=t;return{evaluate:function(e){for(var t=r.evaluate(e),n=0;n<o.length;n++){t=t[o[n].evaluate(e)]}return t},dependsOn:function(e,t){return n.buildDependsOnList(e,t,r,o)},toString:function(){return r+"["+o+"]"}}}var n=a("../expressionsUtils.js");l.build=function(e,t){for(var n=a("../expressionBuilder.js"),r=[],o=!1;!o;){var i=t.indexOf("]");if("["!=t.charAt(0)||-1==i)throw"Bad array accessor: "+t;var s=n.build(t.substring(1,i));r.push(s),i++,t.length>i?t=t.substring(i):o=!0}return new l(e,r)},l.buildAccessor=function(e){var t=e.indexOf("]");if("["!=e.charAt(0)||-1==t)throw"Error in array expression. Bad array accessor: "+e;e.substring(1,t);return t++,e.length>t&&(token+=e.substring(0,t),e=e.substring(t)),new l(arrayBase,indexes)},l.buildArrayData=function(e){var t=l.findArrayAccessor(e);if(!(t<=0))return{arrayAccessor:e.substring(t).trim(),token:e.substring(0,t).trim()}},l.findArrayAccessor=function(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++){var i=e.charAt(o);switch(n){case 1:")"==i?0==--r&&(n=0):"("==i&&r++;break;case 2:"'"==i&&(n=0);break;case 0:if("'"==i)n=2;else if("("==i)r++,n=1;else if("["==i)return o}}return-1},e.exports=l},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionsUtils.js":41}],49:[function(s,e,t){"use strict";s("../../context.js");function a(e,t,n){var r=e,o=t,i=n;return{evaluate:function(e){var t=l.evaluateExpressionList(i,e),n=e.get(o);return n?n.apply(n,t):void 0},dependsOn:function(){return[]},toString:function(){return r}}}var l=s("../evaluateHelper.js");a.build=function(e){var t=s("../expressionBuilder.js"),n=e.indexOf("(");if(-1!=n){if(!t.endsWith(e,")"))throw"Syntax error. Bad function call: "+e;var r=e.substring(0,n).trim(),o=e.substring(n+1,e.length-1),i=t.getArgumentsFromString(o);return new a(e,r,i)}},e.exports=a},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39}],50:[function(e,t,n){"use strict";function r(e){var n=e;return{evaluate:function(e,t){return t[e.get(n)]},dependsOn:function(){return[]},toString:function(){return"?"+n}}}r.build=function(e){if("?"===e.charAt(0))return new r(e.substring(1))},t.exports=r},{}],51:[function(a,e,t){"use strict";function l(e,t){var n=e,o=t;return{evaluate:function(e){for(var t=[],n=0;n<o.length;n++){var r=o[n].evaluate(e);Array.isArray(r)?t=t.concat(r):t.push(r)}return t},dependsOn:function(e,t){return r.buildDependsOnList(e,t,o)},toString:function(){return n}}}var u=a("../../context.js"),c=a("../expressionTokenizer.js"),r=a("../expressionsUtils.js"),p=a("./rangeExpression.js");l.build=function(e){var t=a("../expressionBuilder.js");if("["===e.charAt(0)&&"]"===e.charAt(e.length-1)){for(var n=e.substring(1,e.length-1),r=[],o=new c(n,u.getConf().expressionDelimiter,!0);o.hasMoreTokens();){var i=o.nextToken().trim(),s=p.build(i);r.push(s||t.build(i))}return new l(n,r)}},e.exports=l},{"../../context.js":20,"../expressionBuilder.js":39,"../expressionTokenizer.js":40,"../expressionsUtils.js":41,"./rangeExpression.js":59}],52:[function(e,t,n){"use strict";function r(e){var t=e;return{evaluate:function(e){return t},dependsOn:function(){return[]},toString:function(){return""+t}}}r.build=function(e){return"true"===e?new r(!0):"false"===e?new r(!1):void 0},t.exports=r},{}],53:[function(e,t,n){"use strict";function r(e){var t=e;return{evaluate:function(e){return t},dependsOn:function(){return[]},toString:function(){return t}}}r.build=function(e){if(isFinite(e)){var t=parseInt(e);if(t==e)return new r(t);var n=parseFloat(e);if(n==e)return new r(n)}},t.exports=r},{}],54:[function(e,t,n){"use strict";function r(e){var t=e;return{evaluate:function(e){return t},dependsOn:function(){return[]},toString:function(){return t}}}r.build=function(e){if("'"===e.charAt(0)&&"'"===e.charAt(e.length-1))return new r(e.substring(1,e.length-1))},t.exports=r},{}],55:[function(s,e,t){"use strict";function a(e,t,n){var r=e,o=t,i=n;return{evaluate:function(e,t){var n=l.evaluateExpressionList(i,e);return t[o].apply(t,n)},dependsOn:function(){return[]},toString:function(){return r}}}var l=s("../evaluateHelper.js");a.build=function(e){var t=s("../expressionBuilder.js"),n=e.indexOf("(");if(-1!==n){if(!t.endsWith(e,")"))throw"Syntax error. Bad method call: "+e;var r=e.substring(0,n).trim(),o=e.substring(n+1,e.length-1),i=t.getArgumentsFromString(o);return new a(e,r,i)}},e.exports=a},{"../evaluateHelper.js":37,"../expressionBuilder.js":39}],56:[function(i,e,t){"use strict";function s(e,t){var n=e,o=t;return{evaluate:function(e){for(var t=void 0,n=0;n<o.length;n++)try{var r=o[n].evaluate(e);if(null!=r)return r}catch(e){t=e}if(t)throw t;return null},toString:function(){return n}}}var a=i("../../context.js"),l=i("../expressionTokenizer.js"),u=i("./literals/stringLiteral.js"),c=i("./pathSegmentExpression.js");s.removePrefix=!1,s.getPrefix=function(){return a.getConf().pathExpression},s.getId=function(){return"path"},s.build=function(e){var t=i("../expressionBuilder.js"),n=e.trim();if(0==n.length)return u.build("");var r=new l(n,a.getConf().pathDelimiter,!1);if(1==r.countTokens())return c.build(n);for(var o=[];r.hasMoreTokens();)o.push(t.build(r.nextToken()));return new s(n,o)},e.exports=s},{"../../context.js":20,"../expressionBuilder.js":39,"../expressionTokenizer.js":40,"./literals/stringLiteral.js":54,"./pathSegmentExpression.js":57}],57:[function(e,t,n){"use strict";function o(e,t){var o=e,i=t;return{evaluate:function(e){for(var t=i[0],n=t.evaluate(e),r=1;r<i.length;r++){if(null==n)throw'Error evaluating "'+o+'": "'+t+'" is null';n=(t=i[r]).evaluate(e,n)}return n},dependsOn:function(e,t){return r.buildDependsOnList(e,t,i[0])},toString:function(){return o}}}var i=e("../../context.js"),s=e("../expressionTokenizer.js"),r=e("../expressionsUtils.js"),a=(e("../evaluateHelper.js"),e("./arrayExpression.js")),l=e("./literals/stringLiteral.js"),u=e("./literals/numericLiteral.js"),c=e("./literals/booleanLiteral.js"),p=e("./listExpression.js"),d=e("./functionExpression.js"),h=e("./variableExpression.js"),f=e("./indirectionExpression.js"),g=e("./methodExpression.js"),m=e("./propertyExpression.js");o.build=function(e){var t=[];if(0==e.length)return t.push(l.build("")),t;var n=new s(e,i.getConf().pathSegmentDelimiter,!1),r=n.nextToken().trim();for(t.push(o.buildFirstPathToken(r));n.hasMoreTokens();)r=n.nextToken().trim(),t.push(o.buildNextPathToken(r));return new o(e,t)},o.buildFirstPathToken=function(e){var t=a.buildArrayData(e),n=t?t.arrayAccessor:void 0,r=t?t.token:e,o=l.build(r);if(void 0===o&&void 0===(o=u.build(r))&&void 0===(o=c.build(r))&&void 0===(o=p.build(r))&&void 0===(o=d.build(r))&&void 0===(o=h.build(r)))throw"Unknown expression: "+r;return void 0!==n&&(o=a.build(o,n)),o},o.buildNextPathToken=function(e){var t=a.buildArrayData(e),n=t?t.arrayAccessor:void 0,r=t?t.token:e,o=f.build(r);return void 0===o&&void 0===(o=g.build(r))&&(o=m.build(r)),void 0!==n&&(o=a.build(o,n)),o},t.exports=o},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionTokenizer.js":40,"../expressionsUtils.js":41,"./arrayExpression.js":48,"./functionExpression.js":49,"./indirectionExpression.js":50,"./listExpression.js":51,"./literals/booleanLiteral.js":52,"./literals/numericLiteral.js":53,"./literals/stringLiteral.js":54,"./methodExpression.js":55,"./propertyExpression.js":58,"./variableExpression.js":60}],58:[function(e,t,n){"use strict";function r(e){var n=e;return{evaluate:function(e,t){return t[n]},dependsOn:function(){return[]},toString:function(){return n}}}r.build=function(e){return new r(e)},t.exports=r},{}],59:[function(u,e,t){"use strict";function c(e,t,n,r){var o=e,a=t,l=n,u=r;return{evaluate:function(e){for(var t=h.evaluateNumber(e,a),n=h.evaluateNumber(e,l),r=h.evaluateNumber(e,u),o=[],i=0<r,s=t;i?s<=n:n<=s;)o.push(s),s+=r;return o},dependsOn:function(e,t){return i.buildDependsOnList(e,t,a,l,u)},toString:function(){return o}}}var p=u("../../context.js"),d=u("../expressionTokenizer.js"),i=u("../expressionsUtils.js"),h=u("../evaluateHelper.js"),f=u("./literals/numericLiteral.js");c.build=function(e){var t=u("../expressionBuilder.js");if(e){var n=e.trim();if(-1===n.indexOf(" ")){var r=new d(n,p.getConf().intervalDelimiter,!1),o=r.countTokens();if(2==o||3==o){var i=r.nextToken().trim(),s=""==i?f.build(0):t.build(i),a=t.build(r.nextToken()),l=3==o?t.build(r.nextToken()):f.build(1);return new c(n,s,a,l)}}}},e.exports=c},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionTokenizer.js":40,"../expressionsUtils.js":41,"./literals/numericLiteral.js":53}],60:[function(e,t,n){"use strict";function r(e){var o=e;return{evaluate:function(e){if(!e.isValidVariable(o))throw"Not declared variable found using strict mode:"+o;return e.get(o)},dependsOn:function(e,t){if(!e.mustAddVar(o))return[];var n=t.getVarExpression(o);if(!n)return e.add1NonExpressionVar(o),[o];e.add1ExpressionVar(o);var r=n.dependsOn(e,t);return e.addAllVars(r,t),r},getVarName:function(){return o},toString:function(){return o}}}var o=e("../../context.js");e("../expressionsUtils.js");r.build=function(e){return o.getConf().variableNameRE.test(e)?new r(e):void 0},t.exports=r},{"../../context.js":20,"../expressionsUtils.js":41}],61:[function(_dereq_,module,exports){"use strict";var context=_dereq_("../../context.js"),evaluateHelper=_dereq_("../evaluateHelper.js"),expressionBuilder=_dereq_("../expressionBuilder.js"),expressionsUtils=_dereq_("../expressionsUtils.js"),StringExpression=_dereq_("../stringExpression.js"),JavascriptExpression=function(expressionToApply){var stringExpression=expressionToApply,evaluate=function(scope){var evaluatedString=stringExpression.evaluate(scope);return eval(evaluatedString)},dependsOn=function(e,t){return expressionsUtils.buildDependsOnList(e,t,stringExpression)},toString=function(){return stringExpression};return{evaluate:evaluate,dependsOn:dependsOn,toString:toString}};JavascriptExpression.removePrefix=!0,JavascriptExpression.getPrefix=function(){return void 0===JavascriptExpression.prefix&&(JavascriptExpression.prefix=context.getConf().javaScriptExpression),JavascriptExpression.prefix},JavascriptExpression.getId=JavascriptExpression.getPrefix,JavascriptExpression.build=function(e){return new JavascriptExpression(StringExpression.build(e))},module.exports=JavascriptExpression},{"../../context.js":20,"../evaluateHelper.js":37,"../expressionBuilder.js":39,"../expressionsUtils.js":41,"../stringExpression.js":63}],62:[function(n,e,t){"use strict";function r(e,t){var i=e,s=t;return{evaluate:function(e){try{var t=s.evaluate(e),n=window.document.querySelectorAll(t);if(1==n.length)return n[0].innerText;for(var r=[],o=0;o<n.length;++o)r.push(n[o].innerText);return r}catch(e){return'Query expression error in "'+i+'": '+e}},dependsOn:function(e,t){return a.buildDependsOnList(e,t,s)},toString:function(){return i}}}var o=n("../../context.js"),a=n("../expressionsUtils.js");r.removePrefix=!0,r.getId=r.getPrefix=function(){return o.getConf().queryExpression},r.build=function(e){var t=n("../expressionBuilder.js").build(e);return new r(e,t)},e.exports=r},{"../../context.js":20,"../expressionBuilder.js":39,"../expressionsUtils.js":41}],63:[function(e,t,n){"use strict";function a(e,t){var n=e,r=t;return{evaluate:function(e){for(var t="",n=0;n<r.length;n++){t+=r[n].evaluate(e)}return t},dependsOn:function(e,t){return o.buildDependsOnList(e,t,r)},toString:function(){return n}}}var r=e("../context.js"),l=e("./path/literals/stringLiteral.js"),u=e("./path/pathExpression.js"),o=e("./expressionsUtils.js");a.removePrefix=!0,a.getId=a.getPrefix=function(){return r.getConf().stringExpression},a.build=function(e){for(var t=[],n="",r="",o=0,i=0;i<e.length;i++){var s=e.charAt(i);switch(o){case 0:"$"==s?o=1:n+=s;break;case 1:"$"==s?(n+="$",o=0):(o="{"==s?(r="",3):(r+=s,2),n&&(t.push(new l(n)),n=""));break;case 3:case 2:3==o&&"}"==s||2==o&&" "==s?(t.push(u.build(r)),2==o&&(n+=s),o=0):r+=s}}if(3==o)throw"Unclosed left curly brace: "+e;return 2==o&&t.push(u.build(r)),n&&t.push(new l(n)),new a(e,t)},t.exports=a},{"../context.js":20,"./expressionsUtils.js":41,"./path/literals/stringLiteral.js":54,"./path/pathExpression.js":56}],64:[function(v,e,t){e.exports=function(e,t){"use strict";function o(){return a[d].locale}function i(e){return e&&s.isFunction(e.toSource)?e.toSource():""}var n=v("messageformat"),r=v("../context.js"),s=v("../utils.js"),a=t,l=new n(e),u={},c={},p={},d=r.getConf().i18nConfResourceId,h=function(e,t){var n=u[e];return n||(n=l.compile(a[e]),u[e]=n),n(t)},f=function(e,t){var n=i(t),r=c[n];return r||(r=new Intl.NumberFormat(o(),t),c[n]=r),r.format(e)},g=function(e,t,n){return t.style="currency",t.currency=n,f(e,t)},m=function(e,t){var n=i(t),r=p[n];return r||(r=new Intl.DateTimeFormat(o(),t),p[n]=r),r.format(e)};return{getLanguage:function(){return a[d].language},getLocale:o,exists:function(e){return null!=a[e]},tr:function(e,t,n,r){switch(n){case"string":return h(e,t);case"number":return f(e,t);case"currency":return g(e,t,r);case"datetime":return m(e,t)}throw"I18n format type not supported: "+n}}}},{"../context.js":20,"../utils.js":83,messageformat:86}],65:[function(e,t,n){t.exports=function(){"use strict";for(var s={},t=void 0,e=function(e){s[e.getLanguage()]=e,t=t||e},n=0;n<arguments.length;n++)e(arguments[n]);return{add:e,exists:function(e){return t.exists(e)},tr:function(e,t,n,r,o){if(!o)throw"Language not defined! Please, use data-iLanguage to define it before trying to translate anything!";var i=s[o];if(!i)throw'Language "'+o+'" not found in I18nBundle!';return i.tr(e,t,n,r)}}}},{}],66:[function(e,t,n){"use strict";var a,d,h,l=e("../utils.js"),f=e("./i18n.js"),u=(e("./i18nBundle.js"),e("../context.js"));function g(e,t,n){a({},t,n,e,e.length-1)}t.exports=(a=function(t,n,r,o,i){var s=o[i];l.getJSON({url:s,done:function(e){t[s]=e,0<i?a(t,n,r,o,--i):n(t)},fail:function(e,t,n){u.asyncError(s,n,r)}})},d=function(e){return"i18n"+e.toUpperCase()+"Array"},h=function(e){return"i18n"+e.substr(0,e.lastIndexOf(".")).toUpperCase()},{tr:function(e,t,n,r,o,i){if(!e)return"No I18n instance defined!";var s=e.length;if(!s)return"Void I18n list!";for(var a=0;a<s;a++){var l=e[a];if("string"!==r||l.exists(t))return l.tr(t,n,r,o,i)}return'I18n resource "'+t+'" not found!'},loadAsync:g,loadAsyncAuto:function(a,l,u,e){if(l&&l.files&&Object.keys(l.files).length){var c=Object.keys(l.files).length,t=[],p=l.urlPrefix||"";for(var n in l.files){var r=l.files[n];for(var o in r){var i=r[o],s=p+i;t.push(s)}}g(t,function(e){for(var t in l.files){var n=l.files[t],r=[];for(var o in a[d(t)]=r,1==c&&(a.i18nArray=r),n){var i=n[o],s=new f(t,e[p+i]);a[h(i)]=s,r.unshift(s)}}u()},e)}else u()}})},{"../context.js":20,"../utils.js":83,"./i18n.js":64,"./i18nBundle.js":65}],67:[function(e,t,n){t.exports=function(){"use strict";var t=e("./context.js");return{trace:function(){var e=t.getLogger();e&&e.trace.apply(e,arguments)},debug:function(){var e=t.getLogger();e&&e.debug.apply(e,arguments)},info:function(){var e=t.getLogger();e&&e.info.apply(e,arguments)},warn:function(){var e=t.getLogger();e&&e.warn.apply(e,arguments)},error:function(){var e=t.getLogger();e&&e.error.apply(e,arguments)},fatal:function(){var e=t.getLogger();e&&e.fatal.apply(e,arguments)}}}()},{"./context.js":20}],68:[function(t,e,n){n.run=function(e){return t("./parsers/parser.js").run(e)},n.I18n=t("./i18n/i18n.js"),n.I18nBundle=t("./i18n/i18nBundle.js"),n.i18nHelper=t("./i18n/i18nHelper.js"),n.context=t("./context.js"),n.logHelper=t("./logHelper.js"),n.expressionBuilder=t("./expressions/expressionBuilder.js"),n.evaluateHelper=t("./expressions/evaluateHelper.js"),n.ExpressionTokenizer=t("./expressions/expressionTokenizer.js"),"function"==typeof define&&define.amd&&(define("zpt.run",n.run),define("zpt.I18n",n.I18n),define("zpt.I18nBundle",n.I18nBundle),define("zpt.i18nHelper",n.i18nHelper),define("zpt.context",n.context),define("zpt.logHelper",n.logHelper),define("zpt.expressionBuilder",n.expressionBuilder),define("zpt.evaluateHelper",n.evaluateHelper),define("zpt.ExpressionTokenizer",n.ExpressionTokenizer))},{"./context.js":20,"./expressions/evaluateHelper.js":37,"./expressions/expressionBuilder.js":39,"./expressions/expressionTokenizer.js":40,"./i18n/i18n.js":64,"./i18n/i18nBundle.js":65,"./i18n/i18nHelper.js":66,"./logHelper.js":67,"./parsers/parser.js":75}],69:[function(e,t,n){"use strict";var a=e("../context.js");e("../attributes/TAL/talDefine.js");t.exports=function(e){var r=a.getConf().defineDelimiter,o=a.getConf().inDefineDelimiter,i=a.getConf().nocallVariableExpressionPrefix,t=a.getTags().talAutoDefine,s="";e&&e.getAttribute(t)&&(s=e.getAttribute(t));return{put:function(e,t,n){""!==s&&(s+=r),s+=(n?i+o:"")+e+o+t},updateNode:function(e){if(s)return e.setAttribute(t,s),s}}}},{"../attributes/TAL/talDefine.js":11,"../context.js":20}],70:[function(e,t,n){"use strict";function r(){this.nonExpressionVars={},this.expressionVars={}}r.prototype.mustAddVar=function(e){return void 0===this.nonExpressionVars[e]&&void 0===this.expressionVars[e]},r.prototype.addAllVars=function(e,t){for(var n in e)this.add1Var(e[n],t)},r.prototype.add1ExpressionVar=function(e){this.expressionVars[e]=!0},r.prototype.add1NonExpressionVar=function(e){this.nonExpressionVars[e]=!0},r.prototype.add1Var=function(e,t){return(t.isLocalVar(e)?this.expressionVars:this.nonExpressionVars)[e]=!0},t.exports=r},{}],71:[function(e,t,n){"use strict";var c=e("./autoDefineHelper.js"),p=e("../expressions/expressionBuilder.js");t.exports=function(e,t,n){var r=e,o=t,i=p.build(o),s=i.evaluate(n),a=-1,l=s?s.length-1:-1,u=0;return{setOffset:function(e){u=e},repeat:function(){if(a++<l){var e=new c;return e.put(r+"-index",a),e.put(r+"-all",o),e.put(r,r+"-all["+r+"-index]"),e.put(r+"-repeat","context/repeat("+r+"-index,"+s.length+","+u+")"),e}return null},getItems:function(){return s},getExpression:function(){return i}}}},{"../expressions/expressionBuilder.js":39,"./autoDefineHelper.js":69}],72:[function(e,t,n){"use strict";function r(e,t,n){this.currentIndex=e,this.itemsLength=t,this.offset=n}r.prototype.index=function(){return this.offset+this.currentIndex},r.prototype.number=function(){return this.index()+1},r.prototype.even=function(){return this.index()%2==0},r.prototype.odd=function(){return this.index()%2==1},r.prototype.start=function(){return 0==this.index()},r.prototype.end=function(){return this.currentIndex==this.itemsLength-1},r.prototype.length=function(){return this.offset+this.itemsLength},r.prototype.letter=function(){return this.formatLetter(this.index(),"a")},r.prototype.Letter=function(){return this.formatLetter(this.index(),"A")},r.prototype.formatLetter=function(e,t){var n=e,r="",o=t.charCodeAt(0),i=n%26;for(r+=String.fromCharCode(o+i);25<n;)i=((n/=26)-1)%26,r+=String.fromCharCode(o+i);return r.split("").reverse().join("")},r.prototype.roman=function(){return this.formatRoman(this.index()+1,0)},r.prototype.Roman=function(){return this.formatRoman(this.index()+1,1)},r.prototype.formatRoman=function(e,t){var n=e;if(4e3<=n)return"Overflow formatting roman!";for(var r="",o=0;0!=n;o++){var i=n%10;0<i&&(i--,r+=this.romanArray[o][i][t]),n=n/10>>0}return r.split("").reverse().join("")},r.prototype.romanArray=[[["i","I"],["ii","II"],["iii","III"],["vi","VI"],["v","V"],["iv","IV"],["iiv","IIV"],["iiiv","IIIV"],["xi","XI"]],[["x","X"],["xx","XX"],["xxx","XXX"],["lx","LX"],["l","L"],["xl","XL"],["xxl","XXL"],["xxxl","XXXL"],["cx","CX"]],[["c","C"],["cc","CC"],["ccc","CCC"],["dc","DC"],["d","D"],["cd","CD"],["ccd","CCD"],["cccd","CCCD"],["mc","MC"]],[["m","M"],["mm","MM"],["mmm","MMM"]]],t.exports=r},{}],73:[function(e,t,n){"use strict";function r(e,t){var n=o.getTags();this.talDefine=e.getAttribute(n.talDefine),this.talCondition=e.getAttribute(n.talCondition),this.talRepeat=e.getAttribute(n.talRepeat),this.talContent=e.getAttribute(n.talContent),this.talAttributes=e.getAttribute(n.talAttributes),this.talOmitTag=e.getAttribute(n.talOmitTag),this.talReplace=e.getAttribute(n.talReplace),this.talOnError=e.getAttribute(n.talOnError),this.talDeclare=e.getAttribute(n.talDeclare),this.metalDefineMacro=e.getAttribute(n.metalDefineMacro),this.metalUseMacro=e.getAttribute(n.metalUseMacro),this.metalDefineSlot=e.getAttribute(n.metalDefineSlot),this.metalFillSlot=e.getAttribute(n.metalFillSlot),this.i18nDomain=e.getAttribute(n.i18nDomain),this.i18nLanguage=e.getAttribute(n.i18nLanguage),this.qdup=e.getAttribute(n.qdup),t&&this.isDynamicContentOn()&&(this.id=e.getAttribute(n.id),this.id||(this.id=o.nextExpressionCounter(),e.setAttribute(n.id,this.id)))}var o=e("../context.js");r.prototype.isDynamicContentOn=function(){return this.talDefine||this.talCondition||this.talRepeat||this.talContent||this.talAttributes||this.talOmitTag||this.talReplace||this.talOnError||this.talDeclare||this.metalUseMacro||this.metalFillSlot||this.i18nDomain||this.i18nLanguage},t.exports=r},{"../context.js":20}],74:[function(e,t,n){"use strict";var r,o,i,s,a=e("../context.js");t.exports=(r=a.getTags(),o=function(e){i(e,r.qdup),i(e,r.metalMacro)},i=function(e,t){var n=e.querySelectorAll("*["+t+"]");s(n)},s=function(e){for(var t,n=0;t=e[n++];)t.parentNode.removeChild(t)},{removeGeneratedNodes:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)o(e[t]);else o(e)},removeRelatedNodes:function(e){var t=e.parentNode.querySelectorAll("["+a.getTags().relatedId+'="'+e.getAttribute(a.getTags().id)+'"]');s(t)}})},{"../context.js":20}],75:[function(e,t,n){"use strict";var a,r,o,i,s=e("../context.js"),l=(e("../resolver.js"),e("../logHelper.js"),e("../scopes/scope.js"),e("../scopes/scopeBuilder.js"),e("../i18n/i18nHelper.js"),e("./parserRenderer.js")),u=e("./parserUpdater.js"),c=e("./parserPreloader.js");e("./nodeRemover.js"),e("../attributes/attributeIndex.js"),e("../cache/attributeCache.js");t.exports=(a={command:void 0,root:void 0,dictionary:{},indexExpressions:!0},s.getTags(),r=function(e,t,n,r,o,i){var s=new c(a,e,t,n,r,o,i);return s.run(),s},o=function(e,t,n,r,o){var i=new l(a,e,t,n,r,o);return i.run(),i},i=function(e){var t=new u(e,a);return t.run(),t},{run:function(e){var t=e||{};!function(e){a.command=e.command||"fullRender",a.root=void 0===e.root?a.root:e.root,a.dictionary=e.dictionary||a.dictionary,a.indexExpressions=void 0===e.indexExpressions?a.indexExpressions:e.indexExpressions}(t);var n=t.command||"fullRender";switch(n){case"preload":return r(t.callback,t.failCallback,t.declaredRemotePageUrls||[],t.i18n,t.notRemoveGeneratedTags,t.maxFolderDictionaries);case"fullRender":case"partialRender":return o("partialRender"==n?t.target:a.root,t.dictionaryExtension,t.notRemoveGeneratedTags,a.indexExpressions&&"fullRender"==n,void 0===t.goToURLHash&&1===s.nextRunCounter());case"update":return i(t.dictionaryChanges);default:throw"Unknown command: "+n}},getOptions:function(){return a}})},{"../attributes/attributeIndex.js":16,"../cache/attributeCache.js":17,"../context.js":20,"../i18n/i18nHelper.js":66,"../logHelper.js":67,"../resolver.js":80,"../scopes/scope.js":81,"../scopes/scopeBuilder.js":82,"./nodeRemover.js":74,"./parserPreloader.js":77,"./parserRenderer.js":78,"./parserUpdater.js":79}],76:[function(t,n,e){(function(e){"use strict";var j=t("../context.js"),L=t("../logHelper.js"),T=t("./nodeAttributes.js"),S=t("../cache/attributeCache.js"),A=t("../attributes/attributeIndex.js"),D=t("./autoDefineHelper.js"),I=t("../expressions/evaluateHelper.js"),k=t("../attributes/I18N/i18nDomain.js"),N=t("../attributes/I18N/i18nLanguage.js"),M=t("../attributes/METAL/metalDefineMacro.js"),O=t("../attributes/METAL/metalUseMacro.js"),R=t("../attributes/TAL/talAttributes.js"),F=t("../attributes/TAL/talCondition.js"),B=t("../attributes/TAL/talContent.js"),P=t("../attributes/TAL/talDefine.js"),H=t("../attributes/TAL/talOmitTag.js"),U=t("../attributes/TAL/talOnError.js"),V=t("../attributes/TAL/talRepeat.js"),_=t("../attributes/TAL/talReplace.js"),W=t("../attributes/TAL/talDeclare.js"),z=t("../attributes/TAL/contentHelper.js"),G=function(e,t,n){var r=e,u=t,c=n,p=j.getTags(),s=function(t){try{var e=new T(t,c);u.startElement(),null!=e.talRepeat?o(t,e):d(t,e),u.endElement()}catch(e){if(!i(t,e))throw e}},o=function(e,t){var n=S.getByAttributeClass(V,t.talRepeat,e,c,u).process(u,e);if(I.isDefault(n.getItems()))return d(e,t),!0;e.removeAttribute(p.talRepeat),e.removeAttribute("style"),e.setAttribute(p.qdup,1);var r=e.getAttribute("id");e.removeAttribute("id");var o=e.getAttribute(p.id);e.removeAttribute(p.id);var i,s=function(e){var t=-1,n=e;do{if(++t,!(n=n.nextElementSibling))return{nextSibling:null,counter:t}}while(n.hasAttribute(p.qdup));return{nextSibling:n,counter:t}}(e),a=s.nextSibling;for(n.setOffset(s.counter);i=n.repeat();){u.startElement();var l=e.cloneNode(!0);if("form"in l&&(l.checked=!1),c&&(l.setAttribute(p.id,j.nextExpressionCounter()),l.setAttribute(p.relatedId,o)),e.parentNode.insertBefore(l,a),!d(l,t,i))return u.endElement(),!1;u.endElement()}return e.style.display="none",e.setAttribute(p.talRepeat,t.talRepeat),""!==r&&null!=r&&e.setAttribute("id",r),""!==o&&null!=o&&e.setAttribute(p.id,o),e.removeAttribute(p.qdup),!0},i=function(e,t){try{var n={type:t.name,value:t.message,traceback:t.stack};u.set(j.getConf().templateErrorVarName,n);var r=u.get(j.getConf().onErrorVarName);return null==r?(L.fatal(t),u.endElement(),!1):(L.error(t),u.endElement(),z.updateNode(e,u.get(j.getConf().onErrorStructureVarName),r),r)}catch(e){throw L.fatal(e),u.endElement(),e}},d=function(e,t,n){if(t.metalFillSlot||!v(e,t.metalDefineMacro))return!1;var r=n||new D(e);if(!m(e,t.talDeclare,r))return!1;if(l(e,t.talOnError,r),g(e,t.i18nLanguage,r),f(e,t.i18nDomain,r),h(e,r),G.processDefine(e,t.talDefine,!1,u,c),!y(e,t.talCondition))return!1;var o=w(e,t.talOmitTag),i=b(e,t.talReplace);return o||i||(C(e,t.talAttributes),E(e,t.talContent)||a(e)),x(e,t.metalUseMacro,t.talDefine,r),!0},a=function(e){var t=e.childNodes;if(t)for(var n=0;n<t.length;n++){var r=t[n];r&&1==r.nodeType&&!r.getAttribute(p.qdup)&&s(r)}},l=function(e,t,n){if(t)return S.getByAttributeClass(U,t,e,c,u).putToAutoDefineHelper(n)},h=function(e,t){var n=t.updateNode(e);if(n)return S.getByAttributeClass(P,n,e,c,u).process(u,!1)},f=function(e,t,n){if(t)return S.getByAttributeClass(k,t,e,c,u).putToAutoDefineHelper(u,n)},g=function(e,t,n){if(t)return S.getByAttributeClass(N,t,e,c,u).putToAutoDefineHelper(n)},m=function(e,t,n){return!t||S.getByAttributeClass(W,t,e,c,u).process(u,n)},v=function(e,t){return!t||M.build(t).process(u,e)},x=function(e,t,n,r){if(t){var o=O.build(t,n,u),i=o.process(u,e,r,c);return i.setAttribute(p.qdup,1),c&&A.add(e,o,u),s(i)}},y=function(e,t){return!t||S.getByAttributeClass(F,t,e,c,u).process(u,e)},b=function(e,t){return!!t&&S.getByAttributeClass(_,t,e,c,u).process(u,e)},w=function(e,t){return null!=t&&S.getByAttributeClass(H,t,e,c,u).process(u,e)},E=function(e,t){return!!t&&S.getByAttributeClass(B,t,e,c,u).process(u,e)},C=function(e,t){if(t)return S.getByAttributeClass(R,t,e,c,u).process(u,e)};return{run:function(){s(r)}}};G.processDefine=function(e,t,n,r,o){if(t)return S.getByAttributeClass(P,t,e,o,r).process(r,n)},n.exports=G}).call(this,t("_process"))},{"../attributes/I18N/i18nDomain.js":1,"../attributes/I18N/i18nLanguage.js":2,"../attributes/METAL/metalDefineMacro.js":3,"../attributes/METAL/metalUseMacro.js":5,"../attributes/TAL/contentHelper.js":6,"../attributes/TAL/talAttributes.js":7,"../attributes/TAL/talCondition.js":8,"../attributes/TAL/talContent.js":9,"../attributes/TAL/talDeclare.js":10,"../attributes/TAL/talDefine.js":11,"../attributes/TAL/talOmitTag.js":12,"../attributes/TAL/talOnError.js":13,"../attributes/TAL/talRepeat.js":14,"../attributes/TAL/talReplace.js":15,"../attributes/attributeIndex.js":16,"../cache/attributeCache.js":17,"../context.js":20,"../expressions/evaluateHelper.js":37,"../logHelper.js":67,"./autoDefineHelper.js":69,"./nodeAttributes.js":73,_process:87}],77:[function(e,t,n){"use strict";var f=e("../context.js"),g=e("../logHelper.js"),m=e("./nodeRemover.js"),v=e("../scopes/scope.js"),x=e("../i18n/i18nHelper.js"),y=e("../resolver.js");t.exports=function(e,t,n,r,o,i,s){var a=e,l=t,u=n,c=r,p=o,d=i,h=s;return{run:function(){try{d||m.removeGeneratedNodes(a.root);var e=new v(a.dictionary,a.dictionaryExtension,!0);e.loadFolderDictionariesAsync(h,window.location,function(){f.setFolderDictionaries(e.folderDictionaries),x.loadAsyncAuto(a.dictionary,p,function(){y.loadRemotePages(e,c,l,u)},u)})}catch(e){throw g.fatal("Exiting init method of ZPT with errors: "+e),e}}}}},{"../context.js":20,"../i18n/i18nHelper.js":66,"../logHelper.js":67,"../resolver.js":80,"../scopes/scope.js":81,"./nodeRemover.js":74}],78:[function(t,n,e){(function(e){"use strict";var m=t("../context.js"),v=t("../logHelper.js"),x=t("../cache/attributeCache.js"),y=t("../attributes/attributeIndex.js"),b=t("./nodeRemover.js"),w=t("../scopes/scopeBuilder.js"),E=t("./parserNodeRenderer.js");n.exports=function(e,t,n,r,o,i){var s=e,a=t,l=n,u=r,c=o,p=i,d=function(){try{if(!a)throw"Unable to process null root or target!";u||b.removeGeneratedNodes(a),c&&(y.reset(),x.reset()),h(),p&&g()}catch(e){v.fatal("Exiting run method of ZPT with errors: "+e),m.errorFunction(e)}},h=function(){if(Array.isArray(a))for(var e=0;e<a.length;e++)f(a[e]);else f(a)},f=function(e){new E(e,w.build(s,e,l,"partialRender"==s.command),s.indexExpressions).run()},g=function(){var e=decodeURI(window.location.hash).substr(1);e&&(window.document.getElementById(e)?window.location.href="#"+e:v.warn('Unable to go to URL hash. Element with id "'+e+'" not found!'))};return{run:function(){d()}}}}).call(this,t("_process"))},{"../attributes/attributeIndex.js":16,"../cache/attributeCache.js":17,"../context.js":20,"../logHelper.js":67,"../scopes/scopeBuilder.js":82,"./nodeRemover.js":74,"./parserNodeRenderer.js":76,_process:87}],79:[function(e,t,n){"use strict";var f=e("../context.js"),g=e("../logHelper.js"),m=e("../attributes/attributeIndex.js"),v=e("../scopes/scopeBuilder.js"),x=e("./parserNodeRenderer.js"),y=e("./nodeRemover.js"),b=e("../utils.js");t.exports=function(e,t){function o(e){return window.document.querySelector("["+f.getTags().id+'="'+e+'"]')}var i,s,a=e,l=t,r={},u=function(e){var t=m.getVarsList(e);if(t)for(var n=t.length,r=0;r<n;r++)c(e,t[r])||m.remove(e,t[r].nodeId)},c=function(e,t){var n=t.attributeInstance;if(!o(t.nodeId))return++s.removedNodeUpdates,!1;var r=i[t.nodeId];return r||(r={},i[t.nodeId]=r),r[t.groupId?n.type+"/"+t.groupId:n.type]=t,!0},p=function(e){var t=e.attributeInstance,n=o(e.nodeId);if(!n)return++s.removedNodeUpdates,!1;++s.totalUpdates;var r=d(e.nodeId,n);return t.update(h,n,r,e),!0},d=function(e,t){var n=r[e];return n||(n=v.build(l,t,void 0,!0),r[e]=n),n},h={run:function(){try{if(!l.indexExpressions)throw"Unable to update, no index built! Set indexExpressions to true!";for(var e in b.extend(l.dictionary,a),i={},s={totalUpdates:0,removedNodeUpdates:0},a)u(e);for(var t in i){var n=i[t];for(var r in n)p(n[r])}}catch(e){g.fatal("Exiting run method of update command of ZPT with errors: "+e),f.errorFunction(e)}},updateNode:function(e){y.removeRelatedNodes(e),new x(e,v.build(l,e,void 0,!0),!0).run()},getStatistics:function(){return s}};return h}},{"../attributes/attributeIndex.js":16,"../context.js":20,"../logHelper.js":67,"../scopes/scopeBuilder.js":82,"../utils.js":83,"./nodeRemover.js":74,"./parserNodeRenderer.js":76}],80:[function(e,t,n){"use strict";var r,l,u,o,c,p,d,h,f=e("./utils.js"),g=e("./context.js"),m=e("./expressions/expressionBuilder.js");function v(e,t){var n=e.evaluate(t);return n?u(n,t):{macroId:null,url:null}}function x(e){return"["+h(g.getTags().metalDefineMacro)+"='"+e+"']"}t.exports=(r={},l={},u=function(e,t){var n=e.indexOf(g.getConf().macroDelimiter);return-1==n?{macroId:e,url:null}:{macroId:e.substring(0,n),url:p(e.substring(1+n))}},o=function(e,t){var n=u(e,t);if(n.url)return c(e,n);var r=t.get(g.getConf().externalMacroUrlVarName);if(r){n.url=r;var o=c(e,n);if(o)return o}var i=n.macroId,s=x(i),a=window.document.querySelector(s);if(!a)throw"Node using selector '"+s+"' is null!";return d(a.cloneNode(!0),i,e)},c=function(e,t){var n=l[t.url];if(!n)throw"Macros in URL "+t.url+" not preloaded!";var r=x(t.macroId),o=n.querySelector(r);if(o)return d(o.cloneNode(!0),t.macroId,e)},p=function(e){return e.startsWith("/")?e:g.getConf().externalMacroPrefixURL+e},d=function(e,t,n){return e.removeAttribute(g.getTags().metalDefineMacro),e.setAttribute(g.getTags().metalMacro,t),r[n]=e},{getNode:function(e,t){var n=r[e];return(n=n||o(e,t))?n.cloneNode(!0):void 0},loadRemotePages:function(e,t,n,r){var o=function(e,t){for(var n,r,o,i,s=t.slice(),a=document.querySelectorAll("["+h(g.getTags().metalUseMacro)+"]"),l=0;n=a[l++];){var u=n.getAttribute(g.getTags().metalUseMacro);try{var c=(r=u,o=e,i=m.build(r),v(i,o)).url;c&&-1==s.indexOf(c)&&s.push(c)}catch(e){}}return s}(e,t),i=o.length;if(l={},i)for(var s=0;s<o.length;s++){var a=p(o[s]);f.ajax({url:a,done:function(e){var t=document.createElement("div");t.innerHTML=e,l[this.url]=t,0==--i&&n&&f.isFunction(n)&&n()},fail:function(e,t,n){g.asyncError(a,n,r)}})}else n&&f.isFunction(n)&&n()},getMacroData:u,getMacroKey:function(e,t){var n=v(e,t);return n.url?n.macroId+g.getConf().macroDelimiter+n.url:n.macroId},filterSelector:h=function(e){return e.replace(/:/gi,"\\:")}})},{"./context.js":20,"./expressions/expressionBuilder.js":39,"./utils.js":83}],81:[function(e,t,n){"use strict";function r(e,t,n,r){this.dictionary=e||{},this.dictionaryExtension=t||{},this.vars={},this.changesStack=[],this.nocallVars={},this.folderDictionaries=r||[],this.globalVarsExpressions={},n&&this.setCommonVars(),this.setMandatoryVars()}var o=e("../context.js"),i=e("../utils.js"),a=e("loadjs");r.prototype.setMandatoryVars=function(){this.setVar(o.getConf().nothingVarName,o.getConf().nothingVarValue),this.setVar(o.getConf().defaultVarName,o.getConf().defaultVarValue)},r.prototype.setCommonVars=function(){window&&this.setVar(o.getConf().windowVarName,window),this.setVar(o.getConf().contextVarName,o)},r.prototype.startElement=function(){var e={varsToUnset:[],varsToSet:{},expressions:{},impliedDeclaredVars:[]};return this.changesStack.push(e),e},r.prototype.currentVars=function(){return this.changesStack[this.changesStack.length-1]},r.prototype.setVar=function(e,t){this.vars[e]=t},r.prototype.getWithoutEvaluating=function(e){var t;if(void 0!==(t=this.vars[e]))return t;if(void 0!==(t=this.dictionaryExtension[e]))return t;if(void 0!==(t=this.dictionary[e]))return t;for(var n=0;n<this.folderDictionaries.length;++n)if(void 0!==(t=this.folderDictionaries[n][e]))return t},r.prototype.get=function(e){var t=this.getWithoutEvaluating(e);return this.nocallVars[e]?t&&i.isFunction(t.evaluate)?t.evaluate(this):'Error evaluating property "'+e+'": '+t:t},r.prototype.unset=function(e){delete this.vars[e]},r.prototype.endElement=function(){for(var e=this.changesStack.pop(),t=e.varsToUnset,n=e.varsToSet,r=0;r<t.length;++r)this.unset(t[r]);for(var o in n){var i=n[o];this.setVar(o,i)}},r.prototype.set=function(e,t,n,r,o){var i=void 0===o?null:o;if(n)this.globalVarsExpressions[e]=i;else{var s=this.currentVars(),a=this.getWithoutEvaluating(e);null!=a?s.varsToSet[e]=a:s.varsToUnset.push(e),s.expressions[e]=i,this.isStrictMode()&&s.impliedDeclaredVars.push(e)}this.setVar(e,t),r&&(this.nocallVars[e]=!0)},r.prototype.loadFolderDictionariesAsync=function(e,t,n){if(e){var r=this.buildUrlListOfFolderDictionaries(e,t);this.loadFolderDictionary(e,n,r,0)}else n()},r.prototype.loadFolderDictionary=function(n,r,o,i){function e(e,t){t&&window.folderDictionary&&s.folderDictionaries.push(window.folderDictionary),i!=o.length?s.loadFolderDictionary(n,r,o,i):r()}var s=this,t=o[i++];a(t,{success:function(){e(0,!0)},error:function(){e(0,!1)}})},r.prototype.buildUrlListOfFolderDictionaries=function(e,t){for(var n=[],r=0,o=t.pathname,i=o.lastIndexOf("/");-1!=i&&++r<=e;){var s=o.substr(0,i);n.push(t.origin+s+"/folderDictionary.js"),i=s.lastIndexOf("/")}return n},r.prototype.isStrictMode=function(){return o.isStrictMode()||this.get(o.getConf().strictModeVarName)},r.prototype.isValidVariable=function(e){if(!this.isStrictMode())return!0;var t=this.get(o.getConf().declaredVarsVarName);if(!(!t||!t.indexOf)&&-1!==t.indexOf(e))return!0;for(var n=this.changesStack.length-1;0<=n;--n){if(-1!==this.changesStack[n].impliedDeclaredVars.indexOf(e))return!0}return!1},r.prototype.getVarExpression=function(e){var t=this.getExpressionFromLocal(e);return void 0!==t?t:this.globalVarsExpressions[e]},r.prototype.getExpressionFromLocal=function(e){for(var t=this.changesStack.length-1;0<=t;--t){var n=this.changesStack[t].expressions[e];if(void 0!==n)return n}},r.prototype.isLocalVar=function(e){return void 0!==this.vars[e]},t.exports=r},{"../context.js":20,"../utils.js":83,loadjs:84}],82:[function(e,t,n){"use strict";var i,f,g,m,o,r,v,x=e("../context.js"),s=e("./scope.js"),a=e("../utils.js"),l=e("../parsers/parserNodeRenderer.js");t.exports=(i=function(e,t,n){var r=m(e),o=v(),i=g(e,t,r).getAttribute(o),s=x.getTags().talDefine,a=x.getTags().talAutoDefine,l=t.parentNode,u=0,c=[];do{var p=l.getAttribute(s);p&&c.push(p);var d=l.getAttribute(a);d&&c.push(d);var h=l.getAttribute(o);if(h&&h===i)return f(n,c,l,e.indexExpressions);l=l.parentNode}while(9!=l.nodeType&&++u<100);throw"Error trying to update scope: root not found!"},f=function(e,t,n,r){for(var o=t.length-1;0<=o;o--){var i=t[o];l.processDefine(n,i,!0,e,r)}},g=function(e,t,n){if(!Array.isArray(e.root))return e.root;var r=v(),o=t,i=0;do{var s=o.getAttribute(r);if(s)return n[s];o=o.parentNode}while(9!=o.nodeType&&++i<100);throw"Error trying to get root: not found!"},m=function(e){var t={},n=e.root;if(Array.isArray(n))for(var r=0;r<n.length;r++)o(n[r],t);else o(n,t);return t},o=function(e,t){var n=r();(t[n]=e).setAttribute(v(),n)},r=function(){return a.generateId(6)},v=function(){return x.getTags().rootKey},{build:function(e,t,n,r){var o=new s(e.dictionary,n,!0,x.getFolderDictionaries());return r&&i(e,t,o),o}})},{"../context.js":20,"../parsers/parserNodeRenderer.js":76,"../utils.js":83,"./scope.js":81}],83:[function(e,t,n){"use strict";function r(e){if(!e)throw"Error trying to process ajax: no arguments!";if(!e.url)throw"Error trying to process ajax: no URL defined!";if(!e.done)throw"Error trying to process ajax: no done callback defined!";var t=new window.XMLHttpRequest;t.addEventListener("load",function(){200<=this.status&&this.status<400?e.done(e.parseJSON?JSON.parse(t.responseText):t.responseText):e.fail(void 0,void 0,this.statusText)}),e.fail&&t.addEventListener("error",e.fail),t.open("GET",e.url),t.send()}var o,i,s,a,l;t.exports=(o=Object.getPrototypeOf,s=(i={}.hasOwnProperty).toString,a=s.call(Object),{generateId:function(e,t){for(var n=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",o=0;o<e;o++){var i=Math.floor(Math.random()*n.length);r+=n.substring(i,i+1)}return r},isFunction:function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==toString.call(e)||(t=o(e))&&("function"!=typeof(n=i.call(t,"constructor")&&t.constructor)||s.call(n)!==a))},deepExtend:l=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&("object"==typeof n[r]?e[r]=l(e[r],n[r]):e[r]=n[r])}return e},extend:function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},getJSON:function(e){e.parseJSON=!0,r(e)},ajax:r})},{}],84:[function(e,t,n){var r,o;r=this,o=function(){var p=function(){},s={},l={},u={};function a(e,t){if(e){var n=u[e];if(l[e]=t,n)for(;n.length;)n[0](e,t),n.splice(0,1)}}function c(e,t){e.call&&(e={success:e}),t.length?(e.error||p)(t):(e.success||p)(e)}function d(n,r,o,i){var s,a,e=document,t=o.async,l=(o.numRetries||0)+1,u=o.before||p,c=n.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(n)?((a=e.createElement("link")).rel="stylesheet",a.href=c,(s="hideFocus"in a)&&a.relList&&(s=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(n)?(a=e.createElement("img")).src=c:((a=e.createElement("script")).src=n,a.async=void 0===t||t),!(a.onload=a.onerror=a.onbeforeload=function(e){var t=e.type[0];if(s)try{a.sheet.cssText.length||(t="e")}catch(e){18!=e.code&&(t="e")}if("e"==t){if((i+=1)<l)return d(n,r,o,i)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";r(n,t,e.defaultPrevented)})!==u(n,a)&&e.head.appendChild(a)}function n(e,t,n){var r,o;if(t&&t.trim&&(r=t),o=(r?n:t)||{},r){if(r in s)throw"LoadJS";s[r]=!0}function i(t,n){!function(e,r,t){var n,o,i=(e=e.push?e:[e]).length,s=i,a=[];for(n=function(e,t,n){if("e"==t&&a.push(e),"b"==t){if(!n)return;a.push(e)}--i||r(a)},o=0;o<s;o++)d(e[o],n,t)}(e,function(e){c(o,e),t&&c({success:t,error:n},e),a(r,e)},o)}if(o.returnPromise)return new Promise(i);i()}return n.ready=function(e,t){return function(e,n){e=e.push?e:[e];var t,r,o,i=[],s=e.length,a=s;for(t=function(e,t){t.length&&i.push(e),--a||n(i)};s--;)r=e[s],(o=l[r])?t(r,o):(u[r]=u[r]||[]).push(t)}(e,function(e){c(t,e)}),n},n.done=function(e){a(e,[])},n.reset=function(){s={},l={},u={}},n.isDefined=function(e){return e in s},n},"function"==typeof define&&define.amd?define([],o):"object"==typeof n?t.exports=o():r.loadjs=o()},{}],85:[function(_dereq_,module,exports){var eV,fV;eV=function(){function isUndefined(e){return void 0===e}function EventSupport(){}Array.prototype.push||(Array.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)this[this.length]=arguments[e];return this.length}),Array.prototype.shift||(Array.prototype.shift=function(){if(0<this.length){for(var e=this[0],t=0,n=this.length-1;t<n;t++)this[t]=this[t+1];return this.length=this.length-1,e}}),Array.prototype.splice||(Array.prototype.splice=function(e,t){var n=this.slice(e+t),r=this.slice(e,e+t);this.length=e;for(var o=[],i=0,s=arguments.length;i<s;i++)o[i]=arguments[i];var a=2<o.length?n=o.slice(2).concat(n):n;for(i=0,s=a.length;i<s;i++)this.push(a[i]);return r}),EventSupport.prototype={eventTypes:[],eventListeners:{},setEventTypes:function(e){if(e instanceof Array){this.eventTypes=e,this.eventListeners={};for(var t=0,n=this.eventTypes.length;t<n;t++)this.eventListeners[this.eventTypes[t]]=[]}else handleError("log4javascript.EventSupport ["+this+"]: setEventTypes: eventTypes parameter must be an Array")},addEventListener:function(e,t){"function"==typeof t?(array_contains(this.eventTypes,e)||handleError("log4javascript.EventSupport ["+this+"]: addEventListener: no event called '"+e+"'"),this.eventListeners[e].push(t)):handleError("log4javascript.EventSupport ["+this+"]: addEventListener: listener must be a function")},removeEventListener:function(e,t){"function"==typeof t?(array_contains(this.eventTypes,e)||handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: no event called '"+e+"'"),array_remove(this.eventListeners[e],t)):handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: listener must be a function")},dispatchEvent:function(e,t){if(array_contains(this.eventTypes,e))for(var n=this.eventListeners[e],r=0,o=n.length;r<o;r++)n[r](this,e,t);else handleError("log4javascript.EventSupport ["+this+"]: dispatchEvent: no event called '"+e+"'")}};var applicationStartDate=new Date,uniqueId="log4javascript_"+applicationStartDate.getTime()+"_"+Math.floor(1e8*Math.random()),emptyFunction=function(){},newLine="\r\n",pageLoaded=!1;function Log4JavaScript(){}Log4JavaScript.prototype=new EventSupport;var log4javascript=new Log4JavaScript;function toStr(e){return e&&e.toString?e.toString():String(e)}function getExceptionMessage(e){return e.message?e.message:e.description?e.description:toStr(e)}function getUrlFileName(e){var t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return e.substr(t+1)}function getExceptionStringRep(e){if(e){var t="Exception: "+getExceptionMessage(e);try{e.lineNumber&&(t+=" on line number "+e.lineNumber),e.fileName&&(t+=" in file "+getUrlFileName(e.fileName))}catch(e){logLog.warn("Unable to obtain file and line information for error")}return showStackTraces&&e.stack&&(t+=newLine+"Stack trace:"+newLine+e.stack),t}return null}function bool(e){return Boolean(e)}function trim(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function splitIntoLines(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n")}log4javascript.version="1.4.13",log4javascript.edition="log4javascript";var urlEncode=void 0!==window.encodeURIComponent?function(e){return encodeURIComponent(e)}:function(e){return escape(e).replace(/\+/g,"%2B").replace(/"/g,"%22").replace(/'/g,"%27").replace(/\//g,"%2F").replace(/=/g,"%3D")};function array_remove(e,t){for(var n=-1,r=0,o=e.length;r<o;r++)if(e[r]===t){n=r;break}return 0<=n&&(e.splice(n,1),!0)}function array_contains(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]==t)return!0;return!1}function extractBooleanFromParam(e,t){return isUndefined(e)?t:bool(e)}function extractStringFromParam(e,t){return isUndefined(e)?t:String(e)}function extractIntFromParam(t,n){if(isUndefined(t))return n;try{var e=parseInt(t,10);return isNaN(e)?n:e}catch(e){return logLog.warn("Invalid int param "+t,e),n}}function extractFunctionFromParam(e,t){return"function"==typeof e?e:t}function isError(e){return e instanceof Error}Function.prototype.apply||(Function.prototype.apply=function(obj,args){var methodName="__apply__";void 0!==obj[methodName]&&(methodName+=String(Math.random()).substr(2)),obj[methodName]=this;for(var argsStrings=[],i=0,len=args.length;i<len;i++)argsStrings[i]="args["+i+"]";var script="obj."+methodName+"("+argsStrings.join(",")+")",returnValue=eval(script);return delete obj[methodName],returnValue}),Function.prototype.call||(Function.prototype.call=function(e){for(var t=[],n=1,r=arguments.length;n<r;n++)t[n-1]=arguments[n];return this.apply(e,t)});var logLog={quietMode:!1,debugMessages:[],setQuietMode:function(e){this.quietMode=bool(e)},numberOfErrors:0,alertAllErrors:!1,setAlertAllErrors:function(e){this.alertAllErrors=e},debug:function(e){this.debugMessages.push(e)},displayDebug:function(){alert(this.debugMessages.join(newLine))},warn:function(e,t){},error:function(e,t){if((1==++this.numberOfErrors||this.alertAllErrors)&&!this.quietMode){var n="log4javascript error: "+e;t&&(n+=newLine+newLine+"Original error: "+getExceptionStringRep(t)),alert(n)}}};function handleError(e,t){logLog.error(e,t),log4javascript.dispatchEvent("error",{message:e,exception:t})}log4javascript.logLog=logLog,log4javascript.setEventTypes(["load","error"]),log4javascript.handleError=handleError;var enabled=!("undefined"!=typeof log4javascript_disabled&&log4javascript_disabled);log4javascript.setEnabled=function(e){enabled=bool(e)},log4javascript.isEnabled=function(){return enabled};var useTimeStampsInMilliseconds=!0;log4javascript.setTimeStampsInMilliseconds=function(e){useTimeStampsInMilliseconds=bool(e)},log4javascript.isTimeStampsInMilliseconds=function(){return useTimeStampsInMilliseconds},log4javascript.evalInScope=function(expr){return eval(expr)};var showStackTraces=!1;log4javascript.setShowStackTraces=function(e){showStackTraces=bool(e)};var Level=function(e,t){this.level=e,this.name=t};function Timer(e,t){this.name=e,this.level=isUndefined(t)?Level.INFO:t,this.start=new Date}Level.prototype={toString:function(){return this.name},equals:function(e){return this.level==e.level},isGreaterOrEqual:function(e){return this.level>=e.level}},Level.ALL=new Level(Number.MIN_VALUE,"ALL"),Level.TRACE=new Level(1e4,"TRACE"),Level.DEBUG=new Level(2e4,"DEBUG"),Level.INFO=new Level(3e4,"INFO"),Level.WARN=new Level(4e4,"WARN"),Level.ERROR=new Level(5e4,"ERROR"),Level.FATAL=new Level(6e4,"FATAL"),Level.OFF=new Level(Number.MAX_VALUE,"OFF"),log4javascript.Level=Level,Timer.prototype.getElapsedTime=function(){return(new Date).getTime()-this.start.getTime()};var anonymousLoggerName="[anonymous]",defaultLoggerName="[default]",nullLoggerName="[null]",rootLoggerName="root";function Logger(e){this.name=e,this.parent=null,this.children=[];var n=[],t=null,r=this.name===rootLoggerName,o=this.name===nullLoggerName,i=null,s=!1;this.addChild=function(e){this.children.push(e),e.parent=this,e.invalidateAppenderCache()};var a=!0;this.getAdditivity=function(){return a},this.setAdditivity=function(e){var t=a!=e;a=e,t&&this.invalidateAppenderCache()},this.addAppender=function(e){o?handleError("Logger.addAppender: you may not add an appender to the null logger"):e instanceof log4javascript.Appender?array_contains(n,e)||(n.push(e),e.setAddedToLogger(this),this.invalidateAppenderCache()):handleError("Logger.addAppender: appender supplied ('"+toStr(e)+"') is not a subclass of Appender")},this.removeAppender=function(e){array_remove(n,e),e.setRemovedFromLogger(this),this.invalidateAppenderCache()},this.removeAllAppenders=function(){var e=n.length;if(0<e){for(var t=0;t<e;t++)n[t].setRemovedFromLogger(this);n.length=0,this.invalidateAppenderCache()}},this.getEffectiveAppenders=function(){if(null===i||s){var e=r||!this.getAdditivity()?[]:this.parent.getEffectiveAppenders();i=e.concat(n),s=!1}return i},this.invalidateAppenderCache=function(){s=!0;for(var e=0,t=this.children.length;e<t;e++)this.children[e].invalidateAppenderCache()},this.log=function(e,t){if(enabled&&e.isGreaterOrEqual(this.getEffectiveLevel())){var n,r=t.length-1,o=t[r];1<t.length&&isError(o)&&(n=o,r--);for(var i=[],s=0;s<=r;s++)i[s]=t[s];var a=new LoggingEvent(this,new Date,e,i,n);this.callAppenders(a)}},this.callAppenders=function(e){for(var t=this.getEffectiveAppenders(),n=0,r=t.length;n<r;n++)t[n].doAppend(e)},this.setLevel=function(e){r&&null===e?handleError("Logger.setLevel: you cannot set the level of the root logger to null"):e instanceof Level?t=e:handleError("Logger.setLevel: level supplied to logger "+this.name+" is not an instance of log4javascript.Level")},this.getLevel=function(){return t},this.getEffectiveLevel=function(){for(var e=this;null!==e;e=e.parent){var t=e.getLevel();if(null!==t)return t}},this.group=function(e,t){if(enabled)for(var n=this.getEffectiveAppenders(),r=0,o=n.length;r<o;r++)n[r].group(e,t)},this.groupEnd=function(){if(enabled)for(var e=this.getEffectiveAppenders(),t=0,n=e.length;t<n;t++)e[t].groupEnd()};var l={};this.time=function(e,t){enabled&&(isUndefined(e)?handleError("Logger.time: a name for the timer must be supplied"):!t||t instanceof Level?l[e]=new Timer(e,t):handleError("Logger.time: level supplied to timer "+e+" is not an instance of log4javascript.Level"))},this.timeEnd=function(e){if(enabled)if(isUndefined(e))handleError("Logger.timeEnd: a name for the timer must be supplied");else if(l[e]){var t=l[e],n=t.getElapsedTime();this.log(t.level,["Timer "+toStr(e)+" completed in "+n+"ms"]),delete l[e]}else logLog.warn("Logger.timeEnd: no timer found with name "+e)},this.assert=function(e){if(enabled&&!e){for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);(t=0<t.length?t:["Assertion Failure"]).push(newLine),t.push(e),this.log(Level.ERROR,t)}},this.toString=function(){return"Logger["+this.name+"]"}}Logger.prototype={trace:function(){this.log(Level.TRACE,arguments)},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)},isEnabledFor:function(e){return e.isGreaterOrEqual(this.getEffectiveLevel())},isTraceEnabled:function(){return this.isEnabledFor(Level.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(Level.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(Level.INFO)},isWarnEnabled:function(){return this.isEnabledFor(Level.WARN)},isErrorEnabled:function(){return this.isEnabledFor(Level.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(Level.FATAL)}},Logger.prototype.trace.isEntryPoint=!0,Logger.prototype.debug.isEntryPoint=!0,Logger.prototype.info.isEntryPoint=!0,Logger.prototype.warn.isEntryPoint=!0,Logger.prototype.error.isEntryPoint=!0,Logger.prototype.fatal.isEntryPoint=!0;var loggers={},loggerNames=[],ROOT_LOGGER_DEFAULT_LEVEL=Level.DEBUG,rootLogger=new Logger(rootLoggerName);rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),log4javascript.getRootLogger=function(){return rootLogger},log4javascript.getLogger=function(e){if("string"!=typeof e&&(e=anonymousLoggerName,logLog.warn("log4javascript.getLogger: non-string logger name "+toStr(e)+" supplied, returning anonymous logger")),e==rootLoggerName&&handleError("log4javascript.getLogger: root logger may not be obtained by name"),!loggers[e]){var t=new Logger(e);loggers[e]=t,loggerNames.push(e);var n,r=e.lastIndexOf(".");if(-1<r){var o=e.substring(0,r);n=log4javascript.getLogger(o)}else n=rootLogger;n.addChild(t)}return loggers[e]};var defaultLogger=null;log4javascript.getDefaultLogger=function(){return defaultLogger=defaultLogger||createDefaultLogger()};var nullLogger=null;log4javascript.getNullLogger=function(){return nullLogger||(nullLogger=new Logger(nullLoggerName)).setLevel(Level.OFF),nullLogger},log4javascript.resetConfiguration=function(){rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),loggers={}};var LoggingEvent=function(e,t,n,r,o){this.logger=e,this.timeStamp=t,this.timeStampInMilliseconds=t.getTime(),this.timeStampInSeconds=Math.floor(this.timeStampInMilliseconds/1e3),this.milliseconds=this.timeStamp.getMilliseconds(),this.level=n,this.messages=r,this.exception=o};LoggingEvent.prototype={getThrowableStrRep:function(){return this.exception?getExceptionStringRep(this.exception):""},getCombinedMessages:function(){return 1==this.messages.length?this.messages[0]:this.messages.join(newLine)},toString:function(){return"LoggingEvent["+this.level+"]"}},log4javascript.LoggingEvent=LoggingEvent;var Layout=function(){};Layout.prototype={defaults:{loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url"},loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url",batchHeader:"",batchFooter:"",batchSeparator:"",returnsPostData:!1,overrideTimeStampsSetting:!1,useTimeStampsInMilliseconds:null,format:function(){handleError("Layout.format: layout supplied has no format() method")},ignoresThrowable:function(){handleError("Layout.ignoresThrowable: layout supplied has no ignoresThrowable() method")},getContentType:function(){return"text/plain"},allowBatching:function(){return!0},setTimeStampsInMilliseconds:function(e){this.overrideTimeStampsSetting=!0,this.useTimeStampsInMilliseconds=bool(e)},isTimeStampsInMilliseconds:function(){return this.overrideTimeStampsSetting?this.useTimeStampsInMilliseconds:useTimeStampsInMilliseconds},getTimeStampValue:function(e){return this.isTimeStampsInMilliseconds()?e.timeStampInMilliseconds:e.timeStampInSeconds},getDataValues:function(e,t){var n=[[this.loggerKey,e.logger.name],[this.timeStampKey,this.getTimeStampValue(e)],[this.levelKey,e.level.name],[this.urlKey,window.location.href],[this.messageKey,t?e.getCombinedMessages():e.messages]];if(this.isTimeStampsInMilliseconds()||n.push([this.millisecondsKey,e.milliseconds]),e.exception&&n.push([this.exceptionKey,getExceptionStringRep(e.exception)]),this.hasCustomFields())for(var r=0,o=this.customFields.length;r<o;r++){var i=this.customFields[r].value;"function"==typeof i&&(i=i(this,e)),n.push([this.customFields[r].name,i])}return n},setKeys:function(e,t,n,r,o,i,s){this.loggerKey=extractStringFromParam(e,this.defaults.loggerKey),this.timeStampKey=extractStringFromParam(t,this.defaults.timeStampKey),this.levelKey=extractStringFromParam(n,this.defaults.levelKey),this.messageKey=extractStringFromParam(r,this.defaults.messageKey),this.exceptionKey=extractStringFromParam(o,this.defaults.exceptionKey),this.urlKey=extractStringFromParam(i,this.defaults.urlKey),this.millisecondsKey=extractStringFromParam(s,this.defaults.millisecondsKey)},setCustomField:function(e,t){for(var n=!1,r=0,o=this.customFields.length;r<o;r++)this.customFields[r].name===e&&(this.customFields[r].value=t,n=!0);n||this.customFields.push({name:e,value:t})},hasCustomFields:function(){return 0<this.customFields.length},formatWithException:function(e){var t=this.format(e);return e.exception&&this.ignoresThrowable()&&(t+=e.getThrowableStrRep()),t},toString:function(){handleError("Layout.toString: all layouts must override this method")}},log4javascript.Layout=Layout;var Appender=function(){},SimpleDateFormat;function SimpleLayout(){this.customFields=[]}function NullLayout(){this.customFields=[]}function XmlLayout(e){this.combineMessages=extractBooleanFromParam(e,!0),this.customFields=[]}function escapeNewLines(e){return e.replace(/\r\n|\r|\n/g,"\\r\\n")}function JsonLayout(e,t){this.readable=extractBooleanFromParam(e,!1),this.combineMessages=extractBooleanFromParam(t,!0),this.batchHeader=this.readable?"["+newLine:"[",this.batchFooter=this.readable?"]"+newLine:"]",this.batchSeparator=this.readable?","+newLine:",",this.setKeys(),this.colon=this.readable?": ":":",this.tab=this.readable?"\t":"",this.lineBreak=this.readable?newLine:"",this.customFields=[]}function HttpPostDataLayout(){this.setKeys(),this.customFields=[],this.returnsPostData=!0}function formatObjectExpansion(e,t,n){var d=[];return function e(t,n,o){var r,i,s,a,l,u,c;function p(e){for(var t=splitIntoLines(e),n=1,r=t.length;n<r;n++)t[n]=o+t[n];return t.join(newLine)}if(o=o||"",null===t)return"null";if(void 0===t)return"undefined";if("string"==typeof t)return p(t);if("object"==typeof t&&array_contains(d,t)){try{u=toStr(t)}catch(e){u="Error formatting property. Details: "+getExceptionStringRep(e)}return u+" [already expanded]"}if(t instanceof Array&&0<n){for(d.push(t),u="["+newLine,s=n-1,a=o+"  ",l=[],r=0,i=t.length;r<i;r++)try{c=e(t[r],s,a),l.push(a+c)}catch(e){l.push(a+"Error formatting array member. Details: "+getExceptionStringRep(e))}return u+=l.join(","+newLine)+newLine+o+"]"}if("[object Date]"==Object.prototype.toString.call(t))return t.toString();if("object"==typeof t&&0<n){for(r in d.push(t),u="{"+newLine,s=n-1,a=o+"  ",l=[],t)try{c=e(t[r],s,a),l.push(a+r+": "+c)}catch(e){l.push(a+r+": Error formatting property. Details: "+getExceptionStringRep(e))}return u+=l.join(","+newLine)+newLine+o+"}"}return p(toStr(t))}(e,t,n)}function PatternLayout(e){this.pattern=e||PatternLayout.DEFAULT_CONVERSION_PATTERN,this.customFields=[]}function AlertAppender(){}function BrowserConsoleAppender(){}Appender.prototype=new EventSupport,Appender.prototype.layout=new PatternLayout,Appender.prototype.threshold=Level.ALL,Appender.prototype.loggers=[],Appender.prototype.doAppend=function(e){enabled&&e.level.level>=this.threshold.level&&this.append(e)},Appender.prototype.append=function(e){},Appender.prototype.setLayout=function(e){e instanceof Layout?this.layout=e:handleError("Appender.setLayout: layout supplied to "+this.toString()+" is not a subclass of Layout")},Appender.prototype.getLayout=function(){return this.layout},Appender.prototype.setThreshold=function(e){e instanceof Level?this.threshold=e:handleError("Appender.setThreshold: threshold supplied to "+this.toString()+" is not a subclass of Level")},Appender.prototype.getThreshold=function(){return this.threshold},Appender.prototype.setAddedToLogger=function(e){this.loggers.push(e)},Appender.prototype.setRemovedFromLogger=function(e){array_remove(this.loggers,e)},Appender.prototype.group=emptyFunction,Appender.prototype.groupEnd=emptyFunction,Appender.prototype.toString=function(){handleError("Appender.toString: all appenders must override this method")},log4javascript.Appender=Appender,SimpleLayout.prototype=new Layout,SimpleLayout.prototype.format=function(e){return e.level.name+" - "+e.getCombinedMessages()},SimpleLayout.prototype.ignoresThrowable=function(){return!0},SimpleLayout.prototype.toString=function(){return"SimpleLayout"},log4javascript.SimpleLayout=SimpleLayout,NullLayout.prototype=new Layout,NullLayout.prototype.format=function(e){return e.messages},NullLayout.prototype.ignoresThrowable=function(){return!0},NullLayout.prototype.formatWithException=function(e){var t=e.messages,n=e.exception;return n?t.concat([n]):t},NullLayout.prototype.toString=function(){return"NullLayout"},log4javascript.NullLayout=NullLayout,XmlLayout.prototype=new Layout,XmlLayout.prototype.isCombinedMessages=function(){return this.combineMessages},XmlLayout.prototype.getContentType=function(){return"text/xml"},XmlLayout.prototype.escapeCdata=function(e){return e.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")},XmlLayout.prototype.format=function(e){var t,n,r=this;function o(e){return e="string"==typeof e?e:toStr(e),"<log4javascript:message><![CDATA["+r.escapeCdata(e)+"]]></log4javascript:message>"}var i='<log4javascript:event logger="'+e.logger.name+'" timestamp="'+this.getTimeStampValue(e)+'"';if(this.isTimeStampsInMilliseconds()||(i+=' milliseconds="'+e.milliseconds+'"'),i+=' level="'+e.level.name+'">'+newLine,this.combineMessages)i+=o(e.getCombinedMessages());else{for(i+="<log4javascript:messages>"+newLine,t=0,n=e.messages.length;t<n;t++)i+=o(e.messages[t])+newLine;i+="</log4javascript:messages>"+newLine}if(this.hasCustomFields())for(t=0,n=this.customFields.length;t<n;t++)i+='<log4javascript:customfield name="'+this.customFields[t].name+'"><![CDATA['+this.customFields[t].value.toString()+"]]></log4javascript:customfield>"+newLine;return e.exception&&(i+="<log4javascript:exception><![CDATA["+getExceptionStringRep(e.exception)+"]]></log4javascript:exception>"+newLine),i+="</log4javascript:event>"+newLine+newLine},XmlLayout.prototype.ignoresThrowable=function(){return!1},XmlLayout.prototype.toString=function(){return"XmlLayout"},log4javascript.XmlLayout=XmlLayout,JsonLayout.prototype=new Layout,JsonLayout.prototype.isReadable=function(){return this.readable},JsonLayout.prototype.isCombinedMessages=function(){return this.combineMessages},JsonLayout.prototype.format=function(e){var t,n,l=this,r=this.getDataValues(e,this.combineMessages),o="{"+this.lineBreak;function u(e,t,n){var r,o=typeof e;if(e instanceof Date)r=String(e.getTime());else if(n&&e instanceof Array){r="["+l.lineBreak;for(var i=0,s=e.length;i<s;i++){var a=t+l.tab;r+=a+u(e[i],a,!1),i<e.length-1&&(r+=","),r+=l.lineBreak}r+=t+"]"}else r="number"!=o&&"boolean"!=o?'"'+escapeNewLines(toStr(e).replace(/\"/g,'\\"'))+'"':e;return r}for(t=0,n=r.length-1;t<=n;t++)o+=this.tab+'"'+r[t][0]+'"'+this.colon+u(r[t][1],this.tab,!0),t<n&&(o+=","),o+=this.lineBreak;return o+="}"+this.lineBreak},JsonLayout.prototype.ignoresThrowable=function(){return!1},JsonLayout.prototype.toString=function(){return"JsonLayout"},JsonLayout.prototype.getContentType=function(){return"application/json"},log4javascript.JsonLayout=JsonLayout,HttpPostDataLayout.prototype=new Layout,HttpPostDataLayout.prototype.allowBatching=function(){return!1},HttpPostDataLayout.prototype.format=function(e){for(var t=this.getDataValues(e),n=[],r=0,o=t.length;r<o;r++){var i=t[r][1]instanceof Date?String(t[r][1].getTime()):t[r][1];n.push(urlEncode(t[r][0])+"="+urlEncode(i))}return n.join("&")},HttpPostDataLayout.prototype.ignoresThrowable=function(e){return!1},HttpPostDataLayout.prototype.toString=function(){return"HttpPostDataLayout"},log4javascript.HttpPostDataLayout=HttpPostDataLayout,function(){function o(e,t,n){var r=new Date(e,t,n,0,0,0);return r.setMilliseconds(0),r}var g=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/,m=["January","February","March","April","May","June","July","August","September","October","November","December"],v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],x={G:0,y:3,M:4,w:2,W:2,D:2,d:2,F:2,E:1,a:0,H:2,k:2,K:2,h:2,m:2,s:2,S:2,Z:5};Date.prototype.getDifference=function(e){return this.getTime()-e.getTime()},Date.prototype.isBefore=function(e){return this.getTime()<e.getTime()},Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())},Date.prototype.getTimeSince=function(e){return this.getUTCTime()-e.getUTCTime()},Date.prototype.getPreviousSunday=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0),t=new Date(e.getTime()-864e5*this.getDay());return o(t.getFullYear(),t.getMonth(),t.getDate())},Date.prototype.getWeekInYear=function(e){isUndefined(this.minimalDaysInFirstWeek)&&(e=1);var t=this.getPreviousSunday(),n=o(this.getFullYear(),0,1),r=t.isBefore(n)?0:1+Math.floor(t.getTimeSince(n)/6048e5);return 7-n.getDay()<e&&r--,r},Date.prototype.getWeekInMonth=function(e){isUndefined(this.minimalDaysInFirstWeek)&&(e=1);var t=this.getPreviousSunday(),n=o(this.getFullYear(),this.getMonth(),1),r=t.isBefore(n)?0:1+Math.floor(t.getTimeSince(n)/6048e5);return e<=7-n.getDay()&&r++,r},Date.prototype.getDayInYear=function(){var e=o(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(e)/864e5)},(SimpleDateFormat=function(e){this.formatString=e}).prototype.setMinimalDaysInFirstWeek=function(e){this.minimalDaysInFirstWeek=e},SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(){return isUndefined(this.minimalDaysInFirstWeek)?1:this.minimalDaysInFirstWeek};function y(e,t){for(;e.length<t;)e="0"+e;return e}function b(e,t,n){return 4<=t?e:e.substr(0,Math.max(n,t))}function w(e,t){return y(""+e,t)}SimpleDateFormat.prototype.format=function(e){for(var t,n="",r=this.formatString;t=g.exec(r);){var o=t[1],i=t[2],s=t[3],a=t[4];if(o)n+="''"==o?"'":o.substring(1,o.length-1);else if(s);else if(a)n+=a;else if(i){var l=i.charAt(0),u=i.length,c="";switch(l){case"G":c="AD";break;case"y":c=e.getFullYear();break;case"M":c=e.getMonth();break;case"w":c=e.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":c=e.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":c=e.getDayInYear();break;case"d":c=e.getDate();break;case"F":c=1+Math.floor((e.getDate()-1)/7);break;case"E":c=v[e.getDay()];break;case"a":c=12<=e.getHours()?"PM":"AM";break;case"H":c=e.getHours();break;case"k":c=e.getHours()||24;break;case"K":c=e.getHours()%12;break;case"h":c=e.getHours()%12||12;break;case"m":c=e.getMinutes();break;case"s":c=e.getSeconds();break;case"S":c=e.getMilliseconds();break;case"Z":c=e.getTimezoneOffset()}switch(x[l]){case 0:n+=b(c,u,2);break;case 1:n+=b(c,u,3);break;case 2:n+=w(c,u);break;case 3:if(u<=3)n+=(""+c).substr(2,2);else n+=w(c,u);break;case 4:n+=3<=u?b(m[c],u,u):w(c+1,u);break;case 5:var p=0<c?"-":"+",d=Math.abs(c),h=""+Math.floor(d/60),f=""+d%60;n+=p+(h=y(h,2))+(f=y(f,2))}}r=r.substr(t.index+t[0].length)}return n}}(),log4javascript.SimpleDateFormat=SimpleDateFormat,PatternLayout.TTCC_CONVERSION_PATTERN="%r %p %c - %m%n",PatternLayout.DEFAULT_CONVERSION_PATTERN="%m%n",PatternLayout.ISO8601_DATEFORMAT="yyyy-MM-dd HH:mm:ss,SSS",PatternLayout.DATETIME_DATEFORMAT="dd MMM yyyy HH:mm:ss,SSS",PatternLayout.ABSOLUTETIME_DATEFORMAT="HH:mm:ss,SSS",PatternLayout.prototype=new Layout,PatternLayout.prototype.format=function(e){for(var t,n=/%(-?[0-9]+)?(\.?[0-9]+)?([acdfmMnpr%])(\{([^\}]+)\})?|([^%]+)/,r="",o=this.pattern;t=n.exec(o);){var i=t[0],s=t[1],a=t[2],l=t[3],u=t[5],c=t[6];if(c)r+=""+c;else{var p,d="";switch(l){case"a":case"m":var h=0;u&&(h=parseInt(u,10),isNaN(h)&&(handleError("PatternLayout.format: invalid specifier '"+u+"' for conversion character '"+l+"' - should be a number"),h=0));for(var f="a"===l?e.messages[0]:e.messages,g=0,m=f.length;g<m;g++)0<g&&" "!==d.charAt(d.length-1)&&(d+=" "),d+=0===h?f[g]:formatObjectExpansion(f[g],h);break;case"c":var v=e.logger.name;if(u){var x=parseInt(u,10),y=e.logger.name.split(".");d=x>=y.length?v:y.slice(y.length-x).join(".")}else d=v;break;case"d":var b=PatternLayout.ISO8601_DATEFORMAT;u&&("ISO8601"==(b=u)?b=PatternLayout.ISO8601_DATEFORMAT:"ABSOLUTE"==b?b=PatternLayout.ABSOLUTETIME_DATEFORMAT:"DATE"==b&&(b=PatternLayout.DATETIME_DATEFORMAT)),d=new SimpleDateFormat(b).format(e.timeStamp);break;case"f":if(this.hasCustomFields()){var w=0;u&&(w=parseInt(u,10),isNaN(w)?handleError("PatternLayout.format: invalid specifier '"+u+"' for conversion character 'f' - should be a number"):0===w?handleError("PatternLayout.format: invalid specifier '"+u+"' for conversion character 'f' - must be greater than zero"):w>this.customFields.length?handleError("PatternLayout.format: invalid specifier '"+u+"' for conversion character 'f' - there aren't that many custom fields"):w-=1);var E=this.customFields[w].value;"function"==typeof E&&(E=E(this,e)),d=E}break;case"n":d=newLine;break;case"p":d=e.level.name;break;case"r":d=""+e.timeStamp.getDifference(applicationStartDate);break;case"%":d="%";break;default:d=i}if(a){p=parseInt(a.substr(1),10);var C=d.length;p<C&&(d=d.substring(C-p,C))}if(s)if("-"==s.charAt(0))for(p=parseInt(s.substr(1),10);d.length<p;)d+=" ";else for(p=parseInt(s,10);d.length<p;)d=" "+d;r+=d}o=o.substr(t.index+t[0].length)}return r},PatternLayout.prototype.ignoresThrowable=function(){return!0},PatternLayout.prototype.toString=function(){return"PatternLayout"},log4javascript.PatternLayout=PatternLayout,AlertAppender.prototype=new Appender,AlertAppender.prototype.layout=new SimpleLayout,AlertAppender.prototype.append=function(e){alert(this.getLayout().formatWithException(e))},AlertAppender.prototype.toString=function(){return"AlertAppender"},log4javascript.AlertAppender=AlertAppender,BrowserConsoleAppender.prototype=new log4javascript.Appender,BrowserConsoleAppender.prototype.layout=new NullLayout,BrowserConsoleAppender.prototype.threshold=Level.DEBUG,BrowserConsoleAppender.prototype.append=function(n){function e(e){var t=r.getLayout().formatWithException(n);return"string"==typeof t?e?t:[t]:e?t.join(" "):t}var t,r=this,o=window.console;o&&o.log?"function"==typeof o[t=o.debug&&Level.DEBUG.isGreaterOrEqual(n.level)?"debug":o.info&&Level.INFO.equals(n.level)?"info":o.warn&&Level.WARN.equals(n.level)?"warn":o.error&&n.level.isGreaterOrEqual(Level.ERROR)?"error":"log"].apply?o[t].apply(o,e(!1)):o[t](e(!0)):"undefined"!=typeof opera&&opera.postError&&opera.postError(e(!0))},BrowserConsoleAppender.prototype.group=function(e){window.console&&window.console.group&&window.console.group(e)},BrowserConsoleAppender.prototype.groupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},BrowserConsoleAppender.prototype.toString=function(){return"BrowserConsoleAppender"},log4javascript.BrowserConsoleAppender=BrowserConsoleAppender;var xhrFactory=function(){return new XMLHttpRequest},xmlHttpFactories=[xhrFactory,function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],withCredentialsSupported=!1,getXmlHttp=function(e){for(var t,n=null,r=0,o=xmlHttpFactories.length;r<o;r++){t=xmlHttpFactories[r];try{return n=t(),withCredentialsSupported=t==xhrFactory&&"withCredentials"in n,getXmlHttp=t,n}catch(e){}}e?e():handleError("getXmlHttp: unable to obtain XMLHttpRequest object")},ConsoleAppender,_0,a1,j4,k4,l4,m4;function isHttpRequestSuccessful(e){return isUndefined(e.status)||0===e.status||200<=e.status&&e.status<300||1223==e.status}function AjaxAppender(a,l){var o=this,u=!0;a||(handleError("AjaxAppender: URL must be specified in constructor"),u=!1);var i=this.defaults.timed,s=this.defaults.waitForResponse,c=this.defaults.batchSize,t=this.defaults.timerInterval,p=this.defaults.requestSuccessCallback,d=this.defaults.failCallback,h=this.defaults.postVarName,f=this.defaults.sendAllOnUnload,g=this.defaults.contentType,n=null,m=[],v=[],x=[],y=!1,b=!1;function r(e){return!b||(handleError("AjaxAppender: configuration option '"+e+"' may not be set after the appender has been initialized"),!1)}function w(){var e;if(u&&enabled)if(y=!0,s)0<v.length?T(C(e=v.shift()),w):(y=!1,i&&j());else{for(;e=v.shift();)T(C(e));y=!1,i&&j()}}function E(){var e=!1;if(u&&enabled){for(var t,n=o.getLayout().allowBatching()?c:1,r=[];t=m.shift();)r.push(t),m.length>=n&&(v.push(r),r=[]);0<r.length&&v.push(r),e=0<v.length,i=s=!1,w()}return e}function C(e){for(var t,n=[],r="";t=e.shift();)n.push(o.getLayout().formatWithException(t));return r=1==e.length?n.join(""):o.getLayout().batchHeader+n.join(o.getLayout().batchSeparator)+o.getLayout().batchFooter,g==o.defaults.contentType&&(0<(r=o.getLayout().returnsPostData?r:urlEncode(h)+"="+urlEncode(r)).length&&(r+="&"),r+="layout="+urlEncode(o.getLayout().toString())),r}function j(){window.setTimeout(w,t)}function L(){var e="AjaxAppender: could not create XMLHttpRequest object. AjaxAppender disabled";handleError(e),u=!1,d&&d(e)}function T(e,t){try{var n=getXmlHttp(L);if(u){n.onreadystatechange=function(){if(4==n.readyState){if(isHttpRequestSuccessful(n))p&&p(n),t&&t(n);else{var e="AjaxAppender.append: XMLHttpRequest request to URL "+a+" returned status code "+n.status;handleError(e),d&&d(e)}n.onreadystatechange=emptyFunction,n=null}},n.open("POST",a,!0),l&&withCredentialsSupported&&(n.withCredentials=!0);try{for(var r,o=0;r=x[o++];)n.setRequestHeader(r.name,r.value);n.setRequestHeader("Content-Type",g)}catch(e){var i="AjaxAppender.append: your browser's XMLHttpRequest implementation does not support setRequestHeader, therefore cannot post data. AjaxAppender disabled";return handleError(i),u=!1,void(d&&d(i))}n.send(e)}}catch(e){var s="AjaxAppender.append: error sending log message to "+a;handleError(s,e),u=!1,d&&d(s+". Details: "+getExceptionStringRep(e))}}this.getSessionId=function(){return n},this.setSessionId=function(e){n=extractStringFromParam(e,null),this.layout.setCustomField("sessionid",n)},this.setLayout=function(e){r("layout")&&(this.layout=e,null!==n&&this.setSessionId(n))},this.isTimed=function(){return i},this.setTimed=function(e){r("timed")&&(i=bool(e))},this.getTimerInterval=function(){return t},this.setTimerInterval=function(e){r("timerInterval")&&(t=extractIntFromParam(e,t))},this.isWaitForResponse=function(){return s},this.setWaitForResponse=function(e){r("waitForResponse")&&(s=bool(e))},this.getBatchSize=function(){return c},this.setBatchSize=function(e){r("batchSize")&&(c=extractIntFromParam(e,c))},this.isSendAllOnUnload=function(){return f},this.setSendAllOnUnload=function(e){r("sendAllOnUnload")&&(f=extractBooleanFromParam(e,f))},this.setRequestSuccessCallback=function(e){p=extractFunctionFromParam(e,p)},this.setFailCallback=function(e){d=extractFunctionFromParam(e,d)},this.getPostVarName=function(){return h},this.setPostVarName=function(e){r("postVarName")&&(h=extractStringFromParam(e,h))},this.getHeaders=function(){return x},this.addHeader=function(e,t){"content-type"==e.toLowerCase()?g=t:x.push({name:e,value:t})},this.sendAll=w,this.sendAllRemaining=E,this.append=function(e){if(u){b||function(){if(b=!0,f){var e=window.onbeforeunload;window.onbeforeunload=function(){e&&e(),E()}}i&&j()}(),m.push(e);var t=this.getLayout().allowBatching()?c:1;if(m.length>=t){for(var n,r=[];n=m.shift();)r.push(n);v.push(r),i||s&&(!s||y)||w()}}}}function setCookie(e,t,n,r){var o;if(r=r?"; path="+r:"",n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()}else o="";document.cookie=escape(e)+"="+escape(t)+o+r}function getCookie(e){for(var t=escape(e)+"=",n=document.cookie.split(";"),r=0,o=n.length;r<o;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return unescape(i.substring(t.length,i.length))}return null}function getBaseUrl(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t)if(-1!=e[t].src.indexOf("log4javascript")){var r=e[t].src.lastIndexOf("/");return-1==r?"":e[t].src.substr(0,r+1)}return null}function isLoaded(e){try{return bool(e.loaded)}catch(e){return!1}}function b1(e,t,n,r,o){this.create(!1,null,e,t,n,r,o,this.defaults.focusPopUp)}function c1(e,t,n,r,o,i){this.create(!0,e,t,n,r,o,i,!1)}function padWithSpaces(e,t){if(e.length<t){for(var n=[],r=Math.max(0,t-e.length),o=0;o<r;o++)n[o]=" ";e+=n.join("")}return e}function i4(e){var t=0;for(var n in e)t=Math.max(toStr(n).length,t);var r=[];for(n in e){var o,i="  "+padWithSpaces(toStr(n),t+2);try{o=splitIntoLines(toStr(e[n])).join(padWithSpaces(newLine,t+6))}catch(e){o="[Error obtaining property. Details: "+getExceptionMessage(e)+"]"}r.push(i+o)}return r.join(newLine)}function n4(e,t,n,r,o){var i;function s(e){for(var t=e.style.cssText.split(";"),n="",r=0,o=t.length;r<o;r++){var i=t[r].split(":"),s=[];/^\s*$/.test(i[0])||s.push(trim(i[0]).toLowerCase()+":"+trim(i[1])),n=s.join(";")}return n}"string"!=typeof n&&(n=""),r=!!r,o=!!o;var a,l,u,c;if(!(t=void 0===t||!!t)||e.nodeType==j4.DOCUMENT_FRAGMENT_NODE){for(i="",a=0,l=e.childNodes.length;a<l;a++)i+=n4(e.childNodes[a],!0,n+m4);return i}switch(e.nodeType){case j4.ELEMENT_NODE:var p=e.tagName.toLowerCase();i=r?newLine+n:"",i+="<";var d=(c=e).prefix?c.prefix:c.outerHTML&&new RegExp("<([^:]+):"+c.tagName+"[^>]*>","i").test(c.outerHTML)?RegExp.$1.toLowerCase():"",h=!!d;for(h&&(i+=d+":"),i+=p,a=0,l=e.attributes.length;a<l;a++){var f=e.attributes[a];f.specified&&null!==f.nodeValue&&"style"!==f.nodeName.toLowerCase()&&"string"==typeof f.nodeValue&&0!==f.nodeName.indexOf("_moz")&&(i+=" "+f.nodeName.toLowerCase()+'="',i+=f.nodeValue.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),i+='"')}if(e.style.cssText)""!==s(e)&&(i+=' style="'+s(e)+'"');if(array_contains(l4,p)||h&&!e.hasChildNodes())i+="/>";else{i+=">";var g=!(1===e.childNodes.length&&e.childNodes[0].nodeType===j4.TEXT_NODE),m=array_contains(k4,p);for(a=0,l=e.childNodes.length;a<l;a++)i+=n4(e.childNodes[a],!0,n+m4,g,m);var v="</"+p+">";i+=g?newLine+n+v:v}return i;case j4.TEXT_NODE:if((u=e).nodeType==j4.TEXT_NODE&&/^[ \t\r\n]*$/.test(u.nodeValue))i="";else{if(o)i=e.nodeValue;else{var x=splitIntoLines(trim(e.nodeValue)),y=[];for(a=0,l=x.length;a<l;a++)y[a]=trim(x[a]);i=y.join(newLine+n)}r&&(i=newLine+n+i)}return i;case j4.CDATA_SECTION_NODE:return"<![CDATA["+e.nodeValue+"]]>"+newLine;case j4.DOCUMENT_NODE:for(i="",a=0,l=e.childNodes.length;a<l;a++)i+=n4(e.childNodes[a],!0,n);return i;default:return""}}function createDefaultLogger(){var e=log4javascript.getLogger(defaultLoggerName),t=new log4javascript.PopUpAppender;return e.addAppender(t),e}if(AjaxAppender.prototype=new Appender,AjaxAppender.prototype.defaults={waitForResponse:!1,timed:!1,timerInterval:1e3,batchSize:1,sendAllOnUnload:!1,requestSuccessCallback:null,failCallback:null,postVarName:"data",contentType:"application/x-www-form-urlencoded"},AjaxAppender.prototype.layout=new HttpPostDataLayout,AjaxAppender.prototype.toString=function(){return"AjaxAppender"},log4javascript.AjaxAppender=AjaxAppender,_0=[],a1=1,(ConsoleAppender=function(){}).prototype=new Appender,ConsoleAppender.prototype.create=function(e,n,t,a,l,u,c,r){var h=this,o=!1,p=!1,d=!1,f=!1,i=[],g=!0,m=a1++;a=extractBooleanFromParam(a,this.defaults.initiallyMinimized),t=extractBooleanFromParam(t,this.defaults.lazyInit),l=extractBooleanFromParam(l,this.defaults.useDocumentWrite);var s=this.defaults.newestMessageAtTop,v=this.defaults.scrollToLatestMessage;u=u||this.defaults.width,c=c||this.defaults.height;var x,y,b,w,E,C=this.defaults.maxMessages,j=this.defaults.showCommandLine,L=this.defaults.commandLineObjectExpansionDepth,T=this.defaults.showHideButton,S=this.defaults.showCloseButton;function A(e){return!p||(handleError(I+": configuration option '"+e+"' may not be set after the appender has been initialized"),!1)}function D(){return d&&g&&!f}this.setLayout(this.defaults.layout);var I=e?"InPageAppender":"PopUpAppender";this.isNewestMessageAtTop=function(){return s},this.setNewestMessageAtTop=function(e){s=bool(e),D()&&w().setNewestAtTop(s)},this.isScrollToLatestMessage=function(){return v},this.setScrollToLatestMessage=function(e){v=bool(e),D()&&w().setScrollToLatest(v)},this.getWidth=function(){return u},this.setWidth=function(e){A("width")&&(u=extractStringFromParam(e,u))},this.getHeight=function(){return c},this.setHeight=function(e){A("height")&&(c=extractStringFromParam(e,c))},this.getMaxMessages=function(){return C},this.setMaxMessages=function(e){C=extractIntFromParam(e,C),D()&&w().setMaxMessages(C)},this.isShowCommandLine=function(){return j},this.setShowCommandLine=function(e){j=bool(e),D()&&w().setShowCommandLine(j)},this.isShowHideButton=function(){return T},this.setShowHideButton=function(e){T=bool(e),D()&&w().setShowHideButton(T)},this.isShowCloseButton=function(){return S},this.setShowCloseButton=function(e){S=bool(e),D()&&w().setShowCloseButton(S)},this.getCommandLineObjectExpansionDepth=function(){return L},this.setCommandLineObjectExpansionDepth=function(e){L=extractIntFromParam(e,L)};var k=a;function N(e,t){this.loggingEvent=e,this.levelName=e.level.name,this.formattedMessage=t}function M(e,t){this.name=e,this.initiallyExpanded=t}function O(){}function R(){b(),o?f&&Z&&y():x(),b()&&F()}this.isInitiallyMinimized=function(){return a},this.setInitiallyMinimized=function(e){A("initiallyMinimized")&&(a=bool(e),k=a)},this.isUseDocumentWrite=function(){return l},this.setUseDocumentWrite=function(e){A("useDocumentWrite")&&(l=bool(e))},N.prototype.append=function(){w().log(this.levelName,this.formattedMessage)},M.prototype.append=function(){w().group(this.name,this.initiallyExpanded)},O.prototype.append=function(){w().groupEnd()},this.append=function(e){if(g){var t=h.getLayout().formatWithException(e);i.push(new N(e,t)),R()}},this.group=function(e,t){g&&(i.push(new M(e,t)),R())},this.groupEnd=function(){g&&(i.push(new O),R())};var F=function(){for(;0<i.length;)i.shift().append();r&&w().focus()};this.setAddedToLogger=function(e){this.loggers.push(e),enabled&&!t&&x()},this.clear=function(){D()&&w().clearLog(),i.length=0},this.focus=function(){D()&&w().focus()},this.focusCommandLine=function(){D()&&w().focusCommandLine()},this.focusSearch=function(){D()&&w().focusSearch()};var B=window;this.getCommandWindow=function(){return B},this.setCommandWindow=function(e){B=e},this.executeLastCommand=function(){D()&&w().evalLastCommand()};var P=new PatternLayout("%m");this.getCommandLayout=function(){return P},this.setCommandLayout=function(e){P=e},this.evalCommandAndAppend=function(e){var t={appendResult:!0,isError:!1},n="";try{var r,o;!B.eval&&B.execScript&&B.execScript("null");var i={};for(o=0,len=H.length;o<len;o++)i[H[o][0]]=H[o][1];function s(e){a.push([e,B[e]])}var a=[];function l(e){s(e),B[e]=function(){return this.commandLineFunctionsHash[e](h,arguments,t)}}for(s("appender"),B.appender=h,s("commandReturnValue"),B.commandReturnValue=t,s("commandLineFunctionsHash"),B.commandLineFunctionsHash=i,o=0,len=H.length;o<len;o++)l(H[o][0]);for(n=isUndefined(r=B===window&&B.execScript?(s("evalExpr"),s("result"),window.evalExpr=e,B.execScript("window.result=eval(window.evalExpr);"),window.result):B.eval(e))?r:formatObjectExpansion(r,L),o=0,len=a.length;o<len;o++)B[a[o][0]]=a[o][1]}catch(e){n="Error evaluating command: "+getExceptionStringRep(e),t.isError=!0}if(t.appendResult){var u=">>> "+e;isUndefined(n)||(u+=newLine+n);var c=t.isError?Level.ERROR:Level.INFO,p=new LoggingEvent(null,new Date,c,[u],null),d=this.getLayout();this.setLayout(P),this.append(p),this.setLayout(d)}};var H=_0.concat([]);this.addCommandLineFunction=function(e,t){H.push([e,t])};var U="log4javascriptCommandHistory";function V(e){var t=['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">','<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">',"<head>","<title>log4javascript</title>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',"\x3c!-- Make IE8 behave like IE7, having gone to all the trouble of making IE work --\x3e",'<meta http-equiv="X-UA-Compatible" content="IE=7" />','<script type="text/javascript">var isIe = false, isIePre7 = false;<\/script>','\x3c!--[if IE]><script type="text/javascript">isIe = true<\/script><![endif]--\x3e','\x3c!--[if lt IE 7]><script type="text/javascript">isIePre7 = true<\/script><![endif]--\x3e','<script type="text/javascript">',"//<![CDATA[","var loggingEnabled=true;var logQueuedEventsTimer=null;var logEntries=[];var logEntriesAndSeparators=[];var logItems=[];var renderDelay=100;var unrenderedLogItemsExist=false;var rootGroup,currentGroup=null;var loaded=false;var currentLogItem=null;var logMainContainer;function copyProperties(obj,props){for(var i in props){obj[i]=props[i];}}","function LogItem(){}","LogItem.prototype={mainContainer:null,wrappedContainer:null,unwrappedContainer:null,group:null,appendToLog:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].appendToLog();}","this.group.update();},doRemove:function(doUpdate,removeFromGroup){if(this.rendered){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].remove();}","this.unwrappedElementContainer=null;this.wrappedElementContainer=null;this.mainElementContainer=null;}","if(this.group&&removeFromGroup){this.group.removeChild(this,doUpdate);}","if(this===currentLogItem){currentLogItem=null;}},remove:function(doUpdate,removeFromGroup){this.doRemove(doUpdate,removeFromGroup);},render:function(){},accept:function(visitor){visitor.visit(this);},getUnwrappedDomContainer:function(){return this.group.unwrappedElementContainer.contentDiv;},getWrappedDomContainer:function(){return this.group.wrappedElementContainer.contentDiv;},getMainDomContainer:function(){return this.group.mainElementContainer.contentDiv;}};LogItem.serializedItemKeys={LOG_ENTRY:0,GROUP_START:1,GROUP_END:2};function LogItemContainerElement(){}",'LogItemContainerElement.prototype={appendToLog:function(){var insertBeforeFirst=(newestAtTop&&this.containerDomNode.hasChildNodes());if(insertBeforeFirst){this.containerDomNode.insertBefore(this.mainDiv,this.containerDomNode.firstChild);}else{this.containerDomNode.appendChild(this.mainDiv);}}};function SeparatorElementContainer(containerDomNode){this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="separator";this.mainDiv.innerHTML="&nbsp;";}',"SeparatorElementContainer.prototype=new LogItemContainerElement();SeparatorElementContainer.prototype.remove=function(){this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;};function Separator(){this.rendered=false;}","Separator.prototype=new LogItem();copyProperties(Separator.prototype,{render:function(){var containerDomNode=this.group.contentDiv;if(isIe){this.unwrappedElementContainer=new SeparatorElementContainer(this.getUnwrappedDomContainer());this.wrappedElementContainer=new SeparatorElementContainer(this.getWrappedDomContainer());this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{this.mainElementContainer=new SeparatorElementContainer(this.getMainDomContainer());this.elementContainers=[this.mainElementContainer];}",'this.content=this.formattedMessage;this.rendered=true;}});function GroupElementContainer(group,containerDomNode,isRoot,isWrapped){this.group=group;this.containerDomNode=containerDomNode;this.isRoot=isRoot;this.isWrapped=isWrapped;this.expandable=false;if(this.isRoot){if(isIe){this.contentDiv=logMainContainer.appendChild(document.createElement("div"));this.contentDiv.id=this.isWrapped?"log_wrapped":"log_unwrapped";}else{this.contentDiv=logMainContainer;}}else{var groupElementContainer=this;this.mainDiv=document.createElement("div");this.mainDiv.className="group";this.headingDiv=this.mainDiv.appendChild(document.createElement("div"));this.headingDiv.className="groupheading";this.expander=this.headingDiv.appendChild(document.createElement("span"));this.expander.className="expander unselectable greyedout";this.expander.unselectable=true;var expanderText=this.group.expanded?"-":"+";this.expanderTextNode=this.expander.appendChild(document.createTextNode(expanderText));this.headingDiv.appendChild(document.createTextNode(" "+this.group.name));this.contentDiv=this.mainDiv.appendChild(document.createElement("div"));var contentCssClass=this.group.expanded?"expanded":"collapsed";this.contentDiv.className="groupcontent "+contentCssClass;this.expander.onclick=function(){if(groupElementContainer.group.expandable){groupElementContainer.group.toggleExpanded();}};}}','GroupElementContainer.prototype=new LogItemContainerElement();copyProperties(GroupElementContainer.prototype,{toggleExpanded:function(){if(!this.isRoot){var oldCssClass,newCssClass,expanderText;if(this.group.expanded){newCssClass="expanded";oldCssClass="collapsed";expanderText="-";}else{newCssClass="collapsed";oldCssClass="expanded";expanderText="+";}',"replaceClass(this.contentDiv,newCssClass,oldCssClass);this.expanderTextNode.nodeValue=expanderText;}},remove:function(){if(!this.isRoot){this.headingDiv=null;this.expander.onclick=null;this.expander=null;this.expanderTextNode=null;this.contentDiv=null;this.containerDomNode=null;this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;}},reverseChildren:function(){var node=null;var childDomNodes=[];while((node=this.contentDiv.firstChild)){this.contentDiv.removeChild(node);childDomNodes.push(node);}",'while((node=childDomNodes.pop())){this.contentDiv.appendChild(node);}},update:function(){if(!this.isRoot){if(this.group.expandable){removeClass(this.expander,"greyedout");}else{addClass(this.expander,"greyedout");}}},clear:function(){if(this.isRoot){this.contentDiv.innerHTML="";}}});function Group(name,isRoot,initiallyExpanded){this.name=name;this.group=null;this.isRoot=isRoot;this.initiallyExpanded=initiallyExpanded;this.elementContainers=[];this.children=[];this.expanded=initiallyExpanded;this.rendered=false;this.expandable=false;}',"Group.prototype=new LogItem();copyProperties(Group.prototype,{addChild:function(logItem){this.children.push(logItem);logItem.group=this;},render:function(){if(isIe){var unwrappedDomContainer,wrappedDomContainer;if(this.isRoot){unwrappedDomContainer=logMainContainer;wrappedDomContainer=logMainContainer;}else{unwrappedDomContainer=this.getUnwrappedDomContainer();wrappedDomContainer=this.getWrappedDomContainer();}","this.unwrappedElementContainer=new GroupElementContainer(this,unwrappedDomContainer,this.isRoot,false);this.wrappedElementContainer=new GroupElementContainer(this,wrappedDomContainer,this.isRoot,true);this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{var mainDomContainer=this.isRoot?logMainContainer:this.getMainDomContainer();this.mainElementContainer=new GroupElementContainer(this,mainDomContainer,this.isRoot,false);this.elementContainers=[this.mainElementContainer];}","this.rendered=true;},toggleExpanded:function(){this.expanded=!this.expanded;for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].toggleExpanded();}},expand:function(){if(!this.expanded){this.toggleExpanded();}},accept:function(visitor){visitor.visitGroup(this);},reverseChildren:function(){if(this.rendered){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].reverseChildren();}}},update:function(){var previouslyExpandable=this.expandable;this.expandable=(this.children.length!==0);if(this.expandable!==previouslyExpandable){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].update();}}},flatten:function(){var visitor=new GroupFlattener();this.accept(visitor);return visitor.logEntriesAndSeparators;},removeChild:function(child,doUpdate){array_remove(this.children,child);child.group=null;if(doUpdate){this.update();}},remove:function(doUpdate,removeFromGroup){for(var i=0,len=this.children.length;i<len;i++){this.children[i].remove(false,false);}","this.children=[];this.update();if(this===currentGroup){currentGroup=this.group;}","this.doRemove(doUpdate,removeFromGroup);},serialize:function(items){items.push([LogItem.serializedItemKeys.GROUP_START,this.name]);for(var i=0,len=this.children.length;i<len;i++){this.children[i].serialize(items);}","if(this!==currentGroup){items.push([LogItem.serializedItemKeys.GROUP_END]);}},clear:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].clear();}}});function LogEntryElementContainer(){}",'LogEntryElementContainer.prototype=new LogItemContainerElement();copyProperties(LogEntryElementContainer.prototype,{remove:function(){this.doRemove();},doRemove:function(){this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;this.contentElement=null;this.containerDomNode=null;},setContent:function(content,wrappedContent){if(content===this.formattedMessage){this.contentElement.innerHTML="";this.contentElement.appendChild(document.createTextNode(this.formattedMessage));}else{this.contentElement.innerHTML=content;}},setSearchMatch:function(isMatch){var oldCssClass=isMatch?"searchnonmatch":"searchmatch";var newCssClass=isMatch?"searchmatch":"searchnonmatch";replaceClass(this.mainDiv,newCssClass,oldCssClass);},clearSearch:function(){removeClass(this.mainDiv,"searchmatch");removeClass(this.mainDiv,"searchnonmatch");}});function LogEntryWrappedElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.appendChild(document.createTextNode(this.logEntry.formattedMessage));this.mainDiv.className="logentry wrapped "+this.logEntry.level;this.contentElement=this.mainDiv;}','LogEntryWrappedElementContainer.prototype=new LogEntryElementContainer();LogEntryWrappedElementContainer.prototype.setContent=function(content,wrappedContent){if(content===this.formattedMessage){this.contentElement.innerHTML="";this.contentElement.appendChild(document.createTextNode(this.formattedMessage));}else{this.contentElement.innerHTML=wrappedContent;}};function LogEntryUnwrappedElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="logentry unwrapped "+this.logEntry.level;this.pre=this.mainDiv.appendChild(document.createElement("pre"));this.pre.appendChild(document.createTextNode(this.logEntry.formattedMessage));this.pre.className="unwrapped";this.contentElement=this.pre;}','LogEntryUnwrappedElementContainer.prototype=new LogEntryElementContainer();LogEntryUnwrappedElementContainer.prototype.remove=function(){this.doRemove();this.pre=null;};function LogEntryMainElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="logentry nonielogentry "+this.logEntry.level;this.contentElement=this.mainDiv.appendChild(document.createElement("span"));this.contentElement.appendChild(document.createTextNode(this.logEntry.formattedMessage));}',"LogEntryMainElementContainer.prototype=new LogEntryElementContainer();function LogEntry(level,formattedMessage){this.level=level;this.formattedMessage=formattedMessage;this.rendered=false;}",'LogEntry.prototype=new LogItem();copyProperties(LogEntry.prototype,{render:function(){var logEntry=this;var containerDomNode=this.group.contentDiv;if(isIe){this.formattedMessage=this.formattedMessage.replace(/\\r\\n/g,"\\r");this.unwrappedElementContainer=new LogEntryUnwrappedElementContainer(this,this.getUnwrappedDomContainer());this.wrappedElementContainer=new LogEntryWrappedElementContainer(this,this.getWrappedDomContainer());this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{this.mainElementContainer=new LogEntryMainElementContainer(this,this.getMainDomContainer());this.elementContainers=[this.mainElementContainer];}','this.content=this.formattedMessage;this.rendered=true;},setContent:function(content,wrappedContent){if(content!=this.content){if(isIe&&(content!==this.formattedMessage)){content=content.replace(/\\r\\n/g,"\\r");}',"for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].setContent(content,wrappedContent);}",'this.content=content;}},getSearchMatches:function(){var matches=[];var i,len;if(isIe){var unwrappedEls=getElementsByClass(this.unwrappedElementContainer.mainDiv,"searchterm","span");var wrappedEls=getElementsByClass(this.wrappedElementContainer.mainDiv,"searchterm","span");for(i=0,len=unwrappedEls.length;i<len;i++){matches[i]=new Match(this.level,null,unwrappedEls[i],wrappedEls[i]);}}else{var els=getElementsByClass(this.mainElementContainer.mainDiv,"searchterm","span");for(i=0,len=els.length;i<len;i++){matches[i]=new Match(this.level,els[i]);}}',"return matches;},setSearchMatch:function(isMatch){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].setSearchMatch(isMatch);}},clearSearch:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].clearSearch();}},accept:function(visitor){visitor.visitLogEntry(this);},serialize:function(items){items.push([LogItem.serializedItemKeys.LOG_ENTRY,this.level,this.formattedMessage]);}});function LogItemVisitor(){}","LogItemVisitor.prototype={visit:function(logItem){},visitParent:function(logItem){if(logItem.group){logItem.group.accept(this);}},visitChildren:function(logItem){for(var i=0,len=logItem.children.length;i<len;i++){logItem.children[i].accept(this);}},visitLogEntry:function(logEntry){this.visit(logEntry);},visitSeparator:function(separator){this.visit(separator);},visitGroup:function(group){this.visit(group);}};function GroupFlattener(){this.logEntriesAndSeparators=[];}",'GroupFlattener.prototype=new LogItemVisitor();GroupFlattener.prototype.visitGroup=function(group){this.visitChildren(group);};GroupFlattener.prototype.visitLogEntry=function(logEntry){this.logEntriesAndSeparators.push(logEntry);};GroupFlattener.prototype.visitSeparator=function(separator){this.logEntriesAndSeparators.push(separator);};window.onload=function(){if(location.search){var queryBits=unescape(location.search).substr(1).split("&"),nameValueBits;for(var i=0,len=queryBits.length;i<len;i++){nameValueBits=queryBits[i].split("=");if(nameValueBits[0]=="log4javascript_domain"){document.domain=nameValueBits[1];break;}}}','logMainContainer=$("log");if(isIePre7){addClass(logMainContainer,"oldIe");}','rootGroup=new Group("root",true);rootGroup.render();currentGroup=rootGroup;setCommandInputWidth();setLogContainerHeight();toggleLoggingEnabled();toggleSearchEnabled();toggleSearchFilter();toggleSearchHighlight();applyFilters();checkAllLevels();toggleWrap();toggleNewestAtTop();toggleScrollToLatest();renderQueuedLogItems();loaded=true;$("command").value="";$("command").autocomplete="off";$("command").onkeydown=function(evt){evt=getEvent(evt);if(evt.keyCode==10||evt.keyCode==13){evalCommandLine();stopPropagation(evt);}else if(evt.keyCode==27){this.value="";this.focus();}else if(evt.keyCode==38&&commandHistory.length>0){currentCommandIndex=Math.max(0,currentCommandIndex-1);this.value=commandHistory[currentCommandIndex];moveCaretToEnd(this);}else if(evt.keyCode==40&&commandHistory.length>0){currentCommandIndex=Math.min(commandHistory.length-1,currentCommandIndex+1);this.value=commandHistory[currentCommandIndex];moveCaretToEnd(this);}};$("command").onkeypress=function(evt){evt=getEvent(evt);if(evt.keyCode==38&&commandHistory.length>0&&evt.preventDefault){evt.preventDefault();}};$("command").onkeyup=function(evt){evt=getEvent(evt);if(evt.keyCode==27&&evt.preventDefault){evt.preventDefault();this.focus();}};document.onkeydown=function keyEventHandler(evt){evt=getEvent(evt);switch(evt.keyCode){case 69:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){evalLastCommand();cancelKeyEvent(evt);return false;}',"break;case 75:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){focusSearch();cancelKeyEvent(evt);return false;}","break;case 40:case 76:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){focusCommandLine();cancelKeyEvent(evt);return false;}","break;}};setTimeout(setLogContainerHeight,20);setShowCommandLine(showCommandLine);doSearch();};window.onunload=function(){if(mainWindowExists()){appender.unload();}",'appender=null;};function toggleLoggingEnabled(){setLoggingEnabled($("enableLogging").checked);}',"function setLoggingEnabled(enable){loggingEnabled=enable;}","var appender=null;function setAppender(appenderParam){appender=appenderParam;}",'function setShowCloseButton(showCloseButton){$("closeButton").style.display=showCloseButton?"inline":"none";}','function setShowHideButton(showHideButton){$("hideButton").style.display=showHideButton?"inline":"none";}',"var newestAtTop=false;function LogItemContentReverser(){}","LogItemContentReverser.prototype=new LogItemVisitor();LogItemContentReverser.prototype.visitGroup=function(group){group.reverseChildren();this.visitChildren(group);};function setNewestAtTop(isNewestAtTop){var oldNewestAtTop=newestAtTop;var i,iLen,j,jLen;newestAtTop=Boolean(isNewestAtTop);if(oldNewestAtTop!=newestAtTop){var visitor=new LogItemContentReverser();rootGroup.accept(visitor);if(currentSearch){var currentMatch=currentSearch.matches[currentMatchIndex];var matchIndex=0;var matches=[];var actOnLogEntry=function(logEntry){var logEntryMatches=logEntry.getSearchMatches();for(j=0,jLen=logEntryMatches.length;j<jLen;j++){matches[matchIndex]=logEntryMatches[j];if(currentMatch&&logEntryMatches[j].equals(currentMatch)){currentMatchIndex=matchIndex;}","matchIndex++;}};if(newestAtTop){for(i=logEntries.length-1;i>=0;i--){actOnLogEntry(logEntries[i]);}}else{for(i=0,iLen=logEntries.length;i<iLen;i++){actOnLogEntry(logEntries[i]);}}","currentSearch.matches=matches;if(currentMatch){currentMatch.setCurrent();}}else if(scrollToLatest){doScrollToLatest();}}",'$("newestAtTop").checked=isNewestAtTop;}','function toggleNewestAtTop(){var isNewestAtTop=$("newestAtTop").checked;setNewestAtTop(isNewestAtTop);}',"var scrollToLatest=true;function setScrollToLatest(isScrollToLatest){scrollToLatest=isScrollToLatest;if(scrollToLatest){doScrollToLatest();}",'$("scrollToLatest").checked=isScrollToLatest;}','function toggleScrollToLatest(){var isScrollToLatest=$("scrollToLatest").checked;setScrollToLatest(isScrollToLatest);}','function doScrollToLatest(){var l=logMainContainer;if(typeof l.scrollTop!="undefined"){if(newestAtTop){l.scrollTop=0;}else{var latestLogEntry=l.lastChild;if(latestLogEntry){l.scrollTop=l.scrollHeight;}}}}',"var closeIfOpenerCloses=true;function setCloseIfOpenerCloses(isCloseIfOpenerCloses){closeIfOpenerCloses=isCloseIfOpenerCloses;}","var maxMessages=null;function setMaxMessages(max){maxMessages=max;pruneLogEntries();}",'var showCommandLine=false;function setShowCommandLine(isShowCommandLine){showCommandLine=isShowCommandLine;if(loaded){$("commandLine").style.display=showCommandLine?"block":"none";setCommandInputWidth();setLogContainerHeight();}}','function focusCommandLine(){if(loaded){$("command").focus();}}','function focusSearch(){if(loaded){$("searchBox").focus();}}',"function getLogItems(){var items=[];for(var i=0,len=logItems.length;i<len;i++){logItems[i].serialize(items);}","return items;}","function setLogItems(items){var loggingReallyEnabled=loggingEnabled;loggingEnabled=true;for(var i=0,len=items.length;i<len;i++){switch(items[i][0]){case LogItem.serializedItemKeys.LOG_ENTRY:log(items[i][1],items[i][2]);break;case LogItem.serializedItemKeys.GROUP_START:group(items[i][1]);break;case LogItem.serializedItemKeys.GROUP_END:groupEnd();break;}}","loggingEnabled=loggingReallyEnabled;}","function log(logLevel,formattedMessage){if(loggingEnabled){var logEntry=new LogEntry(logLevel,formattedMessage);logEntries.push(logEntry);logEntriesAndSeparators.push(logEntry);logItems.push(logEntry);currentGroup.addChild(logEntry);if(loaded){if(logQueuedEventsTimer!==null){clearTimeout(logQueuedEventsTimer);}","logQueuedEventsTimer=setTimeout(renderQueuedLogItems,renderDelay);unrenderedLogItemsExist=true;}}}","function renderQueuedLogItems(){logQueuedEventsTimer=null;var pruned=pruneLogEntries();var initiallyHasMatches=currentSearch?currentSearch.hasMatches():false;for(var i=0,len=logItems.length;i<len;i++){if(!logItems[i].rendered){logItems[i].render();logItems[i].appendToLog();if(currentSearch&&(logItems[i]instanceof LogEntry)){currentSearch.applyTo(logItems[i]);}}}","if(currentSearch){if(pruned){if(currentSearch.hasVisibleMatches()){if(currentMatchIndex===null){setCurrentMatchIndex(0);}","displayMatches();}else{displayNoMatches();}}else if(!initiallyHasMatches&&currentSearch.hasVisibleMatches()){setCurrentMatchIndex(0);displayMatches();}}","if(scrollToLatest){doScrollToLatest();}","unrenderedLogItemsExist=false;}","function pruneLogEntries(){if((maxMessages!==null)&&(logEntriesAndSeparators.length>maxMessages)){var numberToDelete=logEntriesAndSeparators.length-maxMessages;var prunedLogEntries=logEntriesAndSeparators.slice(0,numberToDelete);if(currentSearch){currentSearch.removeMatches(prunedLogEntries);}","var group;for(var i=0;i<numberToDelete;i++){group=logEntriesAndSeparators[i].group;array_remove(logItems,logEntriesAndSeparators[i]);array_remove(logEntries,logEntriesAndSeparators[i]);logEntriesAndSeparators[i].remove(true,true);if(group.children.length===0&&group!==currentGroup&&group!==rootGroup){array_remove(logItems,group);group.remove(true,true);}}","logEntriesAndSeparators=array_removeFromStart(logEntriesAndSeparators,numberToDelete);return true;}","return false;}",'function group(name,startExpanded){if(loggingEnabled){initiallyExpanded=(typeof startExpanded==="undefined")?true:Boolean(startExpanded);var newGroup=new Group(name,false,initiallyExpanded);currentGroup.addChild(newGroup);currentGroup=newGroup;logItems.push(newGroup);if(loaded){if(logQueuedEventsTimer!==null){clearTimeout(logQueuedEventsTimer);}',"logQueuedEventsTimer=setTimeout(renderQueuedLogItems,renderDelay);unrenderedLogItemsExist=true;}}}","function groupEnd(){currentGroup=(currentGroup===rootGroup)?rootGroup:currentGroup.group;}","function mainPageReloaded(){currentGroup=rootGroup;var separator=new Separator();logEntriesAndSeparators.push(separator);logItems.push(separator);currentGroup.addChild(separator);}","function closeWindow(){if(appender&&mainWindowExists()){appender.close(true);}else{window.close();}}","function hide(){if(appender&&mainWindowExists()){appender.hide();}}",'var mainWindow=window;var windowId="log4javascriptConsoleWindow_"+new Date().getTime()+"_"+(""+Math.random()).substr(2);function setMainWindow(win){mainWindow=win;mainWindow[windowId]=window;if(opener&&closeIfOpenerCloses){pollOpener();}}',"function pollOpener(){if(closeIfOpenerCloses){if(mainWindowExists()){setTimeout(pollOpener,500);}else{closeWindow();}}}","function mainWindowExists(){try{return(mainWindow&&!mainWindow.closed&&mainWindow[windowId]==window);}catch(ex){}","return false;}",'var logLevels=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"];function getCheckBox(logLevel){return $("switch_"+logLevel);}','function getIeWrappedLogContainer(){return $("log_wrapped");}','function getIeUnwrappedLogContainer(){return $("log_unwrapped");}',"function applyFilters(){for(var i=0;i<logLevels.length;i++){if(getCheckBox(logLevels[i]).checked){addClass(logMainContainer,logLevels[i]);}else{removeClass(logMainContainer,logLevels[i]);}}","updateSearchFromFilters();}",'function toggleAllLevels(){var turnOn=$("switch_ALL").checked;for(var i=0;i<logLevels.length;i++){getCheckBox(logLevels[i]).checked=turnOn;if(turnOn){addClass(logMainContainer,logLevels[i]);}else{removeClass(logMainContainer,logLevels[i]);}}}','function checkAllLevels(){for(var i=0;i<logLevels.length;i++){if(!getCheckBox(logLevels[i]).checked){getCheckBox("ALL").checked=false;return;}}','getCheckBox("ALL").checked=true;}',"function clearLog(){rootGroup.clear();currentGroup=rootGroup;logEntries=[];logItems=[];logEntriesAndSeparators=[];doSearch();}",'function toggleWrap(){var enable=$("wrap").checked;if(enable){addClass(logMainContainer,"wrap");}else{removeClass(logMainContainer,"wrap");}',"refreshCurrentMatch();}","var searchTimer=null;function scheduleSearch(){try{clearTimeout(searchTimer);}catch(ex){}","searchTimer=setTimeout(doSearch,500);}","function Search(searchTerm,isRegex,searchRegex,isCaseSensitive){this.searchTerm=searchTerm;this.isRegex=isRegex;this.searchRegex=searchRegex;this.isCaseSensitive=isCaseSensitive;this.matches=[];}","Search.prototype={hasMatches:function(){return this.matches.length>0;},hasVisibleMatches:function(){if(this.hasMatches()){for(var i=0;i<this.matches.length;i++){if(this.matches[i].isVisible()){return true;}}}","return false;},match:function(logEntry){var entryText=String(logEntry.formattedMessage);var matchesSearch=false;if(this.isRegex){matchesSearch=this.searchRegex.test(entryText);}else if(this.isCaseSensitive){matchesSearch=(entryText.indexOf(this.searchTerm)>-1);}else{matchesSearch=(entryText.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1);}","return matchesSearch;},getNextVisibleMatchIndex:function(){for(var i=currentMatchIndex+1;i<this.matches.length;i++){if(this.matches[i].isVisible()){return i;}}","for(i=0;i<=currentMatchIndex;i++){if(this.matches[i].isVisible()){return i;}}","return-1;},getPreviousVisibleMatchIndex:function(){for(var i=currentMatchIndex-1;i>=0;i--){if(this.matches[i].isVisible()){return i;}}","for(var i=this.matches.length-1;i>=currentMatchIndex;i--){if(this.matches[i].isVisible()){return i;}}",'return-1;},applyTo:function(logEntry){var doesMatch=this.match(logEntry);if(doesMatch){logEntry.group.expand();logEntry.setSearchMatch(true);var logEntryContent;var wrappedLogEntryContent;var searchTermReplacementStartTag="<span class=\\"searchterm\\">";var searchTermReplacementEndTag="<"+"/span>";var preTagName=isIe?"pre":"span";var preStartTag="<"+preTagName+" class=\\"pre\\">";var preEndTag="<"+"/"+preTagName+">";var startIndex=0;var searchIndex,matchedText,textBeforeMatch;if(this.isRegex){var flags=this.isCaseSensitive?"g":"gi";var capturingRegex=new RegExp("("+this.searchRegex.source+")",flags);var rnd=(""+Math.random()).substr(2);var startToken="%%s"+rnd+"%%";var endToken="%%e"+rnd+"%%";logEntryContent=logEntry.formattedMessage.replace(capturingRegex,startToken+"$1"+endToken);logEntryContent=escapeHtml(logEntryContent);var result;var searchString=logEntryContent;logEntryContent="";wrappedLogEntryContent="";while((searchIndex=searchString.indexOf(startToken,startIndex))>-1){var endTokenIndex=searchString.indexOf(endToken,searchIndex);matchedText=searchString.substring(searchIndex+startToken.length,endTokenIndex);textBeforeMatch=searchString.substring(startIndex,searchIndex);logEntryContent+=preStartTag+textBeforeMatch+preEndTag;logEntryContent+=searchTermReplacementStartTag+preStartTag+matchedText+',"preEndTag+searchTermReplacementEndTag;if(isIe){wrappedLogEntryContent+=textBeforeMatch+searchTermReplacementStartTag+","matchedText+searchTermReplacementEndTag;}","startIndex=endTokenIndex+endToken.length;}",'logEntryContent+=preStartTag+searchString.substr(startIndex)+preEndTag;if(isIe){wrappedLogEntryContent+=searchString.substr(startIndex);}}else{logEntryContent="";wrappedLogEntryContent="";var searchTermReplacementLength=searchTermReplacementStartTag.length+',"this.searchTerm.length+searchTermReplacementEndTag.length;var searchTermLength=this.searchTerm.length;var searchTermLowerCase=this.searchTerm.toLowerCase();var logTextLowerCase=logEntry.formattedMessage.toLowerCase();while((searchIndex=logTextLowerCase.indexOf(searchTermLowerCase,startIndex))>-1){matchedText=escapeHtml(logEntry.formattedMessage.substr(searchIndex,this.searchTerm.length));textBeforeMatch=escapeHtml(logEntry.formattedMessage.substring(startIndex,searchIndex));var searchTermReplacement=searchTermReplacementStartTag+","preStartTag+matchedText+preEndTag+searchTermReplacementEndTag;logEntryContent+=preStartTag+textBeforeMatch+preEndTag+searchTermReplacement;if(isIe){wrappedLogEntryContent+=textBeforeMatch+searchTermReplacementStartTag+","matchedText+searchTermReplacementEndTag;}","startIndex=searchIndex+searchTermLength;}","var textAfterLastMatch=escapeHtml(logEntry.formattedMessage.substr(startIndex));logEntryContent+=preStartTag+textAfterLastMatch+preEndTag;if(isIe){wrappedLogEntryContent+=textAfterLastMatch;}}","logEntry.setContent(logEntryContent,wrappedLogEntryContent);var logEntryMatches=logEntry.getSearchMatches();this.matches=this.matches.concat(logEntryMatches);}else{logEntry.setSearchMatch(false);logEntry.setContent(logEntry.formattedMessage,logEntry.formattedMessage);}","return doesMatch;},removeMatches:function(logEntries){var matchesToRemoveCount=0;var currentMatchRemoved=false;var matchesToRemove=[];var i,iLen,j,jLen;for(i=0,iLen=this.matches.length;i<iLen;i++){for(j=0,jLen=logEntries.length;j<jLen;j++){if(this.matches[i].belongsTo(logEntries[j])){matchesToRemove.push(this.matches[i]);if(i===currentMatchIndex){currentMatchRemoved=true;}}}}","var newMatch=currentMatchRemoved?null:this.matches[currentMatchIndex];if(currentMatchRemoved){for(i=currentMatchIndex,iLen=this.matches.length;i<iLen;i++){if(this.matches[i].isVisible()&&!array_contains(matchesToRemove,this.matches[i])){newMatch=this.matches[i];break;}}}","for(i=0,iLen=matchesToRemove.length;i<iLen;i++){array_remove(this.matches,matchesToRemove[i]);matchesToRemove[i].remove();}","if(this.hasVisibleMatches()){if(newMatch===null){setCurrentMatchIndex(0);}else{var newMatchIndex=0;for(i=0,iLen=this.matches.length;i<iLen;i++){if(newMatch===this.matches[i]){newMatchIndex=i;break;}}","setCurrentMatchIndex(newMatchIndex);}}else{currentMatchIndex=null;displayNoMatches();}}};function getPageOffsetTop(el,container){var currentEl=el;var y=0;while(currentEl&&currentEl!=container){y+=currentEl.offsetTop;currentEl=currentEl.offsetParent;}","return y;}",'function scrollIntoView(el){var logContainer=logMainContainer;if(!$("wrap").checked){var logContainerLeft=logContainer.scrollLeft;var logContainerRight=logContainerLeft+logContainer.offsetWidth;var elLeft=el.offsetLeft;var elRight=elLeft+el.offsetWidth;if(elLeft<logContainerLeft||elRight>logContainerRight){logContainer.scrollLeft=elLeft-(logContainer.offsetWidth-el.offsetWidth)/2;}}',"var logContainerTop=logContainer.scrollTop;var logContainerBottom=logContainerTop+logContainer.offsetHeight;var elTop=getPageOffsetTop(el)-getToolBarsHeight();var elBottom=elTop+el.offsetHeight;if(elTop<logContainerTop||elBottom>logContainerBottom){logContainer.scrollTop=elTop-(logContainer.offsetHeight-el.offsetHeight)/2;}}","function Match(logEntryLevel,spanInMainDiv,spanInUnwrappedPre,spanInWrappedDiv){this.logEntryLevel=logEntryLevel;this.spanInMainDiv=spanInMainDiv;if(isIe){this.spanInUnwrappedPre=spanInUnwrappedPre;this.spanInWrappedDiv=spanInWrappedDiv;}","this.mainSpan=isIe?spanInUnwrappedPre:spanInMainDiv;}",'Match.prototype={equals:function(match){return this.mainSpan===match.mainSpan;},setCurrent:function(){if(isIe){addClass(this.spanInUnwrappedPre,"currentmatch");addClass(this.spanInWrappedDiv,"currentmatch");var elementToScroll=$("wrap").checked?this.spanInWrappedDiv:this.spanInUnwrappedPre;scrollIntoView(elementToScroll);}else{addClass(this.spanInMainDiv,"currentmatch");scrollIntoView(this.spanInMainDiv);}},belongsTo:function(logEntry){if(isIe){return isDescendant(this.spanInUnwrappedPre,logEntry.unwrappedPre);}else{return isDescendant(this.spanInMainDiv,logEntry.mainDiv);}},setNotCurrent:function(){if(isIe){removeClass(this.spanInUnwrappedPre,"currentmatch");removeClass(this.spanInWrappedDiv,"currentmatch");}else{removeClass(this.spanInMainDiv,"currentmatch");}},isOrphan:function(){return isOrphan(this.mainSpan);},isVisible:function(){return getCheckBox(this.logEntryLevel).checked;},remove:function(){if(isIe){this.spanInUnwrappedPre=null;this.spanInWrappedDiv=null;}else{this.spanInMainDiv=null;}}};var currentSearch=null;var currentMatchIndex=null;function doSearch(){var searchBox=$("searchBox");var searchTerm=searchBox.value;var isRegex=$("searchRegex").checked;var isCaseSensitive=$("searchCaseSensitive").checked;var i;if(searchTerm===""){$("searchReset").disabled=true;$("searchNav").style.display="none";removeClass(document.body,"searching");removeClass(searchBox,"hasmatches");removeClass(searchBox,"nomatches");for(i=0;i<logEntries.length;i++){logEntries[i].clearSearch();logEntries[i].setContent(logEntries[i].formattedMessage,logEntries[i].formattedMessage);}','currentSearch=null;setLogContainerHeight();}else{$("searchReset").disabled=false;$("searchNav").style.display="block";var searchRegex;var regexValid;if(isRegex){try{searchRegex=isCaseSensitive?new RegExp(searchTerm,"g"):new RegExp(searchTerm,"gi");regexValid=true;replaceClass(searchBox,"validregex","invalidregex");searchBox.title="Valid regex";}catch(ex){regexValid=false;replaceClass(searchBox,"invalidregex","validregex");searchBox.title="Invalid regex: "+(ex.message?ex.message:(ex.description?ex.description:"unknown error"));return;}}else{searchBox.title="";removeClass(searchBox,"validregex");removeClass(searchBox,"invalidregex");}','addClass(document.body,"searching");currentSearch=new Search(searchTerm,isRegex,searchRegex,isCaseSensitive);for(i=0;i<logEntries.length;i++){currentSearch.applyTo(logEntries[i]);}',"setLogContainerHeight();if(currentSearch.hasVisibleMatches()){setCurrentMatchIndex(0);displayMatches();}else{displayNoMatches();}}}","function updateSearchFromFilters(){if(currentSearch){if(currentSearch.hasMatches()){if(currentMatchIndex===null){currentMatchIndex=0;}","var currentMatch=currentSearch.matches[currentMatchIndex];if(currentMatch.isVisible()){displayMatches();setCurrentMatchIndex(currentMatchIndex);}else{currentMatch.setNotCurrent();var nextVisibleMatchIndex=currentSearch.getNextVisibleMatchIndex();if(nextVisibleMatchIndex>-1){setCurrentMatchIndex(nextVisibleMatchIndex);displayMatches();}else{displayNoMatches();}}}else{displayNoMatches();}}}","function refreshCurrentMatch(){if(currentSearch&&currentSearch.hasVisibleMatches()){setCurrentMatchIndex(currentMatchIndex);}}",'function displayMatches(){replaceClass($("searchBox"),"hasmatches","nomatches");$("searchBox").title=""+currentSearch.matches.length+" matches found";$("searchNav").style.display="block";setLogContainerHeight();}','function displayNoMatches(){replaceClass($("searchBox"),"nomatches","hasmatches");$("searchBox").title="No matches found";$("searchNav").style.display="none";setLogContainerHeight();}','function toggleSearchEnabled(enable){enable=(typeof enable=="undefined")?!$("searchDisable").checked:enable;$("searchBox").disabled=!enable;$("searchReset").disabled=!enable;$("searchRegex").disabled=!enable;$("searchNext").disabled=!enable;$("searchPrevious").disabled=!enable;$("searchCaseSensitive").disabled=!enable;$("searchNav").style.display=(enable&&($("searchBox").value!=="")&&currentSearch&&currentSearch.hasVisibleMatches())?"block":"none";if(enable){removeClass($("search"),"greyedout");addClass(document.body,"searching");if($("searchHighlight").checked){addClass(logMainContainer,"searchhighlight");}else{removeClass(logMainContainer,"searchhighlight");}','if($("searchFilter").checked){addClass(logMainContainer,"searchfilter");}else{removeClass(logMainContainer,"searchfilter");}','$("searchDisable").checked=!enable;}else{addClass($("search"),"greyedout");removeClass(document.body,"searching");removeClass(logMainContainer,"searchhighlight");removeClass(logMainContainer,"searchfilter");}',"setLogContainerHeight();}",'function toggleSearchFilter(){var enable=$("searchFilter").checked;if(enable){addClass(logMainContainer,"searchfilter");}else{removeClass(logMainContainer,"searchfilter");}',"refreshCurrentMatch();}",'function toggleSearchHighlight(){var enable=$("searchHighlight").checked;if(enable){addClass(logMainContainer,"searchhighlight");}else{removeClass(logMainContainer,"searchhighlight");}}','function clearSearch(){$("searchBox").value="";doSearch();}','function searchNext(){if(currentSearch!==null&&currentMatchIndex!==null){currentSearch.matches[currentMatchIndex].setNotCurrent();var nextMatchIndex=currentSearch.getNextVisibleMatchIndex();if(nextMatchIndex>currentMatchIndex||confirm("Reached the end of the page. Start from the top?")){setCurrentMatchIndex(nextMatchIndex);}}}','function searchPrevious(){if(currentSearch!==null&&currentMatchIndex!==null){currentSearch.matches[currentMatchIndex].setNotCurrent();var previousMatchIndex=currentSearch.getPreviousVisibleMatchIndex();if(previousMatchIndex<currentMatchIndex||confirm("Reached the start of the page. Continue from the bottom?")){setCurrentMatchIndex(previousMatchIndex);}}}',"function setCurrentMatchIndex(index){currentMatchIndex=index;currentSearch.matches[currentMatchIndex].setCurrent();}",'function addClass(el,cssClass){if(!hasClass(el,cssClass)){if(el.className){el.className+=" "+cssClass;}else{el.className=cssClass;}}}','function hasClass(el,cssClass){if(el.className){var classNames=el.className.split(" ");return array_contains(classNames,cssClass);}',"return false;}",'function removeClass(el,cssClass){if(hasClass(el,cssClass)){var existingClasses=el.className.split(" ");var newClasses=[];for(var i=0,len=existingClasses.length;i<len;i++){if(existingClasses[i]!=cssClass){newClasses[newClasses.length]=existingClasses[i];}}','el.className=newClasses.join(" ");}}',"function replaceClass(el,newCssClass,oldCssClass){removeClass(el,oldCssClass);addClass(el,newCssClass);}","function getElementsByClass(el,cssClass,tagName){var elements=el.getElementsByTagName(tagName);var matches=[];for(var i=0,len=elements.length;i<len;i++){if(hasClass(elements[i],cssClass)){matches.push(elements[i]);}}","return matches;}","function $(id){return document.getElementById(id);}","function isDescendant(node,ancestorNode){while(node!=null){if(node===ancestorNode){return true;}","node=node.parentNode;}","return false;}","function isOrphan(node){var currentNode=node;while(currentNode){if(currentNode==document.body){return false;}","currentNode=currentNode.parentNode;}","return true;}",'function escapeHtml(str){return str.replace(/&/g,"&amp;").replace(/[<]/g,"&lt;").replace(/>/g,"&gt;");}',"function getWindowWidth(){if(window.innerWidth){return window.innerWidth;}else if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth;}else if(document.body){return document.body.clientWidth;}","return 0;}","function getWindowHeight(){if(window.innerHeight){return window.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight;}else if(document.body){return document.body.clientHeight;}","return 0;}",'function getToolBarsHeight(){return $("switches").offsetHeight;}','function getChromeHeight(){var height=getToolBarsHeight();if(showCommandLine){height+=$("commandLine").offsetHeight;}',"return height;}",'function setLogContainerHeight(){if(logMainContainer){var windowHeight=getWindowHeight();$("body").style.height=getWindowHeight()+"px";logMainContainer.style.height=""+','Math.max(0,windowHeight-getChromeHeight())+"px";}}','function setCommandInputWidth(){if(showCommandLine){$("command").style.width=""+Math.max(0,$("commandLineContainer").offsetWidth-','($("evaluateButton").offsetWidth+13))+"px";}}',"window.onresize=function(){setCommandInputWidth();setLogContainerHeight();};if(!Array.prototype.push){Array.prototype.push=function(){for(var i=0,len=arguments.length;i<len;i++){this[this.length]=arguments[i];}","return this.length;};}","if(!Array.prototype.pop){Array.prototype.pop=function(){if(this.length>0){var val=this[this.length-1];this.length=this.length-1;return val;}};}","if(!Array.prototype.shift){Array.prototype.shift=function(){if(this.length>0){var firstItem=this[0];for(var i=0,len=this.length-1;i<len;i++){this[i]=this[i+1];}","this.length=this.length-1;return firstItem;}};}","if(!Array.prototype.splice){Array.prototype.splice=function(startIndex,deleteCount){var itemsAfterDeleted=this.slice(startIndex+deleteCount);var itemsDeleted=this.slice(startIndex,startIndex+deleteCount);this.length=startIndex;var argumentsArray=[];for(var i=0,len=arguments.length;i<len;i++){argumentsArray[i]=arguments[i];}","var itemsToAppend=(argumentsArray.length>2)?itemsAfterDeleted=argumentsArray.slice(2).concat(itemsAfterDeleted):itemsAfterDeleted;for(i=0,len=itemsToAppend.length;i<len;i++){this.push(itemsToAppend[i]);}","return itemsDeleted;};}","function array_remove(arr,val){var index=-1;for(var i=0,len=arr.length;i<len;i++){if(arr[i]===val){index=i;break;}}","if(index>=0){arr.splice(index,1);return index;}else{return false;}}","function array_removeFromStart(array,numberToRemove){if(Array.prototype.splice){array.splice(0,numberToRemove);}else{for(var i=numberToRemove,len=array.length;i<len;i++){array[i-numberToRemove]=array[i];}","array.length=array.length-numberToRemove;}","return array;}","function array_contains(arr,val){for(var i=0,len=arr.length;i<len;i++){if(arr[i]==val){return true;}}","return false;}","function getErrorMessage(ex){if(ex.message){return ex.message;}else if(ex.description){return ex.description;}",'return""+ex;}',"function moveCaretToEnd(input){if(input.setSelectionRange){input.focus();var length=input.value.length;input.setSelectionRange(length,length);}else if(input.createTextRange){var range=input.createTextRange();range.collapse(false);range.select();}","input.focus();}",'function stopPropagation(evt){if(evt.stopPropagation){evt.stopPropagation();}else if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true;}}',"function getEvent(evt){return evt?evt:event;}","function getTarget(evt){return evt.target?evt.target:evt.srcElement;}",'function getRelatedTarget(evt){if(evt.relatedTarget){return evt.relatedTarget;}else if(evt.srcElement){switch(evt.type){case"mouseover":return evt.fromElement;case"mouseout":return evt.toElement;default:return evt.srcElement;}}}',"function cancelKeyEvent(evt){evt.returnValue=false;stopPropagation(evt);}",'function evalCommandLine(){var expr=$("command").value;evalCommand(expr);$("command").value="";}',"function evalLastCommand(){if(lastCommand!=null){evalCommand(lastCommand);}}",'var lastCommand=null;var commandHistory=[];var currentCommandIndex=0;function evalCommand(expr){if(appender){appender.evalCommandAndAppend(expr);}else{var prefix=">>> "+expr+"\\r\\n";try{log("INFO",prefix+eval(expr));}catch(ex){log("ERROR",prefix+"Error: "+getErrorMessage(ex));}}',"if(expr!=commandHistory[commandHistory.length-1]){commandHistory.push(expr);if(appender){appender.storeCommandHistory(commandHistory);}}","currentCommandIndex=(expr==commandHistory[currentCommandIndex])?currentCommandIndex+1:commandHistory.length;lastCommand=expr;}","//]]>","<\/script>",'<style type="text/css">',"body{background-color:white;color:black;padding:0;margin:0;font-family:tahoma,verdana,arial,helvetica,sans-serif;overflow:hidden}div#switchesContainer input{margin-bottom:0}div.toolbar{border-top:solid #ffffff 1px;border-bottom:solid #aca899 1px;background-color:#f1efe7;padding:3px 5px;font-size:68.75%}div.toolbar,div#search input{font-family:tahoma,verdana,arial,helvetica,sans-serif}div.toolbar input.button{padding:0 5px;font-size:100%}div.toolbar input.hidden{display:none}div#switches input#clearButton{margin-left:20px}div#levels label{font-weight:bold}div#levels label,div#options label{margin-right:5px}div#levels label#wrapLabel{font-weight:normal}div#search label{margin-right:10px}div#search label.searchboxlabel{margin-right:0}div#search input{font-size:100%}div#search input.validregex{color:green}div#search input.invalidregex{color:red}div#search input.nomatches{color:white;background-color:#ff6666}div#search input.nomatches{color:white;background-color:#ff6666}div#searchNav{display:none}div#commandLine{display:none}div#commandLine input#command{font-size:100%;font-family:Courier New,Courier}div#commandLine input#evaluateButton{}*.greyedout{color:gray !important;border-color:gray !important}*.greyedout *.alwaysenabled{color:black}*.unselectable{-khtml-user-select:none;-moz-user-select:none;user-select:none}div#log{font-family:Courier New,Courier;font-size:75%;width:100%;overflow:auto;clear:both;position:relative}div.group{border-color:#cccccc;border-style:solid;border-width:1px 0 1px 1px;overflow:visible}div.oldIe div.group,div.oldIe div.group *,div.oldIe *.logentry{height:1%}div.group div.groupheading span.expander{border:solid black 1px;font-family:Courier New,Courier;font-size:0.833em;background-color:#eeeeee;position:relative;top:-1px;color:black;padding:0 2px;cursor:pointer;cursor:hand;height:1%}div.group div.groupcontent{margin-left:10px;padding-bottom:2px;overflow:visible}div.group div.expanded{display:block}div.group div.collapsed{display:none}*.logentry{overflow:visible;display:none;white-space:pre}span.pre{white-space:pre}pre.unwrapped{display:inline !important}pre.unwrapped pre.pre,div.wrapped pre.pre{display:inline}div.wrapped pre.pre{white-space:normal}div.wrapped{display:none}body.searching *.logentry span.currentmatch{color:white !important;background-color:green !important}body.searching div.searchhighlight *.logentry span.searchterm{color:black;background-color:yellow}div.wrap *.logentry{white-space:normal !important;border-width:0 0 1px 0;border-color:#dddddd;border-style:dotted}div.wrap #log_wrapped,#log_unwrapped{display:block}div.wrap #log_unwrapped,#log_wrapped{display:none}div.wrap *.logentry span.pre{overflow:visible;white-space:normal}div.wrap *.logentry pre.unwrapped{display:none}div.wrap *.logentry span.wrapped{display:inline}div.searchfilter *.searchnonmatch{display:none !important}div#log *.TRACE,label#label_TRACE{color:#666666}div#log *.DEBUG,label#label_DEBUG{color:green}div#log *.INFO,label#label_INFO{color:#000099}div#log *.WARN,label#label_WARN{color:#999900}div#log *.ERROR,label#label_ERROR{color:red}div#log *.FATAL,label#label_FATAL{color:#660066}div.TRACE#log *.TRACE,div.DEBUG#log *.DEBUG,div.INFO#log *.INFO,div.WARN#log *.WARN,div.ERROR#log *.ERROR,div.FATAL#log *.FATAL{display:block}div#log div.separator{background-color:#cccccc;margin:5px 0;line-height:1px}","</style>","</head>",'<body id="body">','<div id="switchesContainer">','<div id="switches">','<div id="levels" class="toolbar">',"Filters:",'<input type="checkbox" id="switch_TRACE" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide trace messages" /><label for="switch_TRACE" id="label_TRACE">trace</label>','<input type="checkbox" id="switch_DEBUG" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide debug messages" /><label for="switch_DEBUG" id="label_DEBUG">debug</label>','<input type="checkbox" id="switch_INFO" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide info messages" /><label for="switch_INFO" id="label_INFO">info</label>','<input type="checkbox" id="switch_WARN" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide warn messages" /><label for="switch_WARN" id="label_WARN">warn</label>','<input type="checkbox" id="switch_ERROR" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide error messages" /><label for="switch_ERROR" id="label_ERROR">error</label>','<input type="checkbox" id="switch_FATAL" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide fatal messages" /><label for="switch_FATAL" id="label_FATAL">fatal</label>','<input type="checkbox" id="switch_ALL" onclick="toggleAllLevels(); applyFilters()" checked="checked" title="Show/hide all messages" /><label for="switch_ALL" id="label_ALL">all</label>',"</div>",'<div id="search" class="toolbar">','<label for="searchBox" class="searchboxlabel">Search:</label> <input type="text" id="searchBox" onclick="toggleSearchEnabled(true)" onkeyup="scheduleSearch()" size="20" />','<input type="button" id="searchReset" disabled="disabled" value="Reset" onclick="clearSearch()" class="button" title="Reset the search" />','<input type="checkbox" id="searchRegex" onclick="doSearch()" title="If checked, search is treated as a regular expression" /><label for="searchRegex">Regex</label>','<input type="checkbox" id="searchCaseSensitive" onclick="doSearch()" title="If checked, search is case sensitive" /><label for="searchCaseSensitive">Match case</label>','<input type="checkbox" id="searchDisable" onclick="toggleSearchEnabled()" title="Enable/disable search" /><label for="searchDisable" class="alwaysenabled">Disable</label>','<div id="searchNav">','<input type="button" id="searchNext" disabled="disabled" value="Next" onclick="searchNext()" class="button" title="Go to the next matching log entry" />','<input type="button" id="searchPrevious" disabled="disabled" value="Previous" onclick="searchPrevious()" class="button" title="Go to the previous matching log entry" />','<input type="checkbox" id="searchFilter" onclick="toggleSearchFilter()" title="If checked, non-matching log entries are filtered out" /><label for="searchFilter">Filter</label>','<input type="checkbox" id="searchHighlight" onclick="toggleSearchHighlight()" title="Highlight matched search terms" /><label for="searchHighlight" class="alwaysenabled">Highlight all</label>',"</div>","</div>",'<div id="options" class="toolbar">',"Options:",'<input type="checkbox" id="enableLogging" onclick="toggleLoggingEnabled()" checked="checked" title="Enable/disable logging" /><label for="enableLogging" id="enableLoggingLabel">Log</label>','<input type="checkbox" id="wrap" onclick="toggleWrap()" title="Enable / disable word wrap" /><label for="wrap" id="wrapLabel">Wrap</label>','<input type="checkbox" id="newestAtTop" onclick="toggleNewestAtTop()" title="If checked, causes newest messages to appear at the top" /><label for="newestAtTop" id="newestAtTopLabel">Newest at the top</label>','<input type="checkbox" id="scrollToLatest" onclick="toggleScrollToLatest()" checked="checked" title="If checked, window automatically scrolls to a new message when it is added" /><label for="scrollToLatest" id="scrollToLatestLabel">Scroll to latest</label>','<input type="button" id="clearButton" value="Clear" onclick="clearLog()" class="button" title="Clear all log messages"  />','<input type="button" id="hideButton" value="Hide" onclick="hide()" class="hidden button" title="Hide the console" />','<input type="button" id="closeButton" value="Close" onclick="closeWindow()" class="hidden button" title="Close the window" />',"</div>","</div>","</div>",'<div id="log" class="TRACE DEBUG INFO WARN ERROR FATAL"></div>','<div id="commandLine" class="toolbar">','<div id="commandLineContainer">','<input type="text" id="command" title="Enter a JavaScript command here and hit return or press \'Evaluate\'" />','<input type="button" id="evaluateButton" value="Evaluate" class="button" title="Evaluate the command" onclick="evalCommandLine()" />',"</div>","</div>","</body>","</html>",""];e.open();for(var n=0,r=t.length;n<r;n++)e.writeln(t[n]);e.close()}function _(){var e=w();e.setAppender(h),e.setNewestAtTop(s),e.setScrollToLatest(v),e.setMaxMessages(C),e.setShowCommandLine(j),e.setShowHideButton(T),e.setShowCloseButton(S),e.setMainWindow(window);var t=getCookie(U);t&&(e.commandHistory=t.split(","),e.currentCommandIndex=e.commandHistory.length),h.dispatchEvent("load",{win:e})}function W(e,t,n,r){var o=setInterval(function(){try{f&&clearInterval(o),e(w())&&(clearInterval(o),n())}catch(e){clearInterval(o),g=!1,handleError(r,e)}},t)}function z(){var e=document.domain!=location.hostname;return l?"":getBaseUrl()+"console.html"+(e?"?log4javascript_domain="+escape(document.domain):"")}if(this.storeCommandHistory=function(e){setCookie(U,e.join(","))},this.setEventTypes(["load","unload"]),this.unload=function(){logLog.debug("unload "+this+", caller: "+this.unload.caller),f||(logLog.debug("really doing unload "+this),p=d=!(f=!0),h.dispatchEvent("unload",{}))},e){var G,q=null,$=[],K=!(this.addCssProperty=function(e,t){A("cssProperties")&&$.push([e,t])}),J=uniqueId+"_InPageAppender_"+m;this.hide=function(){o&&p&&(D()&&w().$("command").blur(),G.style.display="none",k=!0)},this.show=function(){o&&(p?(G.style.display="block",this.setShowCommandLine(j),k=!1):K||y(!0))},this.isVisible=function(){return!k&&!f},this.close=function(e){f||e&&!confirm("This will permanently remove the console from the page. No more messages will be logged. Do you wish to continue?")||(G.parentNode.removeChild(G),this.unload())},E=function(){var t="InPageAppender.open: unable to create console iframe";function n(){try{a||h.show(),_(),d=!0,F()}catch(e){g=!1,handleError(t,e)}}function e(){try{function e(e){return isLoaded(e)}l&&V(w().document),e(w())?n():W(e,100,n,t)}catch(e){g=!1,handleError(t,e)}}k=!1,(G=q.appendChild(document.createElement("div"))).style.width=u,G.style.height=c,G.style.border="solid gray 1px";for(var r=0,o=$.length;r<o;r++)G.style[$[r][0]]=$[r][1];var i=l?"":" src='"+z()+"'";function s(e){try{return bool(e)&&bool(e.document)}catch(e){return!1}}G.innerHTML="<iframe id='"+J+"' name='"+J+"' width='100%' height='100%' frameborder='0'"+i+" scrolling='no'></iframe>",f=!1,s(w())?e():W(s,100,e,t),p=!0},y=function(e){if(e||!a){function t(){if(n)try{var e=document.getElementById(n);1==e.nodeType&&(q=e),E()}catch(e){handleError("InPageAppender.init: invalid container element '"+n+"' supplied",e)}else(q=document.createElement("div")).style.position="fixed",q.style.left="0",q.style.right="0",q.style.bottom="0",document.body.appendChild(q),h.addCssProperty("borderWidth","1px 0 0 0"),h.addCssProperty("zIndex",1e6),E()}pageLoaded&&n&&n.appendChild?(q=n,E()):pageLoaded?t():log4javascript.addEventListener("load",t),K=!0}},x=function(){y(),o=!0},w=function(){var e=window.frames[J];if(e)return e},b=function(){return!(!g||f)&&(p&&!d&&w()&&isLoaded(w())&&(d=!0),d)}}else{var X,Y=h.defaults.useOldPopUp,Q=h.defaults.complainAboutPopUpBlocking,Z=this.defaults.reopenWhenClosed;this.isUseOldPopUp=function(){return Y},this.setUseOldPopUp=function(e){A("useOldPopUp")&&(Y=bool(e))},this.isComplainAboutPopUpBlocking=function(){return Q},this.setComplainAboutPopUpBlocking=function(e){A("complainAboutPopUpBlocking")&&(Q=bool(e))},this.isFocusPopUp=function(){return r},this.setFocusPopUp=function(e){r=bool(e)},this.isReopenWhenClosed=function(){return Z},this.setReopenWhenClosed=function(e){Z=bool(e)},this.close=function(){logLog.debug("close "+this);try{X.close(),this.unload()}catch(e){}},this.hide=function(){logLog.debug("hide "+this),D()&&this.close()},this.show=function(){logLog.debug("show "+this),p||E()},this.isVisible=function(){return b()},E=function(){var e="width="+u+",height="+c+",status,resizable",t="";try{var n=window.frameElement;n&&(t="_"+n.tagName+"_"+(n.name||n.id||""))}catch(e){t="_inaccessibleParentFrame"}var r="PopUp_"+location.host.replace(/[^a-z0-9]/gi,"_")+"_"+m+t;function o(e){if(f)return!0;try{return bool(e)&&e.closed}catch(e){}return!1}function i(){f||h.unload()}function s(){w().setCloseIfOpenerCloses(!Y||!l),_(),d=!0,F(),W(o,500,i,"PopUpAppender.checkPopUpClosed: error checking pop-up window")}Y&&l||(r=r+"_"+uniqueId);try{X=window.open(z(),r,e),p=!(f=!1),X&&X.document?l&&Y&&isLoaded(X)?(X.mainPageReloaded(),s()):(l&&V(X.document),isLoaded(X)?s():W(function(e){return bool(e)&&isLoaded(e)},100,s,"PopUpAppender.init: unable to create console window")):(g=!1,logLog.warn("PopUpAppender.init: pop-ups blocked, please unblock to use PopUpAppender"),Q&&handleError("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging."))}catch(e){handleError("PopUpAppender.init: error creating pop-up",e)}},y=function(){a||E()},x=function(){y(),o=!0},w=function(){return X},b=function(){if(g&&!isUndefined(X)&&!f){if(X.closed||d&&isUndefined(X.closed))return h.unload(),logLog.debug("PopUpAppender: pop-up closed"),!1;!d&&isLoaded(X)&&(d=!0)}return g&&d&&!f}}this.getConsoleWindow=w},ConsoleAppender.addGlobalCommandLineFunction=function(e,t){_0.push([e,t])},(b1.prototype=new ConsoleAppender).defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,focusPopUp:!1,lazyInit:!0,useOldPopUp:!0,complainAboutPopUpBlocking:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"600",height:"400",reopenWhenClosed:!1,maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!0,useDocumentWrite:!0},b1.prototype.toString=function(){return"PopUpAppender"},log4javascript.PopUpAppender=b1,(c1.prototype=new ConsoleAppender).defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,lazyInit:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"100%",height:"220px",maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!1,showLogEntryDeleteButtons:!0,useDocumentWrite:!0},c1.prototype.toString=function(){return"InPageAppender"},log4javascript.InPageAppender=c1,log4javascript.InlineAppender=c1,j4={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},k4=["script","pre"],l4=["br","img","hr","param","link","area","input","col","base","meta"],m4="  ",ConsoleAppender.addGlobalCommandLineFunction("$",function(e,t,n){return document.getElementById(t[0])}),ConsoleAppender.addGlobalCommandLineFunction("dir",function(e,t,n){for(var r=[],o=0,i=t.length;o<i;o++)r[o]=i4(t[o]);return r.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("dirxml",function(e,t,n){for(var r=[],o=0,i=t.length;o<i;o++)r[o]=n4(t[o]);return r.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("cd",function(e,t,n){var r,o;return 0===t.length||""===t[0]?(r=window,o="Command line set to run in main window"):t[0].window==t[0]?(r=t[0],o="Command line set to run in frame '"+t[0].name+"'"):(r=window.frames[t[0]])?o="Command line set to run in frame '"+t[0]+"'":(n.isError=!0,o="Frame '"+t[0]+"' does not exist",r=e.getCommandWindow()),e.setCommandWindow(r),o}),ConsoleAppender.addGlobalCommandLineFunction("clear",function(e,t,n){n.appendResult=!1,e.clear()}),ConsoleAppender.addGlobalCommandLineFunction("keys",function(e,t,n){var r=[];for(var o in t[0])r.push(o);return r}),ConsoleAppender.addGlobalCommandLineFunction("values",function(e,t,n){var r=[];for(var o in t[0])try{r.push(t[0][o])}catch(e){logLog.warn("values(): Unable to obtain value for key "+o+". Details: "+getExceptionMessage(e))}return r}),ConsoleAppender.addGlobalCommandLineFunction("expansionDepth",function(e,t,n){var r=parseInt(t[0],10);return isNaN(r)||r<0?(n.isError=!0,t[0]+" is not a valid expansion depth"):(e.setCommandLineObjectExpansionDepth(r),"Object expansion depth set to "+r)}),log4javascript.setDocumentReady=function(){pageLoaded=!0,log4javascript.dispatchEvent("load",{})},window.addEventListener)window.addEventListener("load",log4javascript.setDocumentReady,!1);else if(window.attachEvent)window.attachEvent("onload",log4javascript.setDocumentReady);else{var oldOnload=window.onload;"function"!=typeof window.onload?window.onload=log4javascript.setDocumentReady:window.onload=function(e){oldOnload&&oldOnload(e),log4javascript.setDocumentReady()}}return log4javascript},fV=this,"function"==typeof define&&define.amd?define(eV):void 0!==module&&"object"==typeof exports?module.exports=eV():fV.log4javascript=eV()},{}],86:[function(e,t,n){var r,o;r=this,o=function(){return(r={},o.m=n=[function(e,t,n){var r,o;void 0===(o="function"==typeof(r={af:function(e,t){return t?"other":1==e?"one":"other"},ak:function(e,t){return t?"other":0==e||1==e?"one":"other"},am:function(e,t){return t?"other":0<=e&&e<=1?"one":"other"},ar:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":3<=r&&r<=10?"few":11<=r&&r<=99?"many":"other"},ars:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":3<=r&&r<=10?"few":11<=r&&r<=99?"many":"other"},as:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":0<=e&&e<=1?"one":"other"},asa:function(e,t){return t?"other":1==e?"one":"other"},ast:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},az:function(e,t){var n=String(e).split(".")[0],r=n.slice(-1),o=n.slice(-2),i=n.slice(-3);return t?1==r||2==r||5==r||7==r||8==r||20==o||50==o||70==o||80==o?"one":3==r||4==r||100==i||200==i||300==i||400==i||500==i||600==i||700==i||800==i||900==i?"few":0==n||6==r||40==o||60==o||90==o?"many":"other":1==e?"one":"other"},be:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2);return t?2!=o&&3!=o||12==i||13==i?"other":"few":1==o&&11!=i?"one":2<=o&&o<=4&&(i<12||14<i)?"few":r&&0==o||5<=o&&o<=9||11<=i&&i<=14?"many":"other"},bem:function(e,t){return t?"other":1==e?"one":"other"},bez:function(e,t){return t?"other":1==e?"one":"other"},bg:function(e,t){return t?"other":1==e?"one":"other"},bh:function(e,t){return t?"other":0==e||1==e?"one":"other"},bm:function(e,t){return"other"},bn:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":0<=e&&e<=1?"one":"other"},bo:function(e,t){return"other"},br:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2),s=r&&n[0].slice(-6);return t?"other":1==o&&11!=i&&71!=i&&91!=i?"one":2==o&&12!=i&&72!=i&&92!=i?"two":(3==o||4==o||9==o)&&(i<10||19<i)&&(i<70||79<i)&&(i<90||99<i)?"few":0!=e&&r&&0==s?"many":"other"},brx:function(e,t){return t?"other":1==e?"one":"other"},bs:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return t?"other":i&&1==s&&11!=a||1==l&&11!=u?"one":i&&2<=s&&s<=4&&(a<12||14<a)||2<=l&&l<=4&&(u<12||14<u)?"few":"other"},ca:function(e,t){var n=!String(e).split(".")[1];return t?1==e||3==e?"one":2==e?"two":4==e?"few":"other":1==e&&n?"one":"other"},ce:function(e,t){return t?"other":1==e?"one":"other"},cgg:function(e,t){return t?"other":1==e?"one":"other"},chr:function(e,t){return t?"other":1==e?"one":"other"},ckb:function(e,t){return t?"other":1==e?"one":"other"},cs:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1];return t?"other":1==e&&o?"one":2<=r&&r<=4&&o?"few":o?"other":"many"},cy:function(e,t){return t?0==e||7==e||8==e||9==e?"zero":1==e?"one":2==e?"two":3==e||4==e?"few":5==e||6==e?"many":"other":0==e?"zero":1==e?"one":2==e?"two":3==e?"few":6==e?"many":"other"},da:function(e,t){var n=String(e).split("."),r=n[0],o=Number(n[0])==e;return t?"other":1!=e&&(o||0!=r&&1!=r)?"other":"one"},de:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},dsb:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-2),a=o.slice(-2);return t?"other":i&&1==s||1==a?"one":i&&2==s||2==a?"two":i&&(3==s||4==s)||3==a||4==a?"few":"other"},dv:function(e,t){return t?"other":1==e?"one":"other"},dz:function(e,t){return"other"},ee:function(e,t){return t?"other":1==e?"one":"other"},el:function(e,t){return t?"other":1==e?"one":"other"},en:function(e,t){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e,i=o&&n[0].slice(-1),s=o&&n[0].slice(-2);return t?1==i&&11!=s?"one":2==i&&12!=s?"two":3==i&&13!=s?"few":"other":1==e&&r?"one":"other"},eo:function(e,t){return t?"other":1==e?"one":"other"},es:function(e,t){return t?"other":1==e?"one":"other"},et:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},eu:function(e,t){return t?"other":1==e?"one":"other"},fa:function(e,t){return t?"other":0<=e&&e<=1?"one":"other"},ff:function(e,t){return t?"other":0<=e&&e<2?"one":"other"},fi:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},fil:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=o.slice(-1);return t?1==e?"one":"other":i&&(1==r||2==r||3==r)||i&&4!=s&&6!=s&&9!=s||!i&&4!=a&&6!=a&&9!=a?"one":"other"},fo:function(e,t){return t?"other":1==e?"one":"other"},fr:function(e,t){return t?1==e?"one":"other":0<=e&&e<2?"one":"other"},fur:function(e,t){return t?"other":1==e?"one":"other"},fy:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},ga:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?1==e?"one":"other":1==e?"one":2==e?"two":r&&3<=e&&e<=6?"few":r&&7<=e&&e<=10?"many":"other"},gd:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?1==e||11==e?"one":2==e||12==e?"two":3==e||13==e?"few":"other":1==e||11==e?"one":2==e||12==e?"two":r&&3<=e&&e<=10||r&&13<=e&&e<=19?"few":"other"},gl:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},gsw:function(e,t){return t?"other":1==e?"one":"other"},gu:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":0<=e&&e<=1?"one":"other"},guw:function(e,t){return t?"other":0==e||1==e?"one":"other"},gv:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),s=r.slice(-2);return t?"other":o&&1==i?"one":o&&2==i?"two":!o||0!=s&&20!=s&&40!=s&&60!=s&&80!=s?o?"other":"many":"few"},ha:function(e,t){return t?"other":1==e?"one":"other"},haw:function(e,t){return t?"other":1==e?"one":"other"},he:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1],i=Number(n[0])==e,s=i&&n[0].slice(-1);return t?"other":1==e&&o?"one":2==r&&o?"two":o&&(e<0||10<e)&&i&&0==s?"many":"other"},hi:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":0<=e&&e<=1?"one":"other"},hr:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return t?"other":i&&1==s&&11!=a||1==l&&11!=u?"one":i&&2<=s&&s<=4&&(a<12||14<a)||2<=l&&l<=4&&(u<12||14<u)?"few":"other"},hsb:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-2),a=o.slice(-2);return t?"other":i&&1==s||1==a?"one":i&&2==s||2==a?"two":i&&(3==s||4==s)||3==a||4==a?"few":"other"},hu:function(e,t){return t?1==e||5==e?"one":"other":1==e?"one":"other"},hy:function(e,t){return t?1==e?"one":"other":0<=e&&e<2?"one":"other"},ia:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},id:function(e,t){return"other"},ig:function(e,t){return"other"},ii:function(e,t){return"other"},in:function(e,t){return"other"},io:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},is:function(e,t){var n=String(e).split("."),r=n[0],o=Number(n[0])==e,i=r.slice(-1),s=r.slice(-2);return t?"other":o&&1==i&&11!=s||!o?"one":"other"},it:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},iu:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},iw:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1],i=Number(n[0])==e,s=i&&n[0].slice(-1);return t?"other":1==e&&o?"one":2==r&&o?"two":o&&(e<0||10<e)&&i&&0==s?"many":"other"},ja:function(e,t){return"other"},jbo:function(e,t){return"other"},jgo:function(e,t){return t?"other":1==e?"one":"other"},ji:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},jmc:function(e,t){return t?"other":1==e?"one":"other"},jv:function(e,t){return"other"},jw:function(e,t){return"other"},ka:function(e,t){var n=String(e).split(".")[0],r=n.slice(-2);return t?1==n?"one":0==n||2<=r&&r<=20||40==r||60==r||80==r?"many":"other":1==e?"one":"other"},kab:function(e,t){return t?"other":0<=e&&e<2?"one":"other"},kaj:function(e,t){return t?"other":1==e?"one":"other"},kcg:function(e,t){return t?"other":1==e?"one":"other"},kde:function(e,t){return"other"},kea:function(e,t){return"other"},kk:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1);return t?6==o||9==o||r&&0==o&&0!=e?"many":"other":1==e?"one":"other"},kkj:function(e,t){return t?"other":1==e?"one":"other"},kl:function(e,t){return t?"other":1==e?"one":"other"},km:function(e,t){return"other"},kn:function(e,t){return t?"other":0<=e&&e<=1?"one":"other"},ko:function(e,t){return"other"},ks:function(e,t){return t?"other":1==e?"one":"other"},ksb:function(e,t){return t?"other":1==e?"one":"other"},ksh:function(e,t){return t?"other":0==e?"zero":1==e?"one":"other"},ku:function(e,t){return t?"other":1==e?"one":"other"},kw:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},ky:function(e,t){return t?"other":1==e?"one":"other"},lag:function(e,t){var n=String(e).split(".")[0];return t?"other":0==e?"zero":0!=n&&1!=n||0==e?"other":"one"},lb:function(e,t){return t?"other":1==e?"one":"other"},lg:function(e,t){return t?"other":1==e?"one":"other"},lkt:function(e,t){return"other"},ln:function(e,t){return t?"other":0==e||1==e?"one":"other"},lo:function(e,t){return t&&1==e?"one":"other"},lt:function(e,t){var n=String(e).split("."),r=n[1]||"",o=Number(n[0])==e,i=o&&n[0].slice(-1),s=o&&n[0].slice(-2);return t?"other":1==i&&(s<11||19<s)?"one":2<=i&&i<=9&&(s<11||19<s)?"few":0!=r?"many":"other"},lv:function(e,t){var n=String(e).split("."),r=n[1]||"",o=r.length,i=Number(n[0])==e,s=i&&n[0].slice(-1),a=i&&n[0].slice(-2),l=r.slice(-2),u=r.slice(-1);return t?"other":i&&0==s||11<=a&&a<=19||2==o&&11<=l&&l<=19?"zero":1==s&&11!=a||2==o&&1==u&&11!=l||2!=o&&1==u?"one":"other"},mas:function(e,t){return t?"other":1==e?"one":"other"},mg:function(e,t){return t?"other":0==e||1==e?"one":"other"},mgo:function(e,t){return t?"other":1==e?"one":"other"},mk:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return t?1==s&&11!=a?"one":2==s&&12!=a?"two":7!=s&&8!=s||17==a||18==a?"other":"many":i&&1==s&&11!=a||1==l&&11!=u?"one":"other"},ml:function(e,t){return t?"other":1==e?"one":"other"},mn:function(e,t){return t?"other":1==e?"one":"other"},mo:function(e,t){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&r?"one":!r||0==e||1!=e&&1<=o&&o<=19?"few":"other"},mr:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":"other":0<=e&&e<=1?"one":"other"},ms:function(e,t){return t&&1==e?"one":"other"},mt:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-2);return t?"other":1==e?"one":0==e||2<=r&&r<=10?"few":11<=r&&r<=19?"many":"other"},my:function(e,t){return"other"},nah:function(e,t){return t?"other":1==e?"one":"other"},naq:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},nb:function(e,t){return t?"other":1==e?"one":"other"},nd:function(e,t){return t?"other":1==e?"one":"other"},ne:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?r&&1<=e&&e<=4?"one":"other":1==e?"one":"other"},nl:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},nn:function(e,t){return t?"other":1==e?"one":"other"},nnh:function(e,t){return t?"other":1==e?"one":"other"},no:function(e,t){return t?"other":1==e?"one":"other"},nqo:function(e,t){return"other"},nr:function(e,t){return t?"other":1==e?"one":"other"},nso:function(e,t){return t?"other":0==e||1==e?"one":"other"},ny:function(e,t){return t?"other":1==e?"one":"other"},nyn:function(e,t){return t?"other":1==e?"one":"other"},om:function(e,t){return t?"other":1==e?"one":"other"},or:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?1==e||5==e||r&&7<=e&&e<=9?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":1==e?"one":"other"},os:function(e,t){return t?"other":1==e?"one":"other"},pa:function(e,t){return t?"other":0==e||1==e?"one":"other"},pap:function(e,t){return t?"other":1==e?"one":"other"},pl:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),s=r.slice(-2);return t?"other":1==e&&o?"one":o&&2<=i&&i<=4&&(s<12||14<s)?"few":o&&1!=r&&(0==i||1==i)||o&&5<=i&&i<=9||o&&12<=s&&s<=14?"many":"other"},prg:function(e,t){var n=String(e).split("."),r=n[1]||"",o=r.length,i=Number(n[0])==e,s=i&&n[0].slice(-1),a=i&&n[0].slice(-2),l=r.slice(-2),u=r.slice(-1);return t?"other":i&&0==s||11<=a&&a<=19||2==o&&11<=l&&l<=19?"zero":1==s&&11!=a||2==o&&1==u&&11!=l||2!=o&&1==u?"one":"other"},ps:function(e,t){return t?"other":1==e?"one":"other"},pt:function(e,t){var n=String(e).split(".")[0];return t?"other":0==n||1==n?"one":"other"},"pt-PT":function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},rm:function(e,t){return t?"other":1==e?"one":"other"},ro:function(e,t){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&r?"one":!r||0==e||1!=e&&1<=o&&o<=19?"few":"other"},rof:function(e,t){return t?"other":1==e?"one":"other"},root:function(e,t){return"other"},ru:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-1),s=r.slice(-2);return t?"other":o&&1==i&&11!=s?"one":o&&2<=i&&i<=4&&(s<12||14<s)?"few":o&&0==i||o&&5<=i&&i<=9||o&&11<=s&&s<=14?"many":"other"},rwk:function(e,t){return t?"other":1==e?"one":"other"},sah:function(e,t){return"other"},saq:function(e,t){return t?"other":1==e?"one":"other"},sc:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},scn:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},sd:function(e,t){return t?"other":1==e?"one":"other"},sdh:function(e,t){return t?"other":1==e?"one":"other"},se:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},seh:function(e,t){return t?"other":1==e?"one":"other"},ses:function(e,t){return"other"},sg:function(e,t){return"other"},sh:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return t?"other":i&&1==s&&11!=a||1==l&&11!=u?"one":i&&2<=s&&s<=4&&(a<12||14<a)||2<=l&&l<=4&&(u<12||14<u)?"few":"other"},shi:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?"other":0<=e&&e<=1?"one":r&&2<=e&&e<=10?"few":"other"},si:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"";return t?"other":0==e||1==e||0==r&&1==o?"one":"other"},sk:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1];return t?"other":1==e&&o?"one":2<=r&&r<=4&&o?"few":o?"other":"many"},sl:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1],i=r.slice(-2);return t?"other":o&&1==i?"one":o&&2==i?"two":o&&(3==i||4==i)||!o?"few":"other"},sma:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smi:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smj:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},smn:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},sms:function(e,t){return t?"other":1==e?"one":2==e?"two":"other"},sn:function(e,t){return t?"other":1==e?"one":"other"},so:function(e,t){return t?"other":1==e?"one":"other"},sq:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,o=r&&n[0].slice(-1),i=r&&n[0].slice(-2);return t?1==e?"one":4==o&&14!=i?"many":"other":1==e?"one":"other"},sr:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=r.slice(-2),l=o.slice(-1),u=o.slice(-2);return t?"other":i&&1==s&&11!=a||1==l&&11!=u?"one":i&&2<=s&&s<=4&&(a<12||14<a)||2<=l&&l<=4&&(u<12||14<u)?"few":"other"},ss:function(e,t){return t?"other":1==e?"one":"other"},ssy:function(e,t){return t?"other":1==e?"one":"other"},st:function(e,t){return t?"other":1==e?"one":"other"},sv:function(e,t){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e,i=o&&n[0].slice(-1),s=o&&n[0].slice(-2);return t?1!=i&&2!=i||11==s||12==s?"other":"one":1==e&&r?"one":"other"},sw:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},syr:function(e,t){return t?"other":1==e?"one":"other"},ta:function(e,t){return t?"other":1==e?"one":"other"},te:function(e,t){return t?"other":1==e?"one":"other"},teo:function(e,t){return t?"other":1==e?"one":"other"},th:function(e,t){return"other"},ti:function(e,t){return t?"other":0==e||1==e?"one":"other"},tig:function(e,t){return t?"other":1==e?"one":"other"},tk:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-1);return t?6==r||9==r||10==e?"few":"other":1==e?"one":"other"},tl:function(e,t){var n=String(e).split("."),r=n[0],o=n[1]||"",i=!n[1],s=r.slice(-1),a=o.slice(-1);return t?1==e?"one":"other":i&&(1==r||2==r||3==r)||i&&4!=s&&6!=s&&9!=s||!i&&4!=a&&6!=a&&9!=a?"one":"other"},tn:function(e,t){return t?"other":1==e?"one":"other"},to:function(e,t){return"other"},tr:function(e,t){return t?"other":1==e?"one":"other"},ts:function(e,t){return t?"other":1==e?"one":"other"},tzm:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?"other":0==e||1==e||r&&11<=e&&e<=99?"one":"other"},ug:function(e,t){return t?"other":1==e?"one":"other"},uk:function(e,t){var n=String(e).split("."),r=n[0],o=!n[1],i=Number(n[0])==e,s=i&&n[0].slice(-1),a=i&&n[0].slice(-2),l=r.slice(-1),u=r.slice(-2);return t?3==s&&13!=a?"few":"other":o&&1==l&&11!=u?"one":o&&2<=l&&l<=4&&(u<12||14<u)?"few":o&&0==l||o&&5<=l&&l<=9||o&&11<=u&&u<=14?"many":"other"},ur:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},uz:function(e,t){return t?"other":1==e?"one":"other"},ve:function(e,t){return t?"other":1==e?"one":"other"},vi:function(e,t){return t&&1==e?"one":"other"},vo:function(e,t){return t?"other":1==e?"one":"other"},vun:function(e,t){return t?"other":1==e?"one":"other"},wa:function(e,t){return t?"other":0==e||1==e?"one":"other"},wae:function(e,t){return t?"other":1==e?"one":"other"},wo:function(e,t){return"other"},xh:function(e,t){return t?"other":1==e?"one":"other"},xog:function(e,t){return t?"other":1==e?"one":"other"},yi:function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},yo:function(e,t){return"other"},yue:function(e,t){return"other"},zh:function(e,t){return"other"},zu:function(e,t){return t?"other":0<=e&&e<=1?"one":"other"}})?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t,n){e.exports={date:n(4),duration:n(5),number:n(6),time:n(7)}},function(e,t,n){"use strict";function ft(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ft)}function r(){this.constructor=o}var o,i;o=ft,i=Error,r.prototype=i.prototype,o.prototype=new r,ft.buildMessage=function(e,t){var i={literal:function(e){return'"'+r(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}return"Expected "+function(e){var t,n,r,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(r=e[t],i[r.type](r));if(o.sort(),0<o.length){for(n=t=1;t<o.length;t++)o[t-1]!==o[t]&&(o[n]=o[t],n++);o.length=n}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+(t?'"'+r(t)+'"':"end of input")+" found."},e.exports={SyntaxError:ft,parse:function(y,i){i=void 0!==i?i:{};var e,b={},t={start:Qe},n=Qe,w="#",E=qe("#",!1),C=function(){return ht[0]},j=function(){return{type:"octothorpe"}},L=function(e){return e.join("")},T="{",S=qe("{",!1),A="}",D=qe("}",!1),I=function(e){return{type:"argument",arg:e}},k=",",N=qe(",",!1),M="select",O=qe("select",!1),R=function(e,t){return i.strict&&ht.unshift(!1),t},F=function(e,t){return i.strict&&ht.shift(),{type:"select",arg:e,cases:t}},B="plural",P=qe("plural",!1),H="selectordinal",U=qe("selectordinal",!1),V=function(e,t){return ht.unshift(!0),t},_=function(t,n,e,r){var o=("selectordinal"===n?i.ordinal:i.cardinal)||["zero","one","two","few","many","other"];return o&&o.length&&r.forEach(function(e){if(isNaN(e.key)&&o.indexOf(e.key)<0)throw new Error("Invalid key `"+e.key+"` for argument `"+t+"`. Valid "+n+" keys for this locale are `"+o.join("`, `")+"`, and explicit keys like `=0`.")}),ht.shift(),{type:n,arg:t,offset:e||0,cases:r}},W=function(e,t,n){return{type:"function",arg:e,key:t,param:n}},r=Ke("identifier"),o=/^[^\t-\r \x85\u200E\u200F\u2028\u2029!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,s=$e([["\t","\r"]," ","","‎","‏","\u2028","\u2029",["!","/"],[":","@"],["[","^"],"`",["{","~"],["¡","§"],"©","«","¬","®","°","±","¶","»","¿","×","÷",["‐","‧"],["‰","‾"],["⁁","⁓"],["⁕","⁞"],["←","⑟"],["─","❵"],["➔","⯿"],["⸀","⹿"],["、","〃"],["〈","〠"],"〰","﴾","﴿","﹅","﹆"],!0,!1),a=function(e,t){return{key:e,tokens:t}},l=function(e){return e},z=Ke("plural offset"),G="offset",q=qe("offset",!1),$=":",K=qe(":",!1),J=function(e){return e},u="=",c=qe("=",!1),X="number",Y=qe("number",!1),Q="date",Z=qe("date",!1),ee="time",te=qe("time",!1),ne="spellout",re=qe("spellout",!1),oe="ordinal",ie=qe("ordinal",!1),se="duration",ae=qe("duration",!1),le=function(e){if(i.strict||/^\d/.test(e))return!1;switch(e.toLowerCase()){case"select":case"plural":case"selectordinal":return!1;default:return!0}},ue=function(e){return e},ce=function(e){return!i.strict},pe=function(e){return{tokens:e}},de=function(e){return{tokens:[e.join("")]}},p=Ke("a valid (strict) function parameter"),d=/^[^'{}]/,h=$e(["'","{","}"],!0,!1),f=function(e){return e.join("")},g="'",m=qe("'",!1),v=function(e){return e},x=function(e){return"{"+e.join("")+"}"},he=Ke("doubled apostrophe"),fe="''",ge=qe("''",!1),me=function(){return"'"},ve=/^[^']/,xe=$e(["'"],!0,!1),ye="'{",be=qe("'{",!1),we=function(e){return"{"+e.join("")},Ee="'}",Ce=qe("'}",!1),je=function(e){return"}"+e.join("")},Le=Ke("escaped string"),Te="'#",Se=qe("'#",!1),Ae=function(e){return"#"+e.join("")},De=function(e){return e[0]},Ie=Ke("plain char"),ke=/^[^{}#\0-\x08\x0E-\x1F\x7F]/,Ne=$e(["{","}","#",["\0","\b"],["",""],""],!0,!1),Me=function(e){return!ht[0]},Oe=function(e){return e},Re=Ke("integer"),Fe=/^[0-9]/,Be=$e([["0","9"]],!1,!1),Pe=Ke("white space"),He=/^[\t-\r \x85\u200E\u200F\u2028\u2029]/,Ue=$e([["\t","\r"]," ","","‎","‏","\u2028","\u2029"],!1,!1),Ve=0,_e=[{line:1,column:1}],We=0,ze=[],Ge=0;if("startRule"in i){if(!(i.startRule in t))throw new Error("Can't start parsing from rule \""+i.startRule+'".');n=t[i.startRule]}function qe(e,t){return{type:"literal",text:e,ignoreCase:t}}function $e(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Ke(e){return{type:"other",description:e}}function Je(e){var t,n=_e[e];if(n)return n;for(t=e-1;!_e[t];)t--;for(n={line:(n=_e[t]).line,column:n.column};t<e;)10===y.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return _e[e]=n}function Xe(e,t){var n=Je(e),r=Je(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Ye(e){Ve<We||(We<Ve&&(We=Ve,ze=[]),ze.push(e))}function Qe(){var e,t;for(e=[],t=Ze();t!==b;)e.push(t),t=Ze();return e}function Ze(){var e,t,n,r,o,i,s,a,l,u,c,p,d,h,f,g,m,v,x;if(g=Ve,123===y.charCodeAt(Ve)?(m=T,Ve++):(m=b,0===Ge&&Ye(S)),(e=g=m!==b&&ut()!==b&&(v=et())!==b&&ut()!==b?(125===y.charCodeAt(Ve)?(x=A,Ve++):(x=b,0===Ge&&Ye(D)),x!==b?m=I(v):(Ve=g,b)):(Ve=g,b))===b&&(e=function(){var e,t,n,r,o,i,s,a,l;if(e=Ve,123===y.charCodeAt(Ve)?(t=T,Ve++):(t=b,0===Ge&&Ye(S)),t!==b)if(ut()!==b)if((n=et())!==b)if(ut()!==b)if(44===y.charCodeAt(Ve)?(r=k,Ve++):(r=b,0===Ge&&Ye(N)),r!==b)if(ut()!==b)if(y.substr(Ve,6)===M?(o=M,Ve+=6):(o=b,0===Ge&&Ye(O)),o!==b&&(o=R(n,o)),o!==b)if((o=ut())!==b)if(44===y.charCodeAt(Ve)?(i=k,Ve++):(i=b,0===Ge&&Ye(N)),i!==b)if(ut()!==b){if(s=[],(a=tt())!==b)for(;a!==b;)s.push(a),a=tt();else s=b;e=s!==b&&(a=ut())!==b?(125===y.charCodeAt(Ve)?(l=A,Ve++):(l=b,0===Ge&&Ye(D)),l!==b?t=F(n,s):(Ve=e,b)):(Ve=e,b)}else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;return e}())===b&&(e=function(){var e,t,n,r,o,i,s,a,l,u,c,p,d,h,f;if(e=Ve,123===y.charCodeAt(Ve)?(t=T,Ve++):(t=b,0===Ge&&Ye(S)),t!==b)if(ut()!==b)if((n=et())!==b)if(ut()!==b)if(44===y.charCodeAt(Ve)?(r=k,Ve++):(r=b,0===Ge&&Ye(N)),r!==b)if(ut()!==b)if(Ve,y.substr(Ve,6)===B?(i=B,Ve+=6):(i=b,0===Ge&&Ye(P)),i===b&&(y.substr(Ve,13)===H?(i=H,Ve+=13):(i=b,0===Ge&&Ye(U))),i!==b&&(i=V(n,i)),(o=i)!==b)if((i=ut())!==b)if(44===y.charCodeAt(Ve)?(s=k,Ve++):(s=b,0===Ge&&Ye(N)),s!==b)if(ut()!==b)if(Ge++,p=Ve,p=ut()!==b?(y.substr(Ve,6)===G?(d=G,Ve+=6):(d=b,0===Ge&&Ye(q)),d!==b&&ut()!==b?(58===y.charCodeAt(Ve)?(h=$,Ve++):(h=b,0===Ge&&Ye(K)),h!==b&&ut()!==b&&(f=lt())!==b&&ut()!==b?J(f):(Ve=p,b)):(Ve=p,b)):(Ve=p,b),Ge--,p!==b||0===Ge&&Ye(z),(a=p)===b&&(a=null),a!==b){if(l=[],(u=nt())!==b)for(;u!==b;)l.push(u),u=nt();else l=b;e=l!==b&&(u=ut())!==b?(125===y.charCodeAt(Ve)?(c=A,Ve++):(c=b,0===Ge&&Ye(D)),c!==b?t=_(n,o,a,l):(Ve=e,b)):(Ve=e,b)}else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;else Ve=e,e=b;return e}())===b&&(r=Ve,123===y.charCodeAt(Ve)?(o=T,Ve++):(o=b,0===Ge&&Ye(S)),(e=r=o!==b&&ut()!==b&&(i=et())!==b&&ut()!==b?(44===y.charCodeAt(Ve)?(s=k,Ve++):(s=b,0===Ge&&Ye(N)),s!==b&&ut()!==b&&(y.substr(Ve,6)===X?(c=X,Ve+=6):(c=b,0===Ge&&Ye(Y)),c===b&&(y.substr(Ve,4)===Q?(c=Q,Ve+=4):(c=b,0===Ge&&Ye(Z)),c===b&&(y.substr(Ve,4)===ee?(c=ee,Ve+=4):(c=b,0===Ge&&Ye(te)),c===b&&(y.substr(Ve,8)===ne?(c=ne,Ve+=8):(c=b,0===Ge&&Ye(re)),c===b&&(y.substr(Ve,7)===oe?(c=oe,Ve+=7):(c=b,0===Ge&&Ye(ie)),c===b&&(y.substr(Ve,8)===se?(c=se,Ve+=8):(c=b,0===Ge&&Ye(ae)),c===b&&(p=c=Ve,Ge++,y.substr(Ve,6)===M?(d=M,Ve+=6):(d=b,0===Ge&&Ye(O)),Ge--,c=(p=d===b?void 0:(Ve=p,b))!==b?(d=Ve,Ge++,y.substr(Ve,6)===B?(h=B,Ve+=6):(h=b,0===Ge&&Ye(P)),Ge--,(d=h===b?void 0:(Ve=d,b))!==b?(h=Ve,Ge++,y.substr(Ve,13)===H?(f=H,Ve+=13):(f=b,0===Ge&&Ye(U)),Ge--,(h=f===b?void 0:(Ve=h,b))!==b&&(f=et())!==b&&(le(f)?void 0:b)!==b?p=ue(f):(Ve=c,b)):(Ve=c,b)):(Ve=c,b))))))),(a=c)!==b)&&ut()!==b?((l=function(){var e,t,n,r;if(e=Ve,ut()!==b)if(44===y.charCodeAt(Ve)?(t=k,Ve++):(t=b,0===Ge&&Ye(N)),t!==b){for(n=[],r=Ze();r!==b;)n.push(r),r=Ze();e=n!==b&&(r=(r=ce(n))?void 0:b)!==b?pe(n):(Ve=e,b)}else Ve=e,e=b;else Ve=e,e=b;if(e===b)if(e=Ve,ut()!==b)if(44===y.charCodeAt(Ve)?(t=k,Ve++):(t=b,0===Ge&&Ye(N)),t!==b){for(n=[],r=ot();r!==b;)n.push(r),r=ot();e=n!==b?de(n):(Ve=e,b)}else Ve=e,e=b;else Ve=e,e=b;return e}())===b&&(l=null),l!==b?(125===y.charCodeAt(Ve)?(u=A,Ve++):(u=b,0===Ge&&Ye(D)),u!==b?o=W(i,a,l):(Ve=r,b)):(Ve=r,b)):(Ve=r,b)):(Ve=r,b))===b)&&(e=Ve,35===y.charCodeAt(Ve)?(t=w,Ve++):(t=b,0===Ge&&Ye(E)),(e=t!==b&&(n=(n=C())?void 0:b)!==b?t=j():(Ve=e,b))===b)){if(e=Ve,t=[],(n=at())!==b)for(;n!==b;)t.push(n),n=at();else t=b;t!==b&&(t=L(t)),e=t}return e}function et(){var e,t,n;if(Ge++,e=Ve,t=[],o.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(s)),n!==b)for(;n!==b;)t.push(n),o.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(s));else t=b;return e=t!==b?y.substring(e,Ve):t,Ge--,e===b&&(t=b,0===Ge&&Ye(r)),e}function tt(){var e,t,n;return e=Ve,e=ut()!==b&&(t=et())!==b&&ut()!==b&&(n=rt())!==b?a(t,n):(Ve=e,b)}function nt(){var e,t,n,r,o,i;return e=Ve,e=ut()!==b&&((r=et())===b&&(r=Ve,61===y.charCodeAt(Ve)?(o=u,Ve++):(o=b,0===Ge&&Ye(c)),r=o!==b&&(i=lt())!==b?o=J(i):(Ve=r,b)),(t=r)!==b)&&ut()!==b&&(n=rt())!==b?a(t,n):(Ve=e,b)}function rt(){var e,t,n,r,o,i;if(e=Ve,123===y.charCodeAt(Ve)?(t=T,Ve++):(t=b,0===Ge&&Ye(S)),t!==b)if(n=Ve,(n=(r=ut())!==b?(o=Ve,Ge++,123===y.charCodeAt(Ve)?(i=T,Ve++):(i=b,0===Ge&&Ye(S)),Ge--,(o=i!==b?void(Ve=o):b)!==b?r=[r,o]:(Ve=n,b)):(Ve=n,b))===b&&(n=null),n!==b){for(r=[],o=Ze();o!==b;)r.push(o),o=Ze();e=r!==b&&(o=ut())!==b?(125===y.charCodeAt(Ve)?(i=A,Ve++):(i=b,0===Ge&&Ye(D)),i!==b?t=l(r):(Ve=e,b)):(Ve=e,b)}else Ve=e,e=b;else Ve=e,e=b;return e}function ot(){var e,t,n,r;if(Ge++,e=Ve,t=[],d.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(h)),n!==b)for(;n!==b;)t.push(n),d.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(h));else t=b;if(t!==b&&(t=f(t)),(e=t)===b&&(e=it())===b&&(e=Ve,39===y.charCodeAt(Ve)?(t=g,Ve++):(t=b,0===Ge&&Ye(m)),(e=t!==b&&(n=st())!==b?(39===y.charCodeAt(Ve)?(r=g,Ve++):(r=b,0===Ge&&Ye(m)),r!==b?t=v(n):(Ve=e,b)):(Ve=e,b))===b))if(e=Ve,123===y.charCodeAt(Ve)?(t=T,Ve++):(t=b,0===Ge&&Ye(S)),t!==b){for(n=[],r=ot();r!==b;)n.push(r),r=ot();e=n!==b?(125===y.charCodeAt(Ve)?(r=A,Ve++):(r=b,0===Ge&&Ye(D)),r!==b?t=x(n):(Ve=e,b)):(Ve=e,b)}else Ve=e,e=b;return Ge--,e===b&&(t=b,0===Ge&&Ye(p)),e}function it(){var e,t;return Ge++,Ve,y.substr(Ve,2)===fe?(t=fe,Ve+=2):(t=b,0===Ge&&Ye(ge)),t!==b&&(t=me()),Ge--,(e=t)===b&&(t=b,0===Ge&&Ye(he)),e}function st(){var e,t,n;if((e=it())===b){if(e=Ve,t=[],ve.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(xe)),n!==b)for(;n!==b;)t.push(n),ve.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(xe));else t=b;t!==b&&(t=L(t)),e=t}return e}function at(){var e,t,n;return(e=it())===b&&(e=function(){var e,t,n,r,o,i;if(Ge++,(e=function(){var e,t,n,r;if(e=Ve,y.substr(Ve,2)===ye?(t=ye,Ve+=2):(t=b,0===Ge&&Ye(be)),t!==b){for(n=[],r=st();r!==b;)n.push(r),r=st();e=n!==b?(39===y.charCodeAt(Ve)?(r=g,Ve++):(r=b,0===Ge&&Ye(m)),r!==b?t=we(n):(Ve=e,b)):(Ve=e,b)}else Ve=e,e=b;if(e===b)if(e=Ve,y.substr(Ve,2)===Ee?(t=Ee,Ve+=2):(t=b,0===Ge&&Ye(Ce)),t!==b){for(n=[],r=st();r!==b;)n.push(r),r=st();e=n!==b?(39===y.charCodeAt(Ve)?(r=g,Ve++):(r=b,0===Ge&&Ye(m)),r!==b?t=je(n):(Ve=e,b)):(Ve=e,b)}else Ve=e,e=b;return e}())===b){if(n=t=e=Ve,y.substr(Ve,2)===Te?(r=Te,Ve+=2):(r=b,0===Ge&&Ye(Se)),r!==b){for(o=[],i=st();i!==b;)o.push(i),i=st();n=o!==b?(39===y.charCodeAt(Ve)?(i=g,Ve++):(i=b,0===Ge&&Ye(m)),i!==b?r=Ae(o):(Ve=n,b)):(Ve=n,b)}else Ve=n,n=b;(t=n!==b&&(r=(r=C())?void 0:b)!==b?n=[n,r]:(Ve=t,b))!==b&&(t=De(t)),(e=t)===b&&(39===y.charCodeAt(Ve)?(e=g,Ve++):(e=b,0===Ge&&Ye(m)))}return Ge--,e===b&&(t=b,0===Ge&&Ye(Le)),e}())===b&&(e=Ve,35===y.charCodeAt(Ve)?(t=w,Ve++):(t=b,0===Ge&&Ye(E)),(e=t!==b&&(Me(t)?void 0:b)!==b?t=Oe(t):(Ve=e,b))===b&&(Ge++,ke.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(Ne)),Ge--,n===b&&0===Ge&&Ye(Ie),e=n)),e}function lt(){var e,t,n;if(Ge++,e=Ve,t=[],Fe.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(Be)),n!==b)for(;n!==b;)t.push(n),Fe.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(Be));else t=b;return e=t!==b?y.substring(e,Ve):t,Ge--,e===b&&(t=b,0===Ge&&Ye(Re)),e}function ut(){var e,t,n;for(Ge++,e=Ve,t=[],He.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(Ue));n!==b;)t.push(n),He.test(y.charAt(Ve))?(n=y.charAt(Ve),Ve++):(n=b,0===Ge&&Ye(Ue));return e=t!==b?y.substring(e,Ve):t,Ge--,e===b&&(t=b,0===Ge&&Ye(Pe)),e}var ct,pt,dt,ht=[!1];if((e=n())!==b&&Ve===y.length)return e;throw e!==b&&Ve<y.length&&Ye({type:"end"}),ct=ze,pt=We<y.length?y.charAt(We):null,dt=We<y.length?Xe(We,We+1):Xe(We,We),new ft(ft.buildMessage(ct,pt),ct,pt,dt)}}},function(e,t,n){var r,o,i=[{cardinal:["other"],ordinal:["other"]},{cardinal:["one","other"],ordinal:["other"]},{cardinal:["one","other"],ordinal:["one","other"]},{cardinal:["one","two","other"],ordinal:["other"]}];void 0===(o="function"==typeof(r={af:i[1],ak:i[1],am:i[1],ar:{cardinal:["zero","one","two","few","many","other"],ordinal:["other"]},ars:{cardinal:["zero","one","two","few","many","other"],ordinal:["other"]},as:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},asa:i[1],ast:i[1],az:{cardinal:["one","other"],ordinal:["one","few","many","other"]},be:{cardinal:["one","few","many","other"],ordinal:["few","other"]},bem:i[1],bez:i[1],bg:i[1],bh:i[1],bm:i[0],bn:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},bo:i[0],br:{cardinal:["one","two","few","many","other"],ordinal:["other"]},brx:i[1],bs:{cardinal:["one","few","other"],ordinal:["other"]},ca:{cardinal:["one","other"],ordinal:["one","two","few","other"]},ce:i[1],cgg:i[1],chr:i[1],ckb:i[1],cs:{cardinal:["one","few","many","other"],ordinal:["other"]},cy:{cardinal:["zero","one","two","few","many","other"],ordinal:["zero","one","two","few","many","other"]},da:i[1],de:i[1],dsb:{cardinal:["one","two","few","other"],ordinal:["other"]},dv:i[1],dz:i[0],ee:i[1],el:i[1],en:{cardinal:["one","other"],ordinal:["one","two","few","other"]},eo:i[1],es:i[1],et:i[1],eu:i[1],fa:i[1],ff:i[1],fi:i[1],fil:i[2],fo:i[1],fr:i[2],fur:i[1],fy:i[1],ga:{cardinal:["one","two","few","many","other"],ordinal:["one","other"]},gd:{cardinal:["one","two","few","other"],ordinal:["one","two","few","other"]},gl:i[1],gsw:i[1],gu:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},guw:i[1],gv:{cardinal:["one","two","few","many","other"],ordinal:["other"]},ha:i[1],haw:i[1],he:{cardinal:["one","two","many","other"],ordinal:["other"]},hi:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},hr:{cardinal:["one","few","other"],ordinal:["other"]},hsb:{cardinal:["one","two","few","other"],ordinal:["other"]},hu:i[2],hy:i[2],ia:i[1],id:i[0],ig:i[0],ii:i[0],in:i[0],io:i[1],is:i[1],it:{cardinal:["one","other"],ordinal:["many","other"]},iu:i[3],iw:{cardinal:["one","two","many","other"],ordinal:["other"]},ja:i[0],jbo:i[0],jgo:i[1],ji:i[1],jmc:i[1],jv:i[0],jw:i[0],ka:{cardinal:["one","other"],ordinal:["one","many","other"]},kab:i[1],kaj:i[1],kcg:i[1],kde:i[0],kea:i[0],kk:{cardinal:["one","other"],ordinal:["many","other"]},kkj:i[1],kl:i[1],km:i[0],kn:i[1],ko:i[0],ks:i[1],ksb:i[1],ksh:{cardinal:["zero","one","other"],ordinal:["other"]},ku:i[1],kw:i[3],ky:i[1],lag:{cardinal:["zero","one","other"],ordinal:["other"]},lb:i[1],lg:i[1],lkt:i[0],ln:i[1],lo:{cardinal:["other"],ordinal:["one","other"]},lt:{cardinal:["one","few","many","other"],ordinal:["other"]},lv:{cardinal:["zero","one","other"],ordinal:["other"]},mas:i[1],mg:i[1],mgo:i[1],mk:{cardinal:["one","other"],ordinal:["one","two","many","other"]},ml:i[1],mn:i[1],mo:{cardinal:["one","few","other"],ordinal:["one","other"]},mr:{cardinal:["one","other"],ordinal:["one","two","few","other"]},ms:{cardinal:["other"],ordinal:["one","other"]},mt:{cardinal:["one","few","many","other"],ordinal:["other"]},my:i[0],nah:i[1],naq:i[3],nb:i[1],nd:i[1],ne:i[2],nl:i[1],nn:i[1],nnh:i[1],no:i[1],nqo:i[0],nr:i[1],nso:i[1],ny:i[1],nyn:i[1],om:i[1],or:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},os:i[1],pa:i[1],pap:i[1],pl:{cardinal:["one","few","many","other"],ordinal:["other"]},prg:{cardinal:["zero","one","other"],ordinal:["other"]},ps:i[1],pt:i[1],"pt-PT":i[1],rm:i[1],ro:{cardinal:["one","few","other"],ordinal:["one","other"]},rof:i[1],root:i[0],ru:{cardinal:["one","few","many","other"],ordinal:["other"]},rwk:i[1],sah:i[0],saq:i[1],sc:{cardinal:["one","other"],ordinal:["many","other"]},scn:{cardinal:["one","other"],ordinal:["many","other"]},sd:i[1],sdh:i[1],se:i[3],seh:i[1],ses:i[0],sg:i[0],sh:{cardinal:["one","few","other"],ordinal:["other"]},shi:{cardinal:["one","few","other"],ordinal:["other"]},si:i[1],sk:{cardinal:["one","few","many","other"],ordinal:["other"]},sl:{cardinal:["one","two","few","other"],ordinal:["other"]},sma:i[3],smi:i[3],smj:i[3],smn:i[3],sms:i[3],sn:i[1],so:i[1],sq:{cardinal:["one","other"],ordinal:["one","many","other"]},sr:{cardinal:["one","few","other"],ordinal:["other"]},ss:i[1],ssy:i[1],st:i[1],sv:i[2],sw:i[1],syr:i[1],ta:i[1],te:i[1],teo:i[1],th:i[0],ti:i[1],tig:i[1],tk:{cardinal:["one","other"],ordinal:["few","other"]},tl:i[2],tn:i[1],to:i[0],tr:i[1],ts:i[1],tzm:i[1],ug:i[1],uk:{cardinal:["one","few","many","other"],ordinal:["few","other"]},ur:i[1],uz:i[1],ve:i[1],vi:{cardinal:["other"],ordinal:["one","other"]},vo:i[1],vun:i[1],wa:i[1],wae:i[1],wo:i[0],xh:i[1],xog:i[1],yi:i[1],yo:i[0],yue:i[0],zh:i[0],zu:i[1]})?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t){function n(e,t,n){var r={day:"numeric",month:"short",year:"numeric"};switch(n){case"full":r.weekday="long";case"long":r.month="long";break;case"short":r.month="numeric"}return new Date(e).toLocaleDateString(t,r)}e.exports=function(){return n}},function(e,t){function n(e){if(!isFinite(e))return String(e);var t="",n=(e=e<0?(t="-",Math.abs(e)):Number(e))%60,r=[Math.round(n)===n?n:n.toFixed(3)];return e<60?r.unshift(0):(e=Math.round((e-r[0])/60),r.unshift(e%60),60<=e&&(e=Math.round((e-r[0])/60),r.unshift(e))),t+r.shift()+":"+r.map(function(e){return e<10?"0"+String(e):String(e)}).join(":")}e.exports=function(){return n}},function(e,t){e.exports=function(e){var t=function(e,t,n){var r=n&&n.split(":")||[],o={integer:{maximumFractionDigits:0},percent:{style:"percent"},currency:{style:"currency",currency:r[1]&&r[1].trim()||CURRENCY,minimumFractionDigits:2,maximumFractionDigits:2}};return new Intl.NumberFormat(t,o[r[0]]||{}).format(e)}.toString().replace("CURRENCY",JSON.stringify(e.currency||"USD")).match(/\(([^)]*)\)[^{]*{([\s\S]*)}/);return new Function(t[1],t[2])}},function(e,t){function n(e,t,n){var r={second:"numeric",minute:"numeric",hour:"numeric"};switch(n){case"full":case"long":r.timeZoneName="short";break;case"short":delete r.second}return new Date(e).toLocaleTimeString(t,r)}e.exports=function(){return n}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),u=n(2),i={break:!0,continue:!0,delete:!0,else:!0,for:!0,function:!0,if:!0,in:!0,new:!0,return:!0,this:!0,typeof:!0,var:!0,void:!0,while:!0,with:!0,case:!0,catch:!0,default:!0,do:!0,finally:!0,instanceof:!0,switch:!0,throw:!0,try:!0},s={debugger:!0,class:!0,enum:!0,extends:!0,super:!0,const:!0,export:!0,import:!0,null:!0,true:!0,false:!0,implements:!0,let:!0,private:!0,public:!0,yield:!0,interface:!0,package:!0,protected:!0,static:!0};function g(e,t){if(/^[A-Z_$][0-9A-Z_$]*$/i.test(e)&&!i[e])return t?"".concat(t,".").concat(e):e;var n=JSON.stringify(e);return t?t+"[".concat(n,"]"):n}function m(e){var t=e.trim().replace(/\W+/g,"_");return i[t]||s[t]||/^\d/.test(t)?"_"+t:t}var p=new RegExp("^"+["ar","ckb","fa","he","ks($|[^bfh])","lrc","mzn","pa-Arab","ps","ug","ur","uz-Arab","yi"].join("|^"));function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=(a(f.prototype,[{key:"compile",value:function(e,t,n){var r=this;if("object"!=c(e)){var o=n[this.lc=t]||{cardinal:[],ordinal:[]};o.strict=!!this.mf.options.strictNumberSign;var i=Object(u.parse)(e,o).map(function(e){return r.token(e)});return"function(d) { return ".concat(i.join(" + ")||'""',"; }")}var s={};for(var a in e){var l=n.hasOwnProperty(a)?a:t;s[a]=this.compile(e[a],l,n)}return s}},{key:"cases",value:function(e,o){var i=this,s="select"===e.type||!this.mf.hasCustomPluralFuncs,t=e.cases.map(function(e){var t=e.key,n=e.tokens;"other"===t&&(s=!1);var r=n.map(function(e){return i.token(e,o)});return g(t)+": "+(r.join(" + ")||'""')});if(s)throw new Error("No 'other' form found in "+JSON.stringify(e));return"{ ".concat(t.join(", ")," }")}},{key:"token",value:function(e,t){var n,r=this;if("string"==typeof e)return JSON.stringify(e);var o,i,s,a,l=[g(e.arg,"d")];switch(e.type){case"argument":return this.mf.options.biDiSupport?(o=l[0],i=this.lc,s=p.test(i),a=JSON.stringify(s?"‏":"‎"),"".concat(a," + ").concat(o," + ").concat(a)):l[0];case"select":n="select",t&&this.mf.options.strictNumberSign&&(t=null),l.push(this.cases(e,t)),this.runtime.select=!0;break;case"selectordinal":n="plural",l.push(0,m(this.lc),this.cases(e,e),1),this.locales[this.lc]=!0,this.runtime.plural=!0;break;case"plural":n="plural",l.push(e.offset||0,m(this.lc),this.cases(e,e)),this.locales[this.lc]=!0,this.runtime.plural=!0;break;case"function":if(!(e.key in this.mf.fmt)&&e.key in this.mf.constructor.formatters){var u=this.mf.constructor.formatters[e.key];this.mf.fmt[e.key]=u(this.mf)}if(!this.mf.fmt[e.key])throw new Error("Formatting function ".concat(JSON.stringify(e.key)," not found!"));if(l.push(JSON.stringify(this.lc)),e.param){t&&this.mf.options.strictNumberSign&&(t=null);var c=e.param.tokens.map(function(e){return r.token(e,t)});l.push("("+(c.join(" + ")||'""')+").trim()")}n=g(e.key,"fmt"),this.formatters[e.key]=!0;break;case"octothorpe":if(!t)return'"#"';n="number",l=[g(t.arg,"d"),JSON.stringify(t.arg)],t.offset&&l.push(t.offset),this.runtime.number=!0}if(!n)throw new Error("Parser error for token "+JSON.stringify(e));return"".concat(n,"(").concat(l.join(", "),")")}}]),f),l=n(3),d=n.n(l),h=n(0),x=n.n(h);function f(e){!function(e){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.mf=e,this.lc=null,this.locales={},this.runtime={},this.formatters={}}function y(e,t,n){function r(){return t.apply(this,arguments)}if(r.toString=function(){return t.toString()},n){var o=d.a[e]||{};r.cardinal=o.cardinal,r.ordinal=o.ordinal}else r.cardinal=[],r.ordinal=[];return r}function b(e,t){for(var n=t.pluralKeyChecks,r=String(e);r;r=r.replace(/[-_]?[^-_]*$/,"")){var o=x.a[r];if(o)return y(r,o,n)}throw new Error("Localisation function not found for locale "+JSON.stringify(e))}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=(E(j.prototype,[{key:"setStrictNumber",value:function(e){this.number=e?j.strictNumber:j.defaultNumber}},{key:"toString",value:function(e,t){for(var n={},r=Object.keys(t.locales),o=0;o<r.length;++o){var i=r[o];n[m(i)]=e[i]}for(var s=Object.keys(t.runtime),a=0;a<s.length;++a){var l=s[a];n[l]=this[l]}var u=Object.keys(t.formatters);if(0<u.length){n.fmt={};for(var c=0;c<u.length;++c){var p=u[c];n.fmt[p]=this.mf.fmt[p]}}return function e(t,n){if("object"!=w(t)){var r=t.toString().replace(/^(function )\w*/,"$1"),o=/([ \t]*)\S.*$/.exec(r);return o?r.replace(new RegExp("^"+o[1],"mg"),""):r}var i=[];for(var s in t){var a=e(t[s],n+1);i.push(0===n?"var ".concat(s," = ").concat(a,";\n"):"".concat(g(s),": ").concat(a))}if(0===n)return i.join("");if(0===i.length)return"{}";for(var l="  ";--n;)l+="  ";var u=i.join(",\n").replace(/^/gm,l);return"{\n".concat(u,"\n}")}(n,0)}}]),j);function j(e){!function(e){if(!(e instanceof j))throw new TypeError("Cannot call a class as a function")}(this),this.plural=function(e,t,n,r,o){if({}.hasOwnProperty.call(r,e))return r[e];t&&(e-=t);var i=n(e,o);return i in r?r[i]:r.other},this.select=function(e,t){return{}.hasOwnProperty.call(t,e)?t[e]:t.other},this.mf=e,this.setStrictNumber(e.options.strictNumberSign)}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}C.defaultNumber=function(e,t,n){if(!n)return e;if(isNaN(e))throw new Error("Can't apply offset:"+n+" to argument `"+t+"` with non-numerical value "+JSON.stringify(e)+".");return e-n},C.strictNumber=function(e,t,n){if(isNaN(e))throw new Error("Argument `"+t+"` has non-numerical value "+JSON.stringify(e)+".");return e-(n||0)},n.d(t,"default",function(){return A});var A=(S(D,null,[{key:"escape",value:function(e,t){var n=t?/[#{}]/g:/[{}]/g;return String(e).replace(n,"'$&'")}}]),S(D,[{key:"addFormatters",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;++n){var r=t[n];this.fmt[r]=e[r]}return this}},{key:"disablePluralKeyChecks",value:function(){for(var e in this.options.pluralKeyChecks=!1,this.pluralFuncs){var t=this.pluralFuncs[e];t&&(t.cardinal=[],t.ordinal=[])}return this}},{key:"setBiDiSupport",value:function(e){return this.options.biDiSupport=!!e||void 0===e,this}},{key:"setStrictNumberSign",value:function(e){return this.options.strictNumberSign=!!e||void 0===e,this.runtime.setStrictNumber(this.options.strictNumberSign),this}},{key:"compile",value:function(e,t){var n={};if(0===Object.keys(this.pluralFuncs).length)if(t){var r=b(t,this.options);if(!r){var o=JSON.stringify(t);throw new Error("Locale ".concat(o," not found!"))}n[t]=r}else t=this.defaultLocale,n=function(e){for(var t=e.pluralKeyChecks,n={},r=Object.keys(x.a),o=0;o<r.length;++o){var i=r[o];n[i]=y(i,x.a[i],t)}return n}(this.options);else if(t){var i=this.pluralFuncs[t];if(!i){var s=JSON.stringify(t),a=JSON.stringify(this.pluralFuncs);throw new Error("Locale ".concat(s," not found in ").concat(a,"!"))}n[t]=i}else t=this.defaultLocale,n=this.pluralFuncs;var l=new v(this),u=l.compile(e,t,n);if("object"!=L(e)){var c=new Function("number, plural, select, fmt",m(t),"return "+u),p=this.runtime;return c(p.number,p.plural,p.select,this.fmt,n[t])}var d=this.runtime.toString(n,l)+"\n",h=function e(t,n){if(n=n||0,"object"!=L(t))return t;for(var r="",o=0;o<n;++o)r+="  ";var i=[];for(var s in t){var a=e(t[s],n+1);i.push("\n".concat(r,"  ").concat(g(s),": ").concat(a))}return"{".concat(i.join(","),"\n").concat(r,"}")}(u),f=new Function(d+"return "+h)();if(f.hasOwnProperty("toString"))throw new Error("The top-level message key `toString` is reserved");return f.toString=function(e){return e&&"export default"!==e?-1<e.indexOf(".")?d+e+" = "+h:d+["(function (root, G) {",'  if (typeof define === "function" && define.amd) { define(G); }','  else if (typeof exports === "object") { module.exports = G; }',"  else { "+g(e,"root")+" = G; }","})(this, "+h+");"].join("\n"):d+"export default "+h},f}}]),D);function D(e,t){var n=this;if(function(e){if(!(e instanceof D))throw new TypeError("Cannot call a class as a function")}(this),this.options=Object.assign({biDiSupport:!1,customFormatters:null,pluralKeyChecks:!0,strictNumberSign:!1},t),this.pluralFuncs={},"string"==typeof e)this.pluralFuncs[e]=b(e,this.options),this.defaultLocale=e;else if(Array.isArray(e))e.forEach(function(e){n.pluralFuncs[e]=b(e,n.options)}),this.defaultLocale=e[0];else{if(e)for(var r=Object.keys(e),o=0;o<r.length;++o){var i=r[o];if("function"!=typeof e[i]){var s="Expected function value for locale "+String(i);throw new Error(s)}this.pluralFuncs[i]=e[i],this.defaultLocale||(this.defaultLocale=i)}this.defaultLocale?this.hasCustomPluralFuncs=!0:(this.defaultLocale=D.defaultLocale,this.hasCustomPluralFuncs=!1)}this.fmt=Object.assign({},this.options.customFormatters),this.runtime=new C(this)}A.defaultLocale="en",A.formatters=o.a}],o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=8)).default;function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r},"object"==typeof n&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof n?n.MessageFormat=o():r.MessageFormat=o()},{}],87:[function(e,t,n){var r,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var u,c=[],p=!1,d=-1;function h(){p&&u&&(p=!1,u.length?c=u.concat(c):d=-1,c.length&&f())}function f(){if(!p){var e=l(h);p=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,p=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new g(e,t)),1!==c.length||p||l(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}]},{},[68])(68)});